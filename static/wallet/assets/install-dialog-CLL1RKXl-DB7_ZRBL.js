const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/esp32-DlivVhIs-Bl9fHQaf.js","assets/rom-B2LvkjpK-f2JiXiqJ.js","assets/esp32c2-B8k8_i-D-BO_QbRPT.js","assets/esp32c3-CgdtzNJE-CaIATbJM.js","assets/esp32c6-C6rrFJso-2m7xm4Dl.js","assets/esp32c61-BUPwzLDb-CP7ZGrdM.js","assets/esp32c5-CFQToUlC-DBsQQp-S.js","assets/esp32h2-IsK8MXMR-LFr8PPiW.js","assets/esp32s3-vxLttl29-Dn3XEpc8.js","assets/esp32s2-Bl3uMkxu-BfjjNc2i.js","assets/esp8266-Dk4lBEaC-Bh23TS2k.js","assets/esp32p4-DD6i9EGh-DzB9VqkQ.js"])))=>i.map(i=>d[i]);
import{_ as U,__tla as gs}from"./main-DpiUSIJj.js";import{t as h,n as N,W as ze,c as M,m as v,b as X,l as _s,f as O,X as bs,y as Ce,g as Jr,j as b,a as ys,p as Ht,d as S,O as re,e as xs,h as ws,Q as Es,i as Si,K as te,V as ge,J as qt,k as Qr,R as pt,o as eo,z as ks,I as to,T as Pe,q as ut}from"./styles-XdZATt8s-BZ-IKDNT.js";import{__tla as Ss}from"./hdWallet-CruKAn2M.js";let K,As=Promise.all([(()=>{try{return gs}catch{}})(),(()=>{try{return Ss}catch{}})()]).then(async()=>{let Ai;function Ti(i,t=de){const e=Vt(i,t);return e&&(e.tabIndex=0,e.focus()),e}function Ci(i,t=de){const e=Ri(i,t);return e&&(e.tabIndex=0,e.focus()),e}function Ve(i,t=de){for(let e=0;e<i.length;e++){const r=i[e];if(r.tabIndex===0&&t(r))return{item:r,index:e}}return null}function Vt(i,t=de){for(const e of i)if(t(e))return e;return null}function Ri(i,t=de){for(let e=i.length-1;e>=0;e--){const r=i[e];if(t(r))return r}return null}function Ii(i,t,e=de,r=!0){if(t){const o=function(a,n,s=de,c=!0){for(let l=1;l<a.length;l++){const d=(l+n)%a.length;if(d<n&&!c)return null;const f=a[d];if(s(f))return f}return a[n]?a[n]:null}(i,t.index,e,r);return o&&(o.tabIndex=0,o.focus()),o}return Ti(i,e)}function $i(i,t,e=de,r=!0){if(t){const o=function(a,n,s=de,c=!0){for(let l=1;l<a.length;l++){const d=(n-l+a.length)%a.length;if(d>n&&!c)return null;const f=a[d];if(s(f))return f}return a[n]?a[n]:null}(i,t.index,e,r);return o&&(o.tabIndex=0,o.focus()),o}return Ci(i,e)}function de(i){return!i.disabled}const q={ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",Home:"Home",End:"End"};class Li{constructor(t){this.handleKeydown=d=>{const f=d.key;if(d.defaultPrevented||!this.isNavigableKey(f))return;const g=this.items;if(!g.length)return;const p=Ve(g,this.isActivatable);d.preventDefault();const k=this.isRtl();let u=null;switch(f){case q.ArrowDown:case(k?q.ArrowLeft:q.ArrowRight):u=Ii(g,p,this.isActivatable,this.wrapNavigation());break;case q.ArrowUp:case(k?q.ArrowRight:q.ArrowLeft):u=$i(g,p,this.isActivatable,this.wrapNavigation());break;case q.Home:u=Ti(g,this.isActivatable);break;case q.End:u=Ci(g,this.isActivatable)}u&&p&&p.item!==u&&(p.item.tabIndex=-1)},this.onDeactivateItems=()=>{const d=this.items;for(const f of d)this.deactivateItem(f)},this.onRequestActivation=d=>{this.onDeactivateItems();const f=d.target;this.activateItem(f),f.focus()},this.onSlotchange=()=>{const d=this.items;let f=!1;for(const p of d)!(!p.disabled&&p.tabIndex>-1)||f?p.tabIndex=-1:(f=!0,p.tabIndex=0);if(f)return;const g=Vt(d,this.isActivatable);g&&(g.tabIndex=0)};const{isItem:e,getPossibleItems:r,isRtl:o,deactivateItem:a,activateItem:n,isNavigableKey:s,isActivatable:c,wrapNavigation:l}=t;this.isItem=e,this.getPossibleItems=r,this.isRtl=o,this.deactivateItem=a,this.activateItem=n,this.isNavigableKey=s,this.isActivatable=c,this.wrapNavigation=l??(()=>!0)}get items(){const t=this.getPossibleItems(),e=[];for(const r of t){if(this.isItem(r)){e.push(r);continue}const o=r.item;o&&this.isItem(o)&&e.push(o)}return e}activateNextItem(){const t=this.items,e=Ve(t,this.isActivatable);return e&&(e.item.tabIndex=-1),Ii(t,e,this.isActivatable,this.wrapNavigation())}activatePreviousItem(){const t=this.items,e=Ve(t,this.isActivatable);return e&&(e.item.tabIndex=-1),$i(t,e,this.isActivatable,this.wrapNavigation())}}const io=new Set(Object.values(q));class Oi extends M{get items(){return this.listController.items}constructor(){super(),this.listController=new Li({isItem:t=>t.hasAttribute("md-list-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>getComputedStyle(this).direction==="rtl",deactivateItem:t=>{t.tabIndex=-1},activateItem:t=>{t.tabIndex=0},isNavigableKey:t=>io.has(t),isActivatable:t=>!t.disabled&&t.type!=="text"}),this.internals=this.attachInternals(),this.internals.role="list",this.addEventListener("keydown",this.listController.handleKeydown)}render(){return b`
      <slot
        @deactivate-items=${this.listController.onDeactivateItems}
        @request-activation=${this.listController.onRequestActivation}
        @slotchange=${this.listController.onSlotchange}>
      </slot>
    `}activateNextItem(){return this.listController.activateNextItem()}activatePreviousItem(){return this.listController.activatePreviousItem()}}h([Ce({flatten:!0})],Oi.prototype,"slotItems",void 0);const ro=N`:host{background:var(--md-list-container-color, var(--md-sys-color-surface, #fef7ff));color:unset;display:flex;flex-direction:column;outline:none;padding:8px 0;position:relative}
`;class Di extends Oi{}Di.styles=[ro],customElements.define("ew-list",Di);class Wt extends M{constructor(){super(...arguments),this.multiline=!1}render(){return b`
      <slot name="container"></slot>
      <slot class="non-text" name="start"></slot>
      <div class="text">
        <slot name="overline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          class="default-slot"
          @slotchange=${this.handleTextSlotChange}></slot>
        <slot name="headline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          name="supporting-text"
          @slotchange=${this.handleTextSlotChange}></slot>
      </div>
      <slot class="non-text" name="trailing-supporting-text"></slot>
      <slot class="non-text" name="end"></slot>
    `}handleTextSlotChange(){let t=!1,e=0;for(const r of this.textSlots)if(oo(r)&&(e+=1),e>1){t=!0;break}this.multiline=t}}function oo(i){for(const e of i.assignedNodes({flatten:!0})){var t;const r=e.nodeType===Node.ELEMENT_NODE,o=e.nodeType===Node.TEXT_NODE&&((t=e.textContent)===null||t===void 0?void 0:t.match(/\S/));if(r||o)return!0}return!1}h([v({type:Boolean,reflect:!0})],Wt.prototype,"multiline",void 0),h([function(i){return(t,e)=>Jr(t,e,{get(){return(this.renderRoot??Ai??(Ai=document.createDocumentFragment())).querySelectorAll(i)}})}(".text slot")],Wt.prototype,"textSlots",void 0);const ao=N`:host{color:var(--md-sys-color-on-surface, #1d1b20);font-family:var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-large-size, 1rem);font-weight:var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-large-line-height, 1.5rem);align-items:center;box-sizing:border-box;display:flex;gap:16px;min-height:56px;overflow:hidden;padding:12px 16px;position:relative;text-overflow:ellipsis}:host([multiline]){min-height:72px}[name=overline]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-medium-size, 0.875rem);font-weight:var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-medium-line-height, 1.25rem)}[name=trailing-supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=container]::slotted(*){inset:0;position:absolute}.default-slot{display:inline}.default-slot,.text ::slotted(*){overflow:hidden;text-overflow:ellipsis}.text{display:flex;flex:1;flex-direction:column;overflow:hidden}
`;let Zt=class extends Wt{};Zt.styles=[ao],Zt=h([Ht("md-item")],Zt);const zi=Symbol.for(""),so=i=>{if((i==null?void 0:i.r)===zi)return i==null?void 0:i._$litStatic$},_e=(i,...t)=>({_$litStatic$:t.reduce((e,r,o)=>e+(a=>{if(a._$litStatic$!==void 0)return a._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${a}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+i[o+1],i[0]),r:zi}),Pi=new Map,ft=(i=>(t,...e)=>{const r=e.length;let o,a;const n=[],s=[];let c,l=0,d=!1;for(;l<r;){for(c=t[l];l<r&&(a=e[l],(o=so(a))!==void 0);)c+=o+t[++l],d=!0;l!==r&&s.push(a),n.push(c),l++}if(l===r&&n.push(t[r]),d){const f=n.join("$$lit$$");(t=Pi.get(f))===void 0&&(n.raw=n,Pi.set(f,t=n)),e=s}return i(t,...e)})(b),no=ze(M);class be extends no{constructor(){super(...arguments),this.disabled=!1,this.type="text",this.isListItem=!0,this.href="",this.target=""}get isDisabled(){return this.disabled&&this.type!=="link"}willUpdate(t){this.href&&(this.type="link"),super.willUpdate(t)}render(){return this.renderListItem(b`
      <md-item>
        <div slot="container">
          ${this.renderRipple()} ${this.renderFocusRing()}
        </div>
        <slot name="start" slot="start"></slot>
        <slot name="end" slot="end"></slot>
        ${this.renderBody()}
      </md-item>
    `)}renderListItem(t){const e=this.type==="link";let r;switch(this.type){case"link":r=_e`a`;break;case"button":r=_e`button`;break;default:r=_e`li`}const o=this.type!=="text",a=e&&this.target?this.target:S;return ft`
      <${r}
        id="item"
        tabindex="${this.isDisabled||!o?-1:0}"
        ?disabled=${this.isDisabled}
        role="listitem"
        aria-selected=${this.ariaSelected||S}
        aria-checked=${this.ariaChecked||S}
        aria-expanded=${this.ariaExpanded||S}
        aria-haspopup=${this.ariaHasPopup||S}
        class="list-item ${re(this.getRenderClasses())}"
        href=${this.href||S}
        target=${a}
        @focus=${this.onFocus}
      >${t}</${r}>
    `}renderRipple(){return this.type==="text"?S:b` <md-ripple
      part="ripple"
      for="item"
      ?disabled=${this.isDisabled}></md-ripple>`}renderFocusRing(){return this.type==="text"?S:b` <md-focus-ring
      @visibility-changed=${this.onFocusRingVisibilityChanged}
      part="focus-ring"
      for="item"
      inward></md-focus-ring>`}onFocusRingVisibilityChanged(t){}getRenderClasses(){return{disabled:this.isDisabled}}renderBody(){return b`
      <slot></slot>
      <slot name="overline" slot="overline"></slot>
      <slot name="headline" slot="headline"></slot>
      <slot name="supporting-text" slot="supporting-text"></slot>
      <slot
        name="trailing-supporting-text"
        slot="trailing-supporting-text"></slot>
    `}onFocus(){this.tabIndex===-1&&this.dispatchEvent(new Event("request-activation",{bubbles:!0,composed:!0}))}focus(){var t;(t=this.listItemRoot)===null||t===void 0||t.focus()}click(){this.listItemRoot?this.listItemRoot.click():super.click()}}be.shadowRootOptions={...M.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean,reflect:!0})],be.prototype,"disabled",void 0),h([v({reflect:!0})],be.prototype,"type",void 0),h([v({type:Boolean,attribute:"md-list-item",reflect:!0})],be.prototype,"isListItem",void 0),h([v()],be.prototype,"href",void 0),h([v()],be.prototype,"target",void 0),h([X(".list-item")],be.prototype,"listItemRoot",void 0);const lo=N`:host{display:flex;-webkit-tap-highlight-color:rgba(0,0,0,0);--md-ripple-hover-color: var(--md-list-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-list-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-list-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-list-item-pressed-state-layer-opacity, 0.12)}:host(:is([type=button]:not([disabled]),[type=link])){cursor:pointer}md-focus-ring{z-index:1;--md-focus-ring-shape: 8px}a,button,li{background:none;border:none;cursor:inherit;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%}.list-item.interactive{cursor:pointer}.list-item.disabled{opacity:var(--md-list-item-disabled-opacity, 0.3);pointer-events:none}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;height:100%;color:var(--md-list-item-label-text-color, var(--md-sys-color-on-surface, #1d1b20));font-family:var(--md-list-item-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));line-height:var(--md-list-item-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));font-weight:var(--md-list-item-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));min-height:var(--md-list-item-one-line-container-height, 56px);padding-top:var(--md-list-item-top-space, 12px);padding-bottom:var(--md-list-item-bottom-space, 12px);padding-inline-start:var(--md-list-item-leading-space, 16px);padding-inline-end:var(--md-list-item-trailing-space, 16px)}md-item[multiline]{min-height:var(--md-list-item-two-line-container-height, 72px)}[slot=supporting-text]{color:var(--md-list-item-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-list-item-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-list-item-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-list-item-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)))}[slot=trailing-supporting-text]{color:var(--md-list-item-trailing-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-list-item-trailing-supporting-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-trailing-supporting-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));line-height:var(--md-list-item-trailing-supporting-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));font-weight:var(--md-list-item-trailing-supporting-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-list-item-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}[slot=end]{color:var(--md-list-item-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}@media(forced-colors: active){.disabled slot{color:GrayText}.list-item.disabled{color:GrayText;opacity:1}}
`;class Bi extends be{}Bi.styles=[lo],customElements.define("ew-list-item",Bi);class Fi extends xs{}Fi.styles=[_s],customElements.define("ew-divider",Fi);const We=Symbol("createValidator"),Ze=Symbol("getValidityAnchor"),Gt=Symbol("privateValidator"),ce=Symbol("privateSyncValidity"),mt=Symbol("privateCustomValidationMessage");function Kt(i){var t;class e extends i{constructor(){super(...arguments),this[t]=""}get validity(){return this[ce](),this[te].validity}get validationMessage(){return this[ce](),this[te].validationMessage}get willValidate(){return this[ce](),this[te].willValidate}checkValidity(){return this[ce](),this[te].checkValidity()}reportValidity(){return this[ce](),this[te].reportValidity()}setCustomValidity(o){this[mt]=o,this[ce]()}requestUpdate(o,a,n){super.requestUpdate(o,a,n),this[ce]()}firstUpdated(o){super.firstUpdated(o),this[ce]()}[(t=mt,ce)](){this[Gt]||(this[Gt]=this[We]());const{validity:o,validationMessage:a}=this[Gt].getValidity(),n=!!this[mt],s=this[mt]||a;this[te].setValidity({...o,customError:n},s,this[Ze]()??void 0)}[We](){throw new Error("Implement [createValidator]")}[Ze](){throw new Error("Implement [getValidityAnchor]")}}return e}const Be=Symbol("getFormValue"),jt=Symbol("getFormState");function Yt(i){class t extends i{get form(){return this[te].form}get labels(){return this[te].labels}get name(){return this.getAttribute("name")??""}set name(r){this.setAttribute("name",r)}get disabled(){return this.hasAttribute("disabled")}set disabled(r){this.toggleAttribute("disabled",r)}attributeChangedCallback(r,o,a){if(r!=="name"&&r!=="disabled")super.attributeChangedCallback(r,o,a);else{const n=r==="disabled"?o!==null:o;this.requestUpdate(r,n)}}requestUpdate(r,o,a){super.requestUpdate(r,o,a),this[te].setFormValue(this[Be](),this[jt]())}[Be](){throw new Error("Implement [getFormValue]")}[jt](){return this[Be]()}formDisabledCallback(r){this.disabled=r}}return t.formAssociated=!0,h([v({noAccessor:!0})],t.prototype,"name",null),h([v({type:Boolean,noAccessor:!0})],t.prototype,"disabled",null),t}class Xt{constructor(t){this.getCurrentState=t,this.currentValidity={validity:{},validationMessage:""}}getValidity(){const t=this.getCurrentState();if(!(!this.prevState||!this.equals(this.prevState,t)))return this.currentValidity;const{validity:e,validationMessage:r}=this.computeValidity(t);return this.prevState=this.copy(t),this.currentValidity={validationMessage:r,validity:{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing}},this.currentValidity}}class co extends Xt{computeValidity(t){return this.checkboxControl||(this.checkboxControl=document.createElement("input"),this.checkboxControl.type="checkbox"),this.checkboxControl.checked=t.checked,this.checkboxControl.required=t.required,{validity:this.checkboxControl.validity,validationMessage:this.checkboxControl.validationMessage}}equals(t,e){return t.checked===e.checked&&t.required===e.required}copy({checked:t,required:e}){return{checked:t,required:e}}}const ho=ze(Kt(Yt(qt(M))));class oe extends ho{constructor(){super(),this.checked=!1,this.indeterminate=!1,this.required=!1,this.value="on",this.prevChecked=!1,this.prevDisabled=!1,this.prevIndeterminate=!1,this.addEventListener("click",t=>{ws(t)&&this.input&&(this.focus(),Es(this.input))})}update(t){(t.has("checked")||t.has("disabled")||t.has("indeterminate"))&&(this.prevChecked=t.get("checked")??this.checked,this.prevDisabled=t.get("disabled")??this.disabled,this.prevIndeterminate=t.get("indeterminate")??this.indeterminate),super.update(t)}render(){const t=!this.prevChecked&&!this.prevIndeterminate,e=this.prevChecked&&!this.prevIndeterminate,r=this.prevIndeterminate,o=this.checked&&!this.indeterminate,a=this.indeterminate,n=re({disabled:this.disabled,selected:o||a,unselected:!o&&!a,checked:o,indeterminate:a,"prev-unselected":t,"prev-checked":e,"prev-indeterminate":r,"prev-disabled":this.prevDisabled}),{ariaLabel:s,ariaInvalid:c}=this;return b`
      <div class="container ${n}">
        <input
          type="checkbox"
          id="input"
          aria-checked=${a?"mixed":S}
          aria-label=${s||S}
          aria-invalid=${c||S}
          ?disabled=${this.disabled}
          ?required=${this.required}
          .indeterminate=${this.indeterminate}
          .checked=${this.checked}
          @input=${this.handleInput}
          @change=${this.handleChange} />

        <div class="outline"></div>
        <div class="background"></div>
        <md-focus-ring part="focus-ring" for="input"></md-focus-ring>
        <md-ripple for="input" ?disabled=${this.disabled}></md-ripple>
        <svg class="icon" viewBox="0 0 18 18" aria-hidden="true">
          <rect class="mark short" />
          <rect class="mark long" />
        </svg>
      </div>
    `}handleInput(t){const e=t.target;this.checked=e.checked,this.indeterminate=e.indeterminate}handleChange(t){Si(this,t)}[Be](){return!this.checked||this.indeterminate?null:this.value}[jt](){return String(this.checked)}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(t){this.checked=t==="true"}[We](){return new co(()=>this)}[Ze](){return this.input}}oe.shadowRootOptions={...M.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean})],oe.prototype,"checked",void 0),h([v({type:Boolean})],oe.prototype,"indeterminate",void 0),h([v({type:Boolean})],oe.prototype,"required",void 0),h([v()],oe.prototype,"value",void 0),h([O()],oe.prototype,"prevChecked",void 0),h([O()],oe.prototype,"prevDisabled",void 0),h([O()],oe.prototype,"prevIndeterminate",void 0),h([X("input")],oe.prototype,"input",void 0);const po=N`:host{border-start-start-radius:var(--md-checkbox-container-shape-start-start, var(--md-checkbox-container-shape, 2px));border-start-end-radius:var(--md-checkbox-container-shape-start-end, var(--md-checkbox-container-shape, 2px));border-end-end-radius:var(--md-checkbox-container-shape-end-end, var(--md-checkbox-container-shape, 2px));border-end-start-radius:var(--md-checkbox-container-shape-end-start, var(--md-checkbox-container-shape, 2px));display:inline-flex;height:var(--md-checkbox-container-size, 18px);position:relative;vertical-align:top;width:var(--md-checkbox-container-size, 18px);-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--md-checkbox-container-size, 18px))/2)}md-focus-ring{height:44px;inset:unset;width:44px}input{appearance:none;height:48px;margin:0;opacity:0;outline:none;position:absolute;width:48px;z-index:1;cursor:inherit}:host([touch-target=none]) input{height:100%;width:100%}.container{border-radius:inherit;display:flex;height:100%;place-content:center;place-items:center;position:relative;width:100%}.outline,.background,.icon{inset:0;position:absolute}.outline,.background{border-radius:inherit}.outline{border-color:var(--md-checkbox-outline-color, var(--md-sys-color-on-surface-variant, #49454f));border-style:solid;border-width:var(--md-checkbox-outline-width, 2px);box-sizing:border-box}.background{background-color:var(--md-checkbox-selected-container-color, var(--md-sys-color-primary, #6750a4))}.background,.icon{opacity:0;transition-duration:150ms,50ms;transition-property:transform,opacity;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15),linear;transform:scale(0.6)}:where(.selected) :is(.background,.icon){opacity:1;transition-duration:350ms,50ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1),linear;transform:scale(1)}md-ripple{border-radius:var(--md-checkbox-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));height:var(--md-checkbox-state-layer-size, 40px);inset:unset;width:var(--md-checkbox-state-layer-size, 40px);--md-ripple-hover-color: var(--md-checkbox-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-checkbox-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-opacity: var(--md-checkbox-pressed-state-layer-opacity, 0.12)}.selected md-ripple{--md-ripple-hover-color: var(--md-checkbox-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity: var(--md-checkbox-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-checkbox-selected-pressed-state-layer-opacity, 0.12)}.icon{fill:var(--md-checkbox-selected-icon-color, var(--md-sys-color-on-primary, #fff));height:var(--md-checkbox-icon-size, 18px);width:var(--md-checkbox-icon-size, 18px)}.mark.short{height:2px;transition-property:transform,height;width:2px}.mark.long{height:2px;transition-property:transform,width;width:10px}.mark{animation-duration:150ms;animation-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15);transition-duration:150ms;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15)}.selected .mark{animation-duration:350ms;animation-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1);transition-duration:350ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1)}.checked .mark,.prev-checked.unselected .mark{transform:scaleY(-1) translate(7px, -14px) rotate(45deg)}.checked .mark.short,.prev-checked.unselected .mark.short{height:5.6568542495px}.checked .mark.long,.prev-checked.unselected .mark.long{width:11.313708499px}.indeterminate .mark,.prev-indeterminate.unselected .mark{transform:scaleY(-1) translate(4px, -10px) rotate(0deg)}.prev-unselected .mark{transition-property:none}.prev-unselected.checked .mark.long{animation-name:prev-unselected-to-checked}@keyframes prev-unselected-to-checked{from{width:0}}:where(:hover) .outline{border-color:var(--md-checkbox-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-hover-outline-width, 2px)}:where(:hover) .background{background:var(--md-checkbox-selected-hover-container-color, var(--md-sys-color-primary, #6750a4))}:where(:hover) .icon{fill:var(--md-checkbox-selected-hover-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:focus-within) .outline{border-color:var(--md-checkbox-focus-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-focus-outline-width, 2px)}:where(:focus-within) .background{background:var(--md-checkbox-selected-focus-container-color, var(--md-sys-color-primary, #6750a4))}:where(:focus-within) .icon{fill:var(--md-checkbox-selected-focus-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:active) .outline{border-color:var(--md-checkbox-pressed-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-pressed-outline-width, 2px)}:where(:active) .background{background:var(--md-checkbox-selected-pressed-container-color, var(--md-sys-color-primary, #6750a4))}:where(:active) .icon{fill:var(--md-checkbox-selected-pressed-icon-color, var(--md-sys-color-on-primary, #fff))}:where(.disabled,.prev-disabled) :is(.background,.icon,.mark){animation-duration:0s;transition-duration:0s}:where(.disabled) .outline{border-color:var(--md-checkbox-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-disabled-outline-width, 2px);opacity:var(--md-checkbox-disabled-container-opacity, 0.38)}:where(.selected.disabled) .outline{visibility:hidden}:where(.selected.disabled) .background{background:var(--md-checkbox-selected-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-checkbox-selected-disabled-container-opacity, 0.38)}:where(.disabled) .icon{fill:var(--md-checkbox-selected-disabled-icon-color, var(--md-sys-color-surface, #fef7ff))}@media(forced-colors: active){.background{background-color:CanvasText}.selected.disabled .background{background-color:GrayText;opacity:1}.outline{border-color:CanvasText}.disabled .outline{border-color:GrayText;opacity:1}.icon{fill:Canvas}}
`;class Ui extends oe{}Ui.styles=[po],customElements.define("ew-checkbox",Ui);class uo{constructor(t){this.targetElement=t,this.state={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null,carriageReturn:!1,lines:[],secret:!1}}logs(){return this.targetElement.innerText}processLine(t){const e=/(?:\033|\\033)(?:\[(.*?)[@-~]|\].*?(?:\007|\033\\))/g;let r=0;const o=document.createElement("span");o.classList.add("line");const a=n=>{if(n==="")return;const s=document.createElement("span");if(this.state.bold&&s.classList.add("log-bold"),this.state.italic&&s.classList.add("log-italic"),this.state.underline&&s.classList.add("log-underline"),this.state.strikethrough&&s.classList.add("log-strikethrough"),this.state.secret&&s.classList.add("log-secret"),this.state.foregroundColor!==null&&s.classList.add(`log-fg-${this.state.foregroundColor}`),this.state.backgroundColor!==null&&s.classList.add(`log-bg-${this.state.backgroundColor}`),s.appendChild(document.createTextNode(n)),o.appendChild(s),this.state.secret){const c=document.createElement("span");c.classList.add("log-secret-redacted"),c.appendChild(document.createTextNode("[redacted]")),o.appendChild(c)}};for(;;){const n=e.exec(t);if(n===null)break;const s=n.index;if(a(t.substring(r,s)),r=s+n[0].length,n[1]!==void 0)for(const c of n[1].split(";"))switch(parseInt(c)){case 0:this.state.bold=!1,this.state.italic=!1,this.state.underline=!1,this.state.strikethrough=!1,this.state.foregroundColor=null,this.state.backgroundColor=null,this.state.secret=!1;break;case 1:this.state.bold=!0;break;case 3:this.state.italic=!0;break;case 4:this.state.underline=!0;break;case 5:this.state.secret=!0;break;case 6:this.state.secret=!1;break;case 9:this.state.strikethrough=!0;break;case 22:this.state.bold=!1;break;case 23:this.state.italic=!1;break;case 24:this.state.underline=!1;break;case 29:this.state.strikethrough=!1;break;case 30:this.state.foregroundColor="black";break;case 31:this.state.foregroundColor="red";break;case 32:this.state.foregroundColor="green";break;case 33:this.state.foregroundColor="yellow";break;case 34:this.state.foregroundColor="blue";break;case 35:this.state.foregroundColor="magenta";break;case 36:this.state.foregroundColor="cyan";break;case 37:this.state.foregroundColor="white";break;case 39:this.state.foregroundColor=null;break;case 41:this.state.backgroundColor="red";break;case 42:this.state.backgroundColor="green";break;case 43:this.state.backgroundColor="yellow";break;case 44:this.state.backgroundColor="blue";break;case 45:this.state.backgroundColor="magenta";break;case 46:this.state.backgroundColor="cyan";break;case 47:this.state.backgroundColor="white";break;case 40:case 49:this.state.backgroundColor=null}}return a(t.substring(r)),o}processLines(){const t=this.targetElement.scrollTop>this.targetElement.scrollHeight-this.targetElement.offsetHeight-50,e=this.state.carriageReturn,r=document.createDocumentFragment();if(this.state.lines.length!=0){for(const o of this.state.lines)this.state.carriageReturn&&o!==`
`&&r.childElementCount&&r.removeChild(r.lastChild),r.appendChild(this.processLine(o)),this.state.carriageReturn=o.includes("\r");e&&this.state.lines[0]!==`
`?this.targetElement.replaceChild(r,this.targetElement.lastChild):this.targetElement.appendChild(r),this.state.lines=[],t&&(this.targetElement.scrollTop=this.targetElement.scrollHeight)}}addLine(t){this.state.lines.length==0&&setTimeout(()=>this.processLines(),0),this.state.lines.push(t)}}const ye=i=>new Promise(t=>setTimeout(t,i));class fo{constructor(){this.chunks=""}transform(t,e){this.chunks+=t;const r=this.chunks.split(/\r?\n/);this.chunks=r.pop(),r.forEach(o=>e.enqueue(o+`\r
`))}flush(t){t.enqueue(this.chunks)}}class mo{transform(t,e){const r=new Date,o=r.getHours().toString().padStart(2,"0"),a=r.getMinutes().toString().padStart(2,"0"),n=r.getSeconds().toString().padStart(2,"0");e.enqueue(`[${o}:${a}:${n}]${t}`)}}class vo extends HTMLElement{constructor(){super(...arguments),this.allowInput=!0}logs(){var t;return((t=this._console)===null||t===void 0?void 0:t.logs())||""}connectedCallback(){if(this._console)return;if(this.attachShadow({mode:"open"}).innerHTML=`
      <style>
        :host, input {
          background-color: #1c1c1c;
          color: #ddd;
          font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier,
            monospace;
          line-height: 1.45;
          display: flex;
          flex-direction: column;
        }
        form {
          display: flex;
          align-items: center;
          padding: 0 8px 0 16px;
        }
        input {
          flex: 1;
          padding: 4px;
          margin: 0 8px;
          border: 0;
          outline: none;
        }
        
  .log {
    flex: 1;
    background-color: #1c1c1c;
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier,
      monospace;
    font-size: 12px;
    padding: 16px;
    overflow: auto;
    line-height: 1.45;
    border-radius: 3px;
    white-space: pre-wrap;
    overflow-wrap: break-word;
    color: #ddd;
  }

  .log-bold {
    font-weight: bold;
  }
  .log-italic {
    font-style: italic;
  }
  .log-underline {
    text-decoration: underline;
  }
  .log-strikethrough {
    text-decoration: line-through;
  }
  .log-underline.log-strikethrough {
    text-decoration: underline line-through;
  }
  .log-secret {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  .log-secret-redacted {
    opacity: 0;
    width: 1px;
    font-size: 1px;
  }
  .log-fg-black {
    color: rgb(128, 128, 128);
  }
  .log-fg-red {
    color: rgb(255, 0, 0);
  }
  .log-fg-green {
    color: rgb(0, 255, 0);
  }
  .log-fg-yellow {
    color: rgb(255, 255, 0);
  }
  .log-fg-blue {
    color: rgb(0, 0, 255);
  }
  .log-fg-magenta {
    color: rgb(255, 0, 255);
  }
  .log-fg-cyan {
    color: rgb(0, 255, 255);
  }
  .log-fg-white {
    color: rgb(187, 187, 187);
  }
  .log-bg-black {
    background-color: rgb(0, 0, 0);
  }
  .log-bg-red {
    background-color: rgb(255, 0, 0);
  }
  .log-bg-green {
    background-color: rgb(0, 255, 0);
  }
  .log-bg-yellow {
    background-color: rgb(255, 255, 0);
  }
  .log-bg-blue {
    background-color: rgb(0, 0, 255);
  }
  .log-bg-magenta {
    background-color: rgb(255, 0, 255);
  }
  .log-bg-cyan {
    background-color: rgb(0, 255, 255);
  }
  .log-bg-white {
    background-color: rgb(255, 255, 255);
  }

      </style>
      <div class="log"></div>
      ${this.allowInput?`<form>
                >
                <input autofocus>
              </form>
            `:""}
    `,this._console=new uo(this.shadowRoot.querySelector("div")),this.allowInput){const r=this.shadowRoot.querySelector("input");this.addEventListener("click",()=>{var o;((o=getSelection())===null||o===void 0?void 0:o.toString())===""&&r.focus()}),r.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),o.stopPropagation(),this._sendCommand())})}const t=new AbortController,e=this._connect(t.signal);this._cancelConnection=()=>(t.abort(),e)}async _connect(t){this.logger.debug("Starting console read loop");try{await this.port.readable.pipeThrough(new TextDecoderStream,{signal:t}).pipeThrough(new TransformStream(new fo)).pipeThrough(new TransformStream(new mo)).pipeTo(new WritableStream({write:e=>{this._console.addLine(e.replace("\r",""))}})),t.aborted||(this._console.addLine(""),this._console.addLine(""),this._console.addLine("Terminal disconnected"))}catch(e){this._console.addLine(""),this._console.addLine(""),this._console.addLine(`Terminal disconnected: ${e}`)}finally{await ye(100),this.logger.debug("Finished console read loop")}}async _sendCommand(){const t=this.shadowRoot.querySelector("input"),e=t.value,r=new TextEncoder,o=this.port.writable.getWriter();await o.write(r.encode(e+`\r
`)),this._console.addLine(`> ${e}\r
`),t.value="",t.focus();try{o.releaseLock()}catch(a){console.error("Ignoring release lock error",a)}}async disconnect(){this._cancelConnection&&(await this._cancelConnection(),this._cancelConnection=void 0)}async reset(){this.logger.debug("Triggering reset"),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!0}),await ye(250),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!1}),await ye(250),await new Promise(t=>setTimeout(t,1e3))}}function Mi(i,t=!0){return t&&getComputedStyle(i).getPropertyValue("direction").trim()==="rtl"}customElements.define("ewt-console",vo);const go=ze(qt(M));class W extends go{get name(){return this.getAttribute("name")??""}set name(t){this.setAttribute("name",t)}get form(){return this[te].form}get labels(){return this[te].labels}constructor(){super(),this.disabled=!1,this.softDisabled=!1,this.flipIconInRtl=!1,this.href="",this.download="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=Mi(this,this.flipIconInRtl),this.addEventListener("click",this.handleClick.bind(this))}willUpdate(){this.href&&(this.disabled=!1,this.softDisabled=!1)}render(){const t=this.href?_e`div`:_e`button`,{ariaLabel:e,ariaHasPopup:r,ariaExpanded:o}=this,a=e&&this.ariaLabelSelected,n=this.toggle?this.selected:S;let s=S;return this.href||(s=a&&this.selected?this.ariaLabelSelected:e),ft`<${t}
        class="icon-button ${re(this.getRenderClasses())}"
        id="button"
        aria-label="${s||S}"
        aria-haspopup="${!this.href&&r||S}"
        aria-expanded="${!this.href&&o||S}"
        aria-pressed="${n}"
        aria-disabled=${!this.href&&this.softDisabled||S}
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClickOnChild}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?S:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():S}
        ${this.href?this.renderLink():this.renderTouchTarget()}
  </${t}>`}renderLink(){const{ariaLabel:t}=this;return b`
      <a
        class="link"
        id="link"
        href="${this.href}"
        download="${this.download||S}"
        target="${this.target||S}"
        aria-label="${t||S}">
        ${this.renderTouchTarget()}
      </a>
    `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return b`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return b`<span class="icon icon--selected"
      ><slot name="selected"><slot></slot></slot
    ></span>`}renderTouchTarget(){return b`<span class="touch"></span>`}renderFocusRing(){return b`<md-focus-ring
      part="focus-ring"
      for=${this.href?"link":"button"}></md-focus-ring>`}renderRipple(){const t=!this.href&&(this.disabled||this.softDisabled);return b`<md-ripple
      for=${this.href?"link":S}
      ?disabled="${t}"></md-ripple>`}connectedCallback(){this.flipIcon=Mi(this,this.flipIconInRtl),super.connectedCallback()}handleClick(t){if(!this.href&&this.softDisabled)return t.stopImmediatePropagation(),void t.preventDefault()}async handleClickOnChild(t){await 0,!this.toggle||this.disabled||this.softDisabled||t.defaultPrevented||(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}bs(W),W.formAssociated=!0,W.shadowRootOptions={mode:"open",delegatesFocus:!0},h([v({type:Boolean,reflect:!0})],W.prototype,"disabled",void 0),h([v({type:Boolean,attribute:"soft-disabled",reflect:!0})],W.prototype,"softDisabled",void 0),h([v({type:Boolean,attribute:"flip-icon-in-rtl"})],W.prototype,"flipIconInRtl",void 0),h([v()],W.prototype,"href",void 0),h([v()],W.prototype,"download",void 0),h([v()],W.prototype,"target",void 0),h([v({attribute:"aria-label-selected"})],W.prototype,"ariaLabelSelected",void 0),h([v({type:Boolean})],W.prototype,"toggle",void 0),h([v({type:Boolean,reflect:!0})],W.prototype,"selected",void 0),h([v()],W.prototype,"type",void 0),h([v({reflect:!0})],W.prototype,"value",void 0),h([O()],W.prototype,"flipIcon",void 0);const _o=N`:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);height:var(--_container-height);width:var(--_container-width);justify-content:center}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) max(0px,(48px - var(--_container-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host(:is([disabled],[soft-disabled])){pointer-events:none}.icon-button{place-items:center;background:none;border:none;box-sizing:border-box;cursor:pointer;display:flex;place-content:center;outline:none;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{display:grid;height:100%;outline:none;place-items:center;position:absolute;width:100%}.touch{position:absolute;height:max(48px,100%);width:max(48px,100%)}:host([touch-target=none]) .touch{display:none}@media(forced-colors: active){:host(:is([disabled],[soft-disabled])){--_disabled-icon-color: GrayText;--_disabled-icon-opacity: 1}}
`,bo=N`:host{--_disabled-icon-color: var(--md-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-icon-button-disabled-icon-opacity, 0.38);--_icon-size: var(--md-icon-button-icon-size, 24px);--_selected-focus-icon-color: var(--md-icon-button-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-icon-button-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-icon-button-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-icon-button-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-icon-button-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-icon-button-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-opacity: var(--md-icon-button-selected-pressed-state-layer-opacity, 0.12);--_state-layer-height: var(--md-icon-button-state-layer-height, 40px);--_state-layer-shape: var(--md-icon-button-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));--_state-layer-width: var(--md-icon-button-state-layer-width, 40px);--_focus-icon-color: var(--md-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color: var(--md-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-opacity: var(--md-icon-button-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-icon-button-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-color: var(--md-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-opacity: var(--md-icon-button-pressed-state-layer-opacity, 0.12);--_container-shape-start-start: 0;--_container-shape-start-end: 0;--_container-shape-end-end: 0;--_container-shape-end-start: 0;--_container-height: 0;--_container-width: 0;height:var(--_state-layer-height);width:var(--_state-layer-width)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_state-layer-height))/2) max(0px,(48px - var(--_state-layer-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_state-layer-shape);--md-focus-ring-shape-start-end: var(--_state-layer-shape);--md-focus-ring-shape-end-end: var(--_state-layer-shape);--md-focus-ring-shape-end-start: var(--_state-layer-shape)}.standard{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}.standard:hover{color:var(--_hover-icon-color)}.standard:focus{color:var(--_focus-icon-color)}.standard:active{color:var(--_pressed-icon-color)}.standard:is(:disabled,[aria-disabled=true]){color:var(--_disabled-icon-color)}md-ripple{border-radius:var(--_state-layer-shape)}.standard:is(:disabled,[aria-disabled=true]){opacity:var(--_disabled-icon-opacity)}.selected{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}.selected:not(:disabled,[aria-disabled=true]){color:var(--_selected-icon-color)}.selected:not(:disabled,[aria-disabled=true]):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled,[aria-disabled=true]):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled,[aria-disabled=true]):active{color:var(--_selected-pressed-icon-color)}
`;class Ni extends W{}Ni.styles=[_o,bo],customElements.define("ew-icon-button",Ni);const yo=N`:host{--_active-indicator-color: var(--md-filled-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-text-field-active-indicator-height, 1px);--_caret-color: var(--md-filled-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_container-color: var(--md-filled-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_disabled-active-indicator-color: var(--md-filled-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-text-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-text-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-text-field-disabled-container-opacity, 0.04);--_disabled-input-text-color: var(--md-filled-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity: var(--md-filled-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color: var(--md-filled-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity: var(--md-filled-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color: var(--md-filled-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity: var(--md-filled-text-field-disabled-trailing-icon-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-active-indicator-color: var(--md-filled-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-caret-color: var(--md-filled-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color: var(--md-filled-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color: var(--md-filled-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color: var(--md-filled-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color: var(--md-filled-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-input-text-color: var(--md-filled-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color: var(--md-filled-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-text-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color: var(--md-filled-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color: var(--md-filled-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color: var(--md-filled-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color: var(--md-filled-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color: var(--md-filled-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-text-field-focus-active-indicator-height, 3px);--_focus-input-text-color: var(--md-filled-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color: var(--md-filled-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color: var(--md-filled-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-text-field-hover-active-indicator-height, 1px);--_hover-input-text-color: var(--md-filled-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-text-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-icon-color: var(--md-filled-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-text-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color: var(--md-filled-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color: var(--md-filled-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font: var(--md-filled-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height: var(--md-filled-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color: var(--md-filled-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color: var(--md-filled-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size: var(--md-filled-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color: var(--md-filled-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight: var(--md-filled-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color: var(--md-filled-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color: var(--md-filled-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size: var(--md-filled-text-field-leading-icon-size, 24px);--_supporting-text-color: var(--md-filled-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height: var(--md-filled-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight: var(--md-filled-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color: var(--md-filled-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size: var(--md-filled-text-field-trailing-icon-size, 24px);--_container-shape-start-start: var(--md-filled-text-field-container-shape-start-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-filled-text-field-container-shape-start-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-filled-text-field-container-shape-end-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start: var(--md-filled-text-field-container-shape-end-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_icon-input-space: var(--md-filled-text-field-icon-input-space, 16px);--_leading-space: var(--md-filled-text-field-leading-space, 16px);--_trailing-space: var(--md-filled-text-field-trailing-space, 16px);--_top-space: var(--md-filled-text-field-top-space, 16px);--_bottom-space: var(--md-filled-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space: var(--md-filled-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space: var(--md-filled-text-field-input-text-suffix-leading-space, 2px);--_with-label-top-space: var(--md-filled-text-field-with-label-top-space, 8px);--_with-label-bottom-space: var(--md-filled-text-field-with-label-bottom-space, 8px);--_focus-caret-color: var(--md-filled-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--_with-leading-icon-leading-space: var(--md-filled-text-field-with-leading-icon-leading-space, 12px);--_with-trailing-icon-trailing-space: var(--md-filled-text-field-with-trailing-icon-trailing-space, 12px);--md-filled-field-active-indicator-color: var(--_active-indicator-color);--md-filled-field-active-indicator-height: var(--_active-indicator-height);--md-filled-field-bottom-space: var(--_bottom-space);--md-filled-field-container-color: var(--_container-color);--md-filled-field-container-shape-end-end: var(--_container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_container-shape-start-start);--md-filled-field-content-color: var(--_input-text-color);--md-filled-field-content-font: var(--_input-text-font);--md-filled-field-content-line-height: var(--_input-text-line-height);--md-filled-field-content-size: var(--_input-text-size);--md-filled-field-content-space: var(--_icon-input-space);--md-filled-field-content-weight: var(--_input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_error-active-indicator-color);--md-filled-field-error-content-color: var(--_error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_error-label-text-color);--md-filled-field-error-leading-content-color: var(--_error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_label-text-color);--md-filled-field-label-text-font: var(--_label-text-font);--md-filled-field-label-text-line-height: var(--_label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_label-text-populated-size);--md-filled-field-label-text-size: var(--_label-text-size);--md-filled-field-label-text-weight: var(--_label-text-weight);--md-filled-field-leading-content-color: var(--_leading-icon-color);--md-filled-field-leading-space: var(--_leading-space);--md-filled-field-supporting-text-color: var(--_supporting-text-color);--md-filled-field-supporting-text-font: var(--_supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_supporting-text-size);--md-filled-field-supporting-text-weight: var(--_supporting-text-weight);--md-filled-field-top-space: var(--_top-space);--md-filled-field-trailing-content-color: var(--_trailing-icon-color);--md-filled-field-trailing-space: var(--_trailing-space);--md-filled-field-with-label-bottom-space: var(--_with-label-bottom-space);--md-filled-field-with-label-top-space: var(--_with-label-top-space);--md-filled-field-with-leading-content-leading-space: var(--_with-leading-icon-leading-space);--md-filled-field-with-trailing-content-trailing-space: var(--_with-trailing-icon-trailing-space)}
`;class P extends M{constructor(){super(...arguments),this.disabled=!1,this.error=!1,this.focused=!1,this.label="",this.noAsterisk=!1,this.populated=!1,this.required=!1,this.resizable=!1,this.supportingText="",this.errorText="",this.count=-1,this.max=-1,this.hasStart=!1,this.hasEnd=!1,this.isAnimating=!1,this.refreshErrorAlert=!1,this.disableTransitions=!1}get counterText(){const t=this.count??-1,e=this.max??-1;return t<0||e<=0?"":`${t} / ${e}`}get supportingOrErrorText(){return this.error&&this.errorText?this.errorText:this.supportingText}reannounceError(){this.refreshErrorAlert=!0}update(t){t.has("disabled")&&t.get("disabled")!==void 0&&(this.disableTransitions=!0),this.disabled&&this.focused&&(t.set("focused",!0),this.focused=!1),this.animateLabelIfNeeded({wasFocused:t.get("focused"),wasPopulated:t.get("populated")}),super.update(t)}render(){var t,e,r,o;const a=this.renderLabel(!0),n=this.renderLabel(!1),s=(t=this.renderOutline)===null||t===void 0?void 0:t.call(this,a),c={disabled:this.disabled,"disable-transitions":this.disableTransitions,error:this.error&&!this.disabled,focused:this.focused,"with-start":this.hasStart,"with-end":this.hasEnd,populated:this.populated,resizable:this.resizable,required:this.required,"no-label":!this.label};return b`
      <div class="field ${re(c)}">
        <div class="container-overflow">
          ${(e=this.renderBackground)===null||e===void 0?void 0:e.call(this)}
          <slot name="container"></slot>
          ${(r=this.renderStateLayer)===null||r===void 0?void 0:r.call(this)} ${(o=this.renderIndicator)===null||o===void 0?void 0:o.call(this)} ${s}
          <div class="container">
            <div class="start">
              <slot name="start"></slot>
            </div>
            <div class="middle">
              <div class="label-wrapper">
                ${n} ${s?S:a}
              </div>
              <div class="content">
                <slot></slot>
              </div>
            </div>
            <div class="end">
              <slot name="end"></slot>
            </div>
          </div>
        </div>
        ${this.renderSupportingText()}
      </div>
    `}updated(t){(t.has("supportingText")||t.has("errorText")||t.has("count")||t.has("max"))&&this.updateSlottedAriaDescribedBy(),this.refreshErrorAlert&&requestAnimationFrame(()=>{this.refreshErrorAlert=!1}),this.disableTransitions&&requestAnimationFrame(()=>{this.disableTransitions=!1})}renderSupportingText(){const{supportingOrErrorText:t,counterText:e}=this;if(!t&&!e)return S;const r=b`<span>${t}</span>`,o=e?b`<span class="counter">${e}</span>`:S,a=this.error&&this.errorText&&!this.refreshErrorAlert;return b`
      <div class="supporting-text" role=${a?"alert":S}>${r}${o}</div>
      <slot
        name="aria-describedby"
        @slotchange=${this.updateSlottedAriaDescribedBy}></slot>
    `}updateSlottedAriaDescribedBy(){for(const t of this.slottedAriaDescribedBy)Qr(b`${this.supportingOrErrorText} ${this.counterText}`,t),t.setAttribute("hidden","")}renderLabel(t){if(!this.label)return S;let e;e=t?this.focused||this.populated||this.isAnimating:!this.focused&&!this.populated&&!this.isAnimating;const r={hidden:!e,floating:t,resting:!t},o=`${this.label}${this.required&&!this.noAsterisk?"*":""}`;return b`
      <span class="label ${re(r)}" aria-hidden=${!e}
        >${o}</span
      >
    `}animateLabelIfNeeded({wasFocused:t,wasPopulated:e}){var r,o,a;this.label&&(t??(t=this.focused),e??(e=this.populated),(t||e)!==(this.focused||this.populated)&&(this.isAnimating=!0,(r=this.labelAnimation)===null||r===void 0||r.cancel(),this.labelAnimation=(o=this.floatingLabelEl)===null||o===void 0?void 0:o.animate(this.getLabelKeyframes(),{duration:150,easing:pt.STANDARD}),(a=this.labelAnimation)===null||a===void 0||a.addEventListener("finish",()=>{this.isAnimating=!1})))}getLabelKeyframes(){const{floatingLabelEl:t,restingLabelEl:e}=this;if(!t||!e)return[];const{x:r,y:o,height:a}=t.getBoundingClientRect(),{x:n,y:s,height:c}=e.getBoundingClientRect(),l=t.scrollWidth,d=e.scrollWidth,f=d/l,g=`translateX(${n-r}px) translateY(${s-o+Math.round((c-a*f)/2)}px) scale(${f})`,p="translateX(0) translateY(0) scale(1)",k=e.clientWidth,u=d>k?k/f+"px":"";return this.focused||this.populated?[{transform:g,width:u},{transform:p,width:u}]:[{transform:p,width:u},{transform:g,width:u}]}getSurfacePositionClientRect(){return this.containerEl.getBoundingClientRect()}}h([v({type:Boolean})],P.prototype,"disabled",void 0),h([v({type:Boolean})],P.prototype,"error",void 0),h([v({type:Boolean})],P.prototype,"focused",void 0),h([v()],P.prototype,"label",void 0),h([v({type:Boolean,attribute:"no-asterisk"})],P.prototype,"noAsterisk",void 0),h([v({type:Boolean})],P.prototype,"populated",void 0),h([v({type:Boolean})],P.prototype,"required",void 0),h([v({type:Boolean})],P.prototype,"resizable",void 0),h([v({attribute:"supporting-text"})],P.prototype,"supportingText",void 0),h([v({attribute:"error-text"})],P.prototype,"errorText",void 0),h([v({type:Number})],P.prototype,"count",void 0),h([v({type:Number})],P.prototype,"max",void 0),h([v({type:Boolean,attribute:"has-start"})],P.prototype,"hasStart",void 0),h([v({type:Boolean,attribute:"has-end"})],P.prototype,"hasEnd",void 0),h([Ce({slot:"aria-describedby"})],P.prototype,"slottedAriaDescribedBy",void 0),h([O()],P.prototype,"isAnimating",void 0),h([O()],P.prototype,"refreshErrorAlert",void 0),h([O()],P.prototype,"disableTransitions",void 0),h([X(".label.floating")],P.prototype,"floatingLabelEl",void 0),h([X(".label.resting")],P.prototype,"restingLabelEl",void 0),h([X(".container")],P.prototype,"containerEl",void 0);class xo extends P{renderBackground(){return b` <div class="background"></div> `}renderStateLayer(){return b` <div class="state-layer"></div> `}renderIndicator(){return b`<div class="active-indicator"></div>`}}const wo=N`@layer styles{:host{--_active-indicator-color: var(--md-filled-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-field-active-indicator-height, 1px);--_bottom-space: var(--md-filled-field-bottom-space, 16px);--_container-color: var(--md-filled-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_content-color: var(--md-filled-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-filled-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-filled-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-filled-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-space: var(--md-filled-field-content-space, 16px);--_content-weight: var(--md-filled-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-active-indicator-color: var(--md-filled-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-field-disabled-container-opacity, 0.04);--_disabled-content-color: var(--md-filled-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-filled-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-filled-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-filled-field-disabled-leading-content-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-filled-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-filled-field-disabled-trailing-content-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-content-color: var(--md-filled-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-active-indicator-color: var(--md-filled-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-content-color: var(--md-filled-field-error-focus-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-label-text-color: var(--md-filled-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-filled-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-filled-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-content-color: var(--md-filled-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-filled-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-filled-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-filled-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-filled-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-filled-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-field-focus-active-indicator-height, 3px);--_focus-content-color: var(--md-filled-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-filled-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-filled-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-field-hover-active-indicator-height, 1px);--_hover-content-color: var(--md-filled-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-content-color: var(--md-filled-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-filled-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-filled-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-filled-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-filled-field-leading-space, 16px);--_supporting-text-color: var(--md-filled-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-filled-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-filled-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-filled-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-filled-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-filled-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-filled-field-top-space, 16px);--_trailing-content-color: var(--md-filled-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-filled-field-trailing-space, 16px);--_with-label-bottom-space: var(--md-filled-field-with-label-bottom-space, 8px);--_with-label-top-space: var(--md-filled-field-with-label-top-space, 8px);--_with-leading-content-leading-space: var(--md-filled-field-with-leading-content-leading-space, 12px);--_with-trailing-content-trailing-space: var(--md-filled-field-with-trailing-content-trailing-space, 12px);--_container-shape-start-start: var(--md-filled-field-container-shape-start-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-filled-field-container-shape-start-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-filled-field-container-shape-end-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start: var(--md-filled-field-container-shape-end-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)))}.background,.state-layer{border-radius:inherit;inset:0;pointer-events:none;position:absolute}.background{background:var(--_container-color)}.state-layer{visibility:hidden}.field:not(.disabled):hover .state-layer{visibility:visible}.label.floating{position:absolute;top:var(--_with-label-top-space)}.field:not(.with-start) .label-wrapper{margin-inline-start:var(--_leading-space)}.field:not(.with-end) .label-wrapper{margin-inline-end:var(--_trailing-space)}.active-indicator{inset:auto 0 0 0;pointer-events:none;position:absolute;width:100%;z-index:1}.active-indicator::before,.active-indicator::after{border-bottom:var(--_active-indicator-height) solid var(--_active-indicator-color);inset:auto 0 0 0;content:"";position:absolute;width:100%}.active-indicator::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .active-indicator::after{opacity:1}.field:not(.with-start) .content ::slotted(*){padding-inline-start:var(--_leading-space)}.field:not(.with-end) .content ::slotted(*){padding-inline-end:var(--_trailing-space)}.field:not(.no-label) .content ::slotted(:not(textarea)){padding-bottom:var(--_with-label-bottom-space);padding-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}.field:not(.no-label) .content ::slotted(textarea){margin-bottom:var(--_with-label-bottom-space);margin-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}:hover .active-indicator::before{border-bottom-color:var(--_hover-active-indicator-color);border-bottom-width:var(--_hover-active-indicator-height)}.active-indicator::after{border-bottom-color:var(--_focus-active-indicator-color);border-bottom-width:var(--_focus-active-indicator-height)}:hover .state-layer{background:var(--_hover-state-layer-color);opacity:var(--_hover-state-layer-opacity)}.disabled .active-indicator::before{border-bottom-color:var(--_disabled-active-indicator-color);border-bottom-width:var(--_disabled-active-indicator-height);opacity:var(--_disabled-active-indicator-opacity)}.disabled .background{background:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.error .active-indicator::before{border-bottom-color:var(--_error-active-indicator-color)}.error:hover .active-indicator::before{border-bottom-color:var(--_error-hover-active-indicator-color)}.error:hover .state-layer{background:var(--_error-hover-state-layer-color);opacity:var(--_error-hover-state-layer-opacity)}.error .active-indicator::after{border-bottom-color:var(--_error-focus-active-indicator-color)}.resizable .container{bottom:var(--_focus-active-indicator-height);clip-path:inset(var(--_focus-active-indicator-height) 0 0 0)}.resizable .container>*{top:var(--_focus-active-indicator-height)}}@layer hcm{@media(forced-colors: active){.disabled .active-indicator::before{border-color:GrayText;opacity:1}}}
`,Eo=N`:host{display:inline-flex;resize:both}.field{display:flex;flex:1;flex-direction:column;writing-mode:horizontal-tb;max-width:100%}.container-overflow{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start);display:flex;height:100%;position:relative}.container{align-items:center;border-radius:inherit;display:flex;flex:1;max-height:100%;min-height:100%;min-width:min-content;position:relative}.field,.container-overflow{resize:inherit}.resizable:not(.disabled) .container{resize:inherit;overflow:hidden}.disabled{pointer-events:none}slot[name=container]{border-radius:inherit}slot[name=container]::slotted(*){border-radius:inherit;inset:0;pointer-events:none;position:absolute}@layer styles{.start,.middle,.end{display:flex;box-sizing:border-box;height:100%;position:relative}.start{color:var(--_leading-content-color)}.end{color:var(--_trailing-content-color)}.start,.end{align-items:center;justify-content:center}.with-start .start{margin-inline:var(--_with-leading-content-leading-space) var(--_content-space)}.with-end .end{margin-inline:var(--_content-space) var(--_with-trailing-content-trailing-space)}.middle{align-items:stretch;align-self:baseline;flex:1}.content{color:var(--_content-color);display:flex;flex:1;opacity:0;transition:opacity 83ms cubic-bezier(0.2, 0, 0, 1)}.no-label .content,.focused .content,.populated .content{opacity:1;transition-delay:67ms}:is(.disabled,.disable-transitions) .content{transition:none}.content ::slotted(*){all:unset;color:currentColor;font-family:var(--_content-font);font-size:var(--_content-size);line-height:var(--_content-line-height);font-weight:var(--_content-weight);width:100%;overflow-wrap:revert;white-space:revert}.content ::slotted(:not(textarea)){padding-top:var(--_top-space);padding-bottom:var(--_bottom-space)}.content ::slotted(textarea){margin-top:var(--_top-space);margin-bottom:var(--_bottom-space)}:hover .content{color:var(--_hover-content-color)}:hover .start{color:var(--_hover-leading-content-color)}:hover .end{color:var(--_hover-trailing-content-color)}.focused .content{color:var(--_focus-content-color)}.focused .start{color:var(--_focus-leading-content-color)}.focused .end{color:var(--_focus-trailing-content-color)}.disabled .content{color:var(--_disabled-content-color)}.disabled.no-label .content,.disabled.focused .content,.disabled.populated .content{opacity:var(--_disabled-content-opacity)}.disabled .start{color:var(--_disabled-leading-content-color);opacity:var(--_disabled-leading-content-opacity)}.disabled .end{color:var(--_disabled-trailing-content-color);opacity:var(--_disabled-trailing-content-opacity)}.error .content{color:var(--_error-content-color)}.error .start{color:var(--_error-leading-content-color)}.error .end{color:var(--_error-trailing-content-color)}.error:hover .content{color:var(--_error-hover-content-color)}.error:hover .start{color:var(--_error-hover-leading-content-color)}.error:hover .end{color:var(--_error-hover-trailing-content-color)}.error.focused .content{color:var(--_error-focus-content-color)}.error.focused .start{color:var(--_error-focus-leading-content-color)}.error.focused .end{color:var(--_error-focus-trailing-content-color)}}@layer hcm{@media(forced-colors: active){.disabled :is(.start,.content,.end){color:GrayText;opacity:1}}}@layer styles{.label{box-sizing:border-box;color:var(--_label-text-color);overflow:hidden;max-width:100%;text-overflow:ellipsis;white-space:nowrap;z-index:1;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);width:min-content}.label-wrapper{inset:0;pointer-events:none;position:absolute}.label.resting{position:absolute;top:var(--_top-space)}.label.floating{font-size:var(--_label-text-populated-size);line-height:var(--_label-text-populated-line-height);transform-origin:top left}.label.hidden{opacity:0}.no-label .label{display:none}.label-wrapper{inset:0;position:absolute;text-align:initial}:hover .label{color:var(--_hover-label-text-color)}.focused .label{color:var(--_focus-label-text-color)}.disabled .label{color:var(--_disabled-label-text-color)}.disabled .label:not(.hidden){opacity:var(--_disabled-label-text-opacity)}.error .label{color:var(--_error-label-text-color)}.error:hover .label{color:var(--_error-hover-label-text-color)}.error.focused .label{color:var(--_error-focus-label-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .label:not(.hidden){color:GrayText;opacity:1}}}@layer styles{.supporting-text{color:var(--_supporting-text-color);display:flex;font-family:var(--_supporting-text-font);font-size:var(--_supporting-text-size);line-height:var(--_supporting-text-line-height);font-weight:var(--_supporting-text-weight);gap:16px;justify-content:space-between;padding-inline-start:var(--_supporting-text-leading-space);padding-inline-end:var(--_supporting-text-trailing-space);padding-top:var(--_supporting-text-top-space)}.supporting-text :nth-child(2){flex-shrink:0}:hover .supporting-text{color:var(--_hover-supporting-text-color)}.focus .supporting-text{color:var(--_focus-supporting-text-color)}.disabled .supporting-text{color:var(--_disabled-supporting-text-color);opacity:var(--_disabled-supporting-text-opacity)}.error .supporting-text{color:var(--_error-supporting-text-color)}.error:hover .supporting-text{color:var(--_error-hover-supporting-text-color)}.error.focus .supporting-text{color:var(--_error-focus-supporting-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .supporting-text{color:GrayText;opacity:1}}}
`;let Jt=class extends xo{};Jt.styles=[Eo,wo],Jt=h([Ht("md-filled-field")],Jt);const ko={},Hi=eo(class extends to{constructor(i){if(super(i),i.type!==Pe.PROPERTY&&i.type!==Pe.ATTRIBUTE&&i.type!==Pe.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!(t=>t.strings===void 0)(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[t]){if(t===ut||t===S)return t;const e=i.element,r=i.name;if(i.type===Pe.PROPERTY){if(t===e[r])return ut}else if(i.type===Pe.BOOLEAN_ATTRIBUTE){if(!!t===e.hasAttribute(r))return ut}else if(i.type===Pe.ATTRIBUTE&&e.getAttribute(r)===t+"")return ut;return((o,a=ko)=>{o._$AH=a})(i),t}}),qi="important",So=" !"+qi,vt=eo(class extends to{constructor(i){var t;if(super(i),i.type!==Pe.ATTRIBUTE||i.name!=="style"||((t=i.strings)===null||t===void 0?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((t,e)=>{const r=i[e];return r==null?t:t+`${e=e.includes("-")?e:e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(i,[t]){const{style:e}=i.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const r of this.ft)t[r]==null&&(this.ft.delete(r),r.includes("-")?e.removeProperty(r):e[r]=null);for(const r in t){const o=t[r];if(o!=null){this.ft.add(r);const a=typeof o=="string"&&o.endsWith(So);r.includes("-")||a?e.setProperty(r,a?o.slice(0,-11):o,a?qi:""):e[r]=o}}return ut}}),Ao={fromAttribute:i=>i??"",toAttribute:i=>i||null},gt=Symbol("onReportValidity"),_t=Symbol("privateCleanupFormListeners"),bt=Symbol("privateDoNotReportInvalid"),yt=Symbol("privateIsSelfReportingValidity"),xt=Symbol("privateCallOnReportValidity");function Vi(i){var t,e,r;class o extends i{constructor(...n){super(...n),this[t]=new AbortController,this[e]=!1,this[r]=!1,this.addEventListener("invalid",s=>{!this[bt]&&s.isTrusted&&this.addEventListener("invalid",()=>{this[xt](s)},{once:!0})},{capture:!0})}checkValidity(){this[bt]=!0;const n=super.checkValidity();return this[bt]=!1,n}reportValidity(){this[yt]=!0;const n=super.reportValidity();return n&&this[xt](null),this[yt]=!1,n}[(t=_t,e=bt,r=yt,xt)](n){const s=n==null?void 0:n.defaultPrevented;s||(this[gt](n),!s&&(n!=null&&n.defaultPrevented)&&(this[yt]||function(c,l){if(!c)return!0;let d;for(const f of c.elements)if(f.matches(":invalid")){d=f;break}return d===l}(this[te].form,this))&&this.focus())}[gt](n){throw new Error("Implement [onReportValidity]")}formAssociatedCallback(n){super.formAssociatedCallback&&super.formAssociatedCallback(n),this[_t].abort(),n&&(this[_t]=new AbortController,function(s,c,l,d){const f=function(u){if(!Qt.has(u)){const _=new EventTarget;Qt.set(u,_);for(const x of["reportValidity","requestSubmit"]){const E=u[x];u[x]=function(){_.dispatchEvent(new Event("before"));const m=Reflect.apply(E,this,arguments);return _.dispatchEvent(new Event("after")),m}}}return Qt.get(u)}(c);let g,p=!1,k=!1;f.addEventListener("before",()=>{k=!0,g=new AbortController,p=!1,s.addEventListener("invalid",()=>{p=!0},{signal:g.signal})},{signal:d}),f.addEventListener("after",()=>{var u;k=!1,(u=g)===null||u===void 0||u.abort(),p||l()},{signal:d}),c.addEventListener("submit",()=>{k||l()},{signal:d})}(this,n,()=>{this[xt](null)},this[_t].signal))}}return o}const Qt=new WeakMap;class To extends Xt{computeValidity({state:t,renderedControl:e}){let r=e;Ge(t)&&!r?(r=this.inputControl||document.createElement("input"),this.inputControl=r):r||(r=this.textAreaControl||document.createElement("textarea"),this.textAreaControl=r);const o=Ge(t)?r:null;if(o&&(o.type=t.type),r.value!==t.value&&(r.value=t.value),r.required=t.required,o){const a=t;a.pattern?o.pattern=a.pattern:o.removeAttribute("pattern"),a.min?o.min=a.min:o.removeAttribute("min"),a.max?o.max=a.max:o.removeAttribute("max"),a.step?o.step=a.step:o.removeAttribute("step")}return(t.minLength??-1)>-1?r.setAttribute("minlength",String(t.minLength)):r.removeAttribute("minlength"),(t.maxLength??-1)>-1?r.setAttribute("maxlength",String(t.maxLength)):r.removeAttribute("maxlength"),{validity:r.validity,validationMessage:r.validationMessage}}equals({state:t},{state:e}){const r=t.type===e.type&&t.value===e.value&&t.required===e.required&&t.minLength===e.minLength&&t.maxLength===e.maxLength;return Ge(t)&&Ge(e)?r&&t.pattern===e.pattern&&t.min===e.min&&t.max===e.max&&t.step===e.step:r}copy({state:t}){return{state:Ge(t)?this.copyInput(t):this.copyTextArea(t),renderedControl:null}}copyInput(t){const{type:e,pattern:r,min:o,max:a,step:n}=t;return{...this.copySharedState(t),type:e,pattern:r,min:o,max:a,step:n}}copyTextArea(t){return{...this.copySharedState(t),type:t.type}}copySharedState({value:t,required:e,minLength:r,maxLength:o}){return{value:t,required:e,minLength:r,maxLength:o}}}function Ge(i){return i.type!=="textarea"}const Co=ze(Vi(Kt(Yt(qt(M)))));class $ extends Co{constructor(){super(...arguments),this.error=!1,this.errorText="",this.label="",this.noAsterisk=!1,this.required=!1,this.value="",this.prefixText="",this.suffixText="",this.hasLeadingIcon=!1,this.hasTrailingIcon=!1,this.supportingText="",this.textDirection="",this.rows=2,this.cols=20,this.inputMode="",this.max="",this.maxLength=-1,this.min="",this.minLength=-1,this.noSpinner=!1,this.pattern="",this.placeholder="",this.readOnly=!1,this.multiple=!1,this.step="",this.type="text",this.autocomplete="",this.dirty=!1,this.focused=!1,this.nativeError=!1,this.nativeErrorText=""}get selectionDirection(){return this.getInputOrTextarea().selectionDirection}set selectionDirection(t){this.getInputOrTextarea().selectionDirection=t}get selectionEnd(){return this.getInputOrTextarea().selectionEnd}set selectionEnd(t){this.getInputOrTextarea().selectionEnd=t}get selectionStart(){return this.getInputOrTextarea().selectionStart}set selectionStart(t){this.getInputOrTextarea().selectionStart=t}get valueAsNumber(){const t=this.getInput();return t?t.valueAsNumber:NaN}set valueAsNumber(t){const e=this.getInput();e&&(e.valueAsNumber=t,this.value=e.value)}get valueAsDate(){const t=this.getInput();return t?t.valueAsDate:null}set valueAsDate(t){const e=this.getInput();e&&(e.valueAsDate=t,this.value=e.value)}get hasError(){return this.error||this.nativeError}select(){this.getInputOrTextarea().select()}setRangeText(...t){this.getInputOrTextarea().setRangeText(...t),this.value=this.getInputOrTextarea().value}setSelectionRange(t,e,r){this.getInputOrTextarea().setSelectionRange(t,e,r)}showPicker(){const t=this.getInput();t&&t.showPicker()}stepDown(t){const e=this.getInput();e&&(e.stepDown(t),this.value=e.value)}stepUp(t){const e=this.getInput();e&&(e.stepUp(t),this.value=e.value)}reset(){this.dirty=!1,this.value=this.getAttribute("value")??"",this.nativeError=!1,this.nativeErrorText=""}attributeChangedCallback(t,e,r){t==="value"&&this.dirty||super.attributeChangedCallback(t,e,r)}render(){const t={disabled:this.disabled,error:!this.disabled&&this.hasError,textarea:this.type==="textarea","no-spinner":this.noSpinner};return b`
      <span class="text-field ${re(t)}">
        ${this.renderField()}
      </span>
    `}updated(t){const e=this.getInputOrTextarea().value;this.value!==e&&(this.value=e)}renderField(){return ft`<${this.fieldTag}
      class="field"
      count=${this.value.length}
      ?disabled=${this.disabled}
      ?error=${this.hasError}
      error-text=${this.getErrorText()}
      ?focused=${this.focused}
      ?has-end=${this.hasTrailingIcon}
      ?has-start=${this.hasLeadingIcon}
      label=${this.label}
      ?no-asterisk=${this.noAsterisk}
      max=${this.maxLength}
      ?populated=${!!this.value}
      ?required=${this.required}
      ?resizable=${this.type==="textarea"}
      supporting-text=${this.supportingText}
    >
      ${this.renderLeadingIcon()}
      ${this.renderInputOrTextarea()}
      ${this.renderTrailingIcon()}
      <div id="description" slot="aria-describedby"></div>
      <slot name="container" slot="container"></slot>
    </${this.fieldTag}>`}renderLeadingIcon(){return b`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return b`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderInputOrTextarea(){const t={direction:this.textDirection},e=this.ariaLabel||this.label||S,r=this.autocomplete,o=(this.maxLength??-1)>-1,a=(this.minLength??-1)>-1;if(this.type==="textarea")return b`
        <textarea
          class="input"
          style=${vt(t)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${e}
          autocomplete=${r||S}
          name=${this.name||S}
          ?disabled=${this.disabled}
          maxlength=${o?this.maxLength:S}
          minlength=${a?this.minLength:S}
          placeholder=${this.placeholder||S}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          rows=${this.rows}
          cols=${this.cols}
          .value=${Hi(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent}></textarea>
      `;const n=this.renderPrefix(),s=this.renderSuffix(),c=this.inputMode;return b`
      <div class="input-wrapper">
        ${n}
        <input
          class="input"
          style=${vt(t)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${e}
          autocomplete=${r||S}
          name=${this.name||S}
          ?disabled=${this.disabled}
          inputmode=${c||S}
          max=${this.max||S}
          maxlength=${o?this.maxLength:S}
          min=${this.min||S}
          minlength=${a?this.minLength:S}
          pattern=${this.pattern||S}
          placeholder=${this.placeholder||S}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          ?multiple=${this.multiple}
          step=${this.step||S}
          type=${this.type}
          .value=${Hi(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent} />
        ${s}
      </div>
    `}renderPrefix(){return this.renderAffix(this.prefixText,!1)}renderSuffix(){return this.renderAffix(this.suffixText,!0)}renderAffix(t,e){return t?b`<span class="${re({suffix:e,prefix:!e})}">${t}</span>`:S}getErrorText(){return this.error?this.errorText:this.nativeErrorText}handleFocusChange(){var t;this.focused=((t=this.inputOrTextarea)===null||t===void 0?void 0:t.matches(":focus"))??!1}handleInput(t){this.dirty=!0,this.value=t.target.value}redispatchEvent(t){Si(this,t)}getInputOrTextarea(){return this.inputOrTextarea||(this.connectedCallback(),this.scheduleUpdate()),this.isUpdatePending&&this.scheduleUpdate(),this.inputOrTextarea}getInput(){return this.type==="textarea"?null:this.getInputOrTextarea()}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0,this.hasTrailingIcon=this.trailingIcons.length>0}[Be](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(t){this.value=t}focus(){this.getInputOrTextarea().focus()}[We](){return new To(()=>({state:this,renderedControl:this.inputOrTextarea}))}[Ze](){return this.inputOrTextarea}[gt](t){t==null||t.preventDefault();const e=this.getErrorText();var r;this.nativeError=!!t,this.nativeErrorText=this.validationMessage,e===this.getErrorText()&&((r=this.field)===null||r===void 0||r.reannounceError())}}$.shadowRootOptions={...M.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean,reflect:!0})],$.prototype,"error",void 0),h([v({attribute:"error-text"})],$.prototype,"errorText",void 0),h([v()],$.prototype,"label",void 0),h([v({type:Boolean,attribute:"no-asterisk"})],$.prototype,"noAsterisk",void 0),h([v({type:Boolean,reflect:!0})],$.prototype,"required",void 0),h([v()],$.prototype,"value",void 0),h([v({attribute:"prefix-text"})],$.prototype,"prefixText",void 0),h([v({attribute:"suffix-text"})],$.prototype,"suffixText",void 0),h([v({type:Boolean,attribute:"has-leading-icon"})],$.prototype,"hasLeadingIcon",void 0),h([v({type:Boolean,attribute:"has-trailing-icon"})],$.prototype,"hasTrailingIcon",void 0),h([v({attribute:"supporting-text"})],$.prototype,"supportingText",void 0),h([v({attribute:"text-direction"})],$.prototype,"textDirection",void 0),h([v({type:Number})],$.prototype,"rows",void 0),h([v({type:Number})],$.prototype,"cols",void 0),h([v({reflect:!0})],$.prototype,"inputMode",void 0),h([v()],$.prototype,"max",void 0),h([v({type:Number})],$.prototype,"maxLength",void 0),h([v()],$.prototype,"min",void 0),h([v({type:Number})],$.prototype,"minLength",void 0),h([v({type:Boolean,attribute:"no-spinner"})],$.prototype,"noSpinner",void 0),h([v()],$.prototype,"pattern",void 0),h([v({reflect:!0,converter:Ao})],$.prototype,"placeholder",void 0),h([v({type:Boolean,reflect:!0})],$.prototype,"readOnly",void 0),h([v({type:Boolean,reflect:!0})],$.prototype,"multiple",void 0),h([v()],$.prototype,"step",void 0),h([v({reflect:!0})],$.prototype,"type",void 0),h([v({reflect:!0})],$.prototype,"autocomplete",void 0),h([O()],$.prototype,"dirty",void 0),h([O()],$.prototype,"focused",void 0),h([O()],$.prototype,"nativeError",void 0),h([O()],$.prototype,"nativeErrorText",void 0),h([X(".input")],$.prototype,"inputOrTextarea",void 0),h([X(".field")],$.prototype,"field",void 0),h([Ce({slot:"leading-icon"})],$.prototype,"leadingIcons",void 0),h([Ce({slot:"trailing-icon"})],$.prototype,"trailingIcons",void 0);class Ro extends ${constructor(){super(...arguments),this.fieldTag=_e`md-filled-field`}}const Io=N`:host{display:inline-flex;outline:none;resize:both;text-align:start;-webkit-tap-highlight-color:rgba(0,0,0,0)}.text-field,.field{width:100%}.text-field{display:inline-flex}.field{cursor:text}.disabled .field{cursor:default}.text-field,.textarea .field{resize:inherit}slot[name=container]{border-radius:inherit}.icon{color:currentColor;display:flex;align-items:center;justify-content:center;fill:currentColor;position:relative}.icon ::slotted(*){display:flex;position:absolute}[has-start] .icon.leading{font-size:var(--_leading-icon-size);height:var(--_leading-icon-size);width:var(--_leading-icon-size)}[has-end] .icon.trailing{font-size:var(--_trailing-icon-size);height:var(--_trailing-icon-size);width:var(--_trailing-icon-size)}.input-wrapper{display:flex}.input-wrapper>*{all:inherit;padding:0}.input{caret-color:var(--_caret-color);overflow-x:hidden;text-align:inherit}.input::placeholder{color:currentColor;opacity:1}.input::-webkit-calendar-picker-indicator{display:none}.input::-webkit-search-decoration,.input::-webkit-search-cancel-button{display:none}@media(forced-colors: active){.input{background:none}}.no-spinner .input::-webkit-inner-spin-button,.no-spinner .input::-webkit-outer-spin-button{display:none}.no-spinner .input[type=number]{-moz-appearance:textfield}:focus-within .input{caret-color:var(--_focus-caret-color)}.error:focus-within .input{caret-color:var(--_error-focus-caret-color)}.text-field:not(.disabled) .prefix{color:var(--_input-text-prefix-color)}.text-field:not(.disabled) .suffix{color:var(--_input-text-suffix-color)}.text-field:not(.disabled) .input::placeholder{color:var(--_input-text-placeholder-color)}.prefix,.suffix{text-wrap:nowrap;width:min-content}.prefix{padding-inline-end:var(--_input-text-prefix-trailing-space)}.suffix{padding-inline-start:var(--_input-text-suffix-leading-space)}
`;class Wi extends Ro{constructor(){super(...arguments),this.fieldTag=_e`md-filled-field`}}Wi.styles=[Io,yo],customElements.define("ew-filled-text-field",Wi);class $o extends M{connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){return b`<span class="shadow"></span>`}}const Lo=N`:host,.shadow,.shadow::before,.shadow::after{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}:host{display:flex;pointer-events:none;transition-property:box-shadow,opacity}.shadow::before,.shadow::after{content:"";transition-property:box-shadow,opacity;--_level: var(--md-elevation-level, 0);--_shadow-color: var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000))}.shadow::before{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0px var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}
`;let ei=class extends $o{};ei.styles=[Lo],ei=h([Ht("md-elevation")],ei);const Zi=function(i,t){return new CustomEvent("close-menu",{bubbles:!0,composed:!0,detail:{initiator:i,reason:t,itemPath:[i]}})},ti={SPACE:"Space",ENTER:"Enter"},Oo="click-selection",Do="keydown",zo={ESCAPE:"Escape",SPACE:ti.SPACE,ENTER:ti.ENTER};function Gi(i){return Object.values(zo).some(t=>t===i)}function ii(i,t){const e=new Event("md-contains",{bubbles:!0,composed:!0});let r=[];const o=a=>{r=a.composedPath()};return t.addEventListener("md-contains",o),i.dispatchEvent(e),t.removeEventListener("md-contains",o),r.length>0}const wt="none",Po="list-root",ri="first-item",Ki="last-item",Bo="end-start",Fo="start-start";class Uo{constructor(t,e){this.host=t,this.getProperties=e,this.surfaceStylesInternal={display:"none"},this.lastValues={isOpen:!1},this.host.addController(this)}get surfaceStyles(){return this.surfaceStylesInternal}async position(){const{surfaceEl:t,anchorEl:e,anchorCorner:r,surfaceCorner:o,positioning:a,xOffset:n,yOffset:s,disableBlockFlip:c,disableInlineFlip:l,repositionStrategy:d}=this.getProperties(),f=r.toLowerCase().trim(),g=o.toLowerCase().trim();if(!t||!e)return;const p=window.innerWidth,k=window.innerHeight,u=document.createElement("div");u.style.opacity="0",u.style.position="fixed",u.style.display="block",u.style.inset="0",document.body.appendChild(u);const _=u.getBoundingClientRect();u.remove();const x=window.innerHeight-_.bottom,E=window.innerWidth-_.right;this.surfaceStylesInternal={display:"block",opacity:"0"},this.host.requestUpdate(),await this.host.updateComplete,t.popover&&t.isConnected&&t.showPopover();const m=t.getSurfacePositionClientRect?t.getSurfacePositionClientRect():t.getBoundingClientRect(),w=e.getSurfacePositionClientRect?e.getSurfacePositionClientRect():e.getBoundingClientRect(),[R,y]=g.split("-"),[I,T]=f.split("-"),A=getComputedStyle(t).direction==="ltr";let{blockInset:C,blockOutOfBoundsCorrection:F,surfaceBlockProperty:Ae}=this.calculateBlock({surfaceRect:m,anchorRect:w,anchorBlock:I,surfaceBlock:R,yOffset:s,positioning:a,windowInnerHeight:k,blockScrollbarHeight:x});if(F&&!c){const Ei=R==="start"?"end":"start",ki=I==="start"?"end":"start",ve=this.calculateBlock({surfaceRect:m,anchorRect:w,anchorBlock:ki,surfaceBlock:Ei,yOffset:s,positioning:a,windowInnerHeight:k,blockScrollbarHeight:x});F>ve.blockOutOfBoundsCorrection&&(C=ve.blockInset,F=ve.blockOutOfBoundsCorrection,Ae=ve.surfaceBlockProperty)}let{inlineInset:Te,inlineOutOfBoundsCorrection:ie,surfaceInlineProperty:De}=this.calculateInline({surfaceRect:m,anchorRect:w,anchorInline:T,surfaceInline:y,xOffset:n,positioning:a,isLTR:A,windowInnerWidth:p,inlineScrollbarWidth:E});if(ie&&!l){const Ei=y==="start"?"end":"start",ki=T==="start"?"end":"start",ve=this.calculateInline({surfaceRect:m,anchorRect:w,anchorInline:ki,surfaceInline:Ei,xOffset:n,positioning:a,isLTR:A,windowInnerWidth:p,inlineScrollbarWidth:E});Math.abs(ie)>Math.abs(ve.inlineOutOfBoundsCorrection)&&(Te=ve.inlineInset,ie=ve.inlineOutOfBoundsCorrection,De=ve.surfaceInlineProperty)}d==="move"&&(C-=F,Te-=ie),this.surfaceStylesInternal={display:"block",opacity:"1",[Ae]:`${C}px`,[De]:`${Te}px`},d==="resize"&&(F&&(this.surfaceStylesInternal.height=m.height-F+"px"),ie&&(this.surfaceStylesInternal.width=m.width-ie+"px")),this.host.requestUpdate()}calculateBlock(t){const{surfaceRect:e,anchorRect:r,anchorBlock:o,surfaceBlock:a,yOffset:n,positioning:s,windowInnerHeight:c,blockScrollbarHeight:l}=t,d=s==="fixed"||s==="document"?1:0,f=s==="document"?1:0,g=a==="start"?1:0,p=a==="end"?1:0,k=(o!==a?1:0)*r.height+n,u=g*r.top+p*(c-r.bottom-l);return{blockInset:d*u+f*(g*window.scrollY-p*window.scrollY)+k,blockOutOfBoundsCorrection:Math.abs(Math.min(0,c-u-k-e.height)),surfaceBlockProperty:a==="start"?"inset-block-start":"inset-block-end"}}calculateInline(t){const{isLTR:e,surfaceInline:r,anchorInline:o,anchorRect:a,surfaceRect:n,xOffset:s,positioning:c,windowInnerWidth:l,inlineScrollbarWidth:d}=t,f=c==="fixed"||c==="document"?1:0,g=c==="document"?1:0,p=e?1:0,k=e?0:1,u=r==="start"?1:0,_=r==="end"?1:0,x=(o!==r?1:0)*a.width+s,E=p*(u*a.left+_*(l-a.right-d))+k*(u*(l-a.right-d)+_*a.left);let m=r==="start"?"inset-inline-start":"inset-inline-end";return c!=="document"&&c!=="fixed"||(m=r==="start"&&e||r==="end"&&!e?"left":"right"),{inlineInset:f*E+x+g*(p*(u*window.scrollX-_*window.scrollX)+k*(_*window.scrollX-u*window.scrollX)),inlineOutOfBoundsCorrection:Math.abs(Math.min(0,l-E-x-n.width)),surfaceInlineProperty:m}}hostUpdate(){this.onUpdate()}hostUpdated(){this.onUpdate()}async onUpdate(){const t=this.getProperties();let e=!1;for(const[n,s]of Object.entries(t))if(e=e||s!==this.lastValues[n],e)break;const r=this.lastValues.isOpen!==t.isOpen,o=!!t.anchorEl,a=!!t.surfaceEl;e&&o&&a&&(this.lastValues.isOpen=t.isOpen,t.isOpen?(this.lastValues=t,await this.position(),t.onOpen()):r&&(await t.beforeClose(),this.close(),t.onClose()))}close(){this.surfaceStylesInternal={display:"none"},this.host.requestUpdate();const t=this.getProperties().surfaceEl;t!=null&&t.popover&&t!=null&&t.isConnected&&t.hidePopover()}}const ji=0,he=1,Mo=2;class No{constructor(t){this.getProperties=t,this.typeaheadRecords=[],this.typaheadBuffer="",this.cancelTypeaheadTimeout=0,this.isTypingAhead=!1,this.lastActiveRecord=null,this.onKeydown=e=>{this.isTypingAhead?this.typeahead(e):this.beginTypeahead(e)},this.endTypeahead=()=>{this.isTypingAhead=!1,this.typaheadBuffer="",this.typeaheadRecords=[]}}get items(){return this.getProperties().getItems()}get active(){return this.getProperties().active}beginTypeahead(t){this.active&&(t.code==="Space"||t.code==="Enter"||t.code.startsWith("Arrow")||t.code==="Escape"||(this.isTypingAhead=!0,this.typeaheadRecords=this.items.map((e,r)=>[r,e,e.typeaheadText.trim().toLowerCase()]),this.lastActiveRecord=this.typeaheadRecords.find(e=>e[he].tabIndex===0)??null,this.lastActiveRecord&&(this.lastActiveRecord[he].tabIndex=-1),this.typeahead(t)))}typeahead(t){if(t.defaultPrevented)return;if(clearTimeout(this.cancelTypeaheadTimeout),t.code==="Enter"||t.code.startsWith("Arrow")||t.code==="Escape")return this.endTypeahead(),void(this.lastActiveRecord&&(this.lastActiveRecord[he].tabIndex=-1));t.code==="Space"&&t.preventDefault(),this.cancelTypeaheadTimeout=setTimeout(this.endTypeahead,this.getProperties().typeaheadBufferTime),this.typaheadBuffer+=t.key.toLowerCase();const e=this.lastActiveRecord?this.lastActiveRecord[ji]:-1,r=this.typeaheadRecords.length,o=c=>(c[ji]+r-e)%r,a=this.typeaheadRecords.filter(c=>!c[he].disabled&&c[Mo].startsWith(this.typaheadBuffer)).sort((c,l)=>o(c)-o(l));if(a.length===0)return clearTimeout(this.cancelTypeaheadTimeout),this.lastActiveRecord&&(this.lastActiveRecord[he].tabIndex=-1),void this.endTypeahead();const n=this.typaheadBuffer.length===1;let s;s=this.lastActiveRecord===a[0]&&n?a[1]??a[0]:a[0],this.lastActiveRecord&&(this.lastActiveRecord[he].tabIndex=-1),this.lastActiveRecord=s,s[he].tabIndex=0,s[he].focus()}}const Yi=new Set([q.ArrowDown,q.ArrowUp,q.Home,q.End]),Ho=new Set([q.ArrowLeft,q.ArrowRight,...Yi]);class B extends M{get openDirection(){return this.menuCorner.split("-")[0]==="start"?"DOWN":"UP"}get anchorElement(){return this.anchor?this.getRootNode().querySelector(`#${this.anchor}`):this.currentAnchorElement}set anchorElement(t){this.currentAnchorElement=t,this.requestUpdate("anchorElement")}constructor(){super(),this.anchor="",this.positioning="absolute",this.quick=!1,this.hasOverflow=!1,this.open=!1,this.xOffset=0,this.yOffset=0,this.noHorizontalFlip=!1,this.noVerticalFlip=!1,this.typeaheadDelay=200,this.anchorCorner=Bo,this.menuCorner=Fo,this.stayOpenOnOutsideClick=!1,this.stayOpenOnFocusout=!1,this.skipRestoreFocus=!1,this.defaultFocus=ri,this.noNavigationWrap=!1,this.typeaheadActive=!0,this.isSubmenu=!1,this.pointerPath=[],this.isRepositioning=!1,this.openCloseAnimationSignal=ks(),this.listController=new Li({isItem:t=>t.hasAttribute("md-menu-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>getComputedStyle(this).direction==="rtl",deactivateItem:t=>{t.selected=!1,t.tabIndex=-1},activateItem:t=>{t.selected=!0,t.tabIndex=0},isNavigableKey:t=>this.isSubmenu?t===(getComputedStyle(this).direction==="rtl"?q.ArrowLeft:q.ArrowRight)||Yi.has(t):Ho.has(t),wrapNavigation:()=>!this.noNavigationWrap}),this.lastFocusedElement=null,this.typeaheadController=new No(()=>({getItems:()=>this.items,typeaheadBufferTime:this.typeaheadDelay,active:this.typeaheadActive})),this.currentAnchorElement=null,this.internals=this.attachInternals(),this.menuPositionController=new Uo(this,()=>({anchorCorner:this.anchorCorner,surfaceCorner:this.menuCorner,surfaceEl:this.surfaceEl,anchorEl:this.anchorElement,positioning:this.positioning==="popover"?"document":this.positioning,isOpen:this.open,xOffset:this.xOffset,yOffset:this.yOffset,disableBlockFlip:this.noVerticalFlip,disableInlineFlip:this.noHorizontalFlip,onOpen:this.onOpened,beforeClose:this.beforeClose,onClose:this.onClosed,repositionStrategy:this.hasOverflow&&this.positioning!=="popover"?"move":"resize"})),this.onWindowResize=()=>{this.isRepositioning||this.positioning!=="document"&&this.positioning!=="fixed"&&this.positioning!=="popover"||(this.isRepositioning=!0,this.reposition(),this.isRepositioning=!1)},this.handleFocusout=async t=>{const e=this.anchorElement;if(this.stayOpenOnFocusout||!this.open||this.pointerPath.includes(e))return;if(t.relatedTarget){if(ii(t.relatedTarget,this)||this.pointerPath.length!==0&&ii(t.relatedTarget,e))return}else if(this.pointerPath.includes(this))return;const r=this.skipRestoreFocus;this.skipRestoreFocus=!0,this.close(),await this.updateComplete,this.skipRestoreFocus=r},this.onOpened=async()=>{this.lastFocusedElement=function(o=document){let a=o.activeElement;for(;a&&(n=a)!==null&&n!==void 0&&(n=n.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var n;a=a.shadowRoot.activeElement}return a}();const t=this.items,e=Ve(t);e&&this.defaultFocus!==wt&&(e.item.tabIndex=-1);let r=!this.quick;switch(this.quick?this.dispatchEvent(new Event("opening")):r=!!await this.animateOpen(),this.defaultFocus){case ri:const o=Vt(t);o&&(o.tabIndex=0,o.focus(),await o.updateComplete);break;case Ki:const a=Ri(t);a&&(a.tabIndex=0,a.focus(),await a.updateComplete);break;case Po:this.focus()}r||this.dispatchEvent(new Event("opened"))},this.beforeClose=async()=>{var t,e;this.open=!1,this.skipRestoreFocus||(t=this.lastFocusedElement)===null||t===void 0||(e=t.focus)===null||e===void 0||e.call(t),this.quick||await this.animateClose()},this.onClosed=()=>{this.quick&&(this.dispatchEvent(new Event("closing")),this.dispatchEvent(new Event("closed")))},this.onWindowPointerdown=t=>{this.pointerPath=t.composedPath()},this.onDocumentClick=t=>{if(!this.open)return;const e=t.composedPath();this.stayOpenOnOutsideClick||e.includes(this)||e.includes(this.anchorElement)||(this.open=!1)},this.internals.role="menu",this.addEventListener("keydown",this.handleKeydown),this.addEventListener("keydown",this.captureKeydown,{capture:!0}),this.addEventListener("focusout",this.handleFocusout)}get items(){return this.listController.items}willUpdate(t){t.has("open")&&(this.open?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"))}update(t){t.has("open")&&(this.open?this.setUpGlobalEventListeners():this.cleanUpGlobalEventListeners()),t.has("positioning")&&this.positioning==="popover"&&!this.showPopover&&(this.positioning="fixed"),super.update(t)}connectedCallback(){super.connectedCallback(),this.open&&this.setUpGlobalEventListeners()}disconnectedCallback(){super.disconnectedCallback(),this.cleanUpGlobalEventListeners()}getBoundingClientRect(){return this.surfaceEl?this.surfaceEl.getBoundingClientRect():super.getBoundingClientRect()}getClientRects(){return this.surfaceEl?this.surfaceEl.getClientRects():super.getClientRects()}render(){return this.renderSurface()}renderSurface(){return b`
      <div
        class="menu ${re(this.getSurfaceClasses())}"
        style=${vt(this.menuPositionController.surfaceStyles)}
        popover=${this.positioning==="popover"?"manual":S}>
        ${this.renderElevation()}
        <div class="items">
          <div class="item-padding"> ${this.renderMenuItems()} </div>
        </div>
      </div>
    `}renderMenuItems(){return b`<slot
      @close-menu=${this.onCloseMenu}
      @deactivate-items=${this.onDeactivateItems}
      @request-activation=${this.onRequestActivation}
      @deactivate-typeahead=${this.handleDeactivateTypeahead}
      @activate-typeahead=${this.handleActivateTypeahead}
      @stay-open-on-focusout=${this.handleStayOpenOnFocusout}
      @close-on-focusout=${this.handleCloseOnFocusout}
      @slotchange=${this.listController.onSlotchange}></slot>`}renderElevation(){return b`<md-elevation part="elevation"></md-elevation>`}getSurfaceClasses(){return{open:this.open,fixed:this.positioning==="fixed","has-overflow":this.hasOverflow}}captureKeydown(t){t.target===this&&!t.defaultPrevented&&Gi(t.code)&&(t.preventDefault(),this.close()),this.typeaheadController.onKeydown(t)}async animateOpen(){const t=this.surfaceEl,e=this.slotEl;if(!t||!e)return!0;const r=this.openDirection;this.dispatchEvent(new Event("opening")),t.classList.toggle("animating",!0);const o=this.openCloseAnimationSignal.start(),a=t.offsetHeight,n=r==="UP",s=this.items,c=250/s.length,l=t.animate([{height:"0px"},{height:`${a}px`}],{duration:500,easing:pt.EMPHASIZED}),d=e.animate([{transform:n?`translateY(-${a}px)`:""},{transform:""}],{duration:500,easing:pt.EMPHASIZED}),f=t.animate([{opacity:0},{opacity:1}],50),g=[];for(let u=0;u<s.length;u++){const _=s[n?s.length-1-u:u],x=_.animate([{opacity:0},{opacity:1}],{duration:250,delay:c*u});_.classList.toggle("md-menu-hidden",!0),x.addEventListener("finish",()=>{_.classList.toggle("md-menu-hidden",!1)}),g.push([_,x])}let p=u=>{};const k=new Promise(u=>{p=u});return o.addEventListener("abort",()=>{l.cancel(),d.cancel(),f.cancel(),g.forEach(([u,_])=>{u.classList.toggle("md-menu-hidden",!1),_.cancel()}),p(!0)}),l.addEventListener("finish",()=>{t.classList.toggle("animating",!1),this.openCloseAnimationSignal.finish(),p(!1)}),await k}animateClose(){let t;const e=new Promise(u=>{t=u}),r=this.surfaceEl,o=this.slotEl;if(!r||!o)return t(!1),e;const a=this.openDirection==="UP";this.dispatchEvent(new Event("closing")),r.classList.toggle("animating",!0);const n=this.openCloseAnimationSignal.start(),s=r.offsetHeight,c=this.items,l=150,d=50/c.length,f=r.animate([{height:`${s}px`},{height:.35*s+"px"}],{duration:l,easing:pt.EMPHASIZED_ACCELERATE}),g=o.animate([{transform:""},{transform:a?`translateY(-${.65*s}px)`:""}],{duration:l,easing:pt.EMPHASIZED_ACCELERATE}),p=r.animate([{opacity:1},{opacity:0}],{duration:50,delay:100}),k=[];for(let u=0;u<c.length;u++){const _=c[a?u:c.length-1-u],x=_.animate([{opacity:1},{opacity:0}],{duration:50,delay:50+d*u});x.addEventListener("finish",()=>{_.classList.toggle("md-menu-hidden",!0)}),k.push([_,x])}return n.addEventListener("abort",()=>{f.cancel(),g.cancel(),p.cancel(),k.forEach(([u,_])=>{_.cancel(),u.classList.toggle("md-menu-hidden",!1)}),t(!1)}),f.addEventListener("finish",()=>{r.classList.toggle("animating",!1),k.forEach(([u])=>{u.classList.toggle("md-menu-hidden",!1)}),this.openCloseAnimationSignal.finish(),this.dispatchEvent(new Event("closed")),t(!0)}),e}handleKeydown(t){this.pointerPath=[],this.listController.handleKeydown(t)}setUpGlobalEventListeners(){document.addEventListener("click",this.onDocumentClick,{capture:!0}),window.addEventListener("pointerdown",this.onWindowPointerdown),document.addEventListener("resize",this.onWindowResize,{passive:!0}),window.addEventListener("resize",this.onWindowResize,{passive:!0})}cleanUpGlobalEventListeners(){document.removeEventListener("click",this.onDocumentClick,{capture:!0}),window.removeEventListener("pointerdown",this.onWindowPointerdown),document.removeEventListener("resize",this.onWindowResize),window.removeEventListener("resize",this.onWindowResize)}onCloseMenu(){this.close()}onDeactivateItems(t){t.stopPropagation(),this.listController.onDeactivateItems()}onRequestActivation(t){t.stopPropagation(),this.listController.onRequestActivation(t)}handleDeactivateTypeahead(t){t.stopPropagation(),this.typeaheadActive=!1}handleActivateTypeahead(t){t.stopPropagation(),this.typeaheadActive=!0}handleStayOpenOnFocusout(t){t.stopPropagation(),this.stayOpenOnFocusout=!0}handleCloseOnFocusout(t){t.stopPropagation(),this.stayOpenOnFocusout=!1}close(){this.open=!1,this.slotItems.forEach(t=>{var e;(e=t.close)===null||e===void 0||e.call(t)})}show(){this.open=!0}activateNextItem(){return this.listController.activateNextItem()??null}activatePreviousItem(){return this.listController.activatePreviousItem()??null}reposition(){this.open&&this.menuPositionController.position()}}h([X(".menu")],B.prototype,"surfaceEl",void 0),h([X("slot")],B.prototype,"slotEl",void 0),h([v()],B.prototype,"anchor",void 0),h([v()],B.prototype,"positioning",void 0),h([v({type:Boolean})],B.prototype,"quick",void 0),h([v({type:Boolean,attribute:"has-overflow"})],B.prototype,"hasOverflow",void 0),h([v({type:Boolean,reflect:!0})],B.prototype,"open",void 0),h([v({type:Number,attribute:"x-offset"})],B.prototype,"xOffset",void 0),h([v({type:Number,attribute:"y-offset"})],B.prototype,"yOffset",void 0),h([v({type:Boolean,attribute:"no-horizontal-flip"})],B.prototype,"noHorizontalFlip",void 0),h([v({type:Boolean,attribute:"no-vertical-flip"})],B.prototype,"noVerticalFlip",void 0),h([v({type:Number,attribute:"typeahead-delay"})],B.prototype,"typeaheadDelay",void 0),h([v({attribute:"anchor-corner"})],B.prototype,"anchorCorner",void 0),h([v({attribute:"menu-corner"})],B.prototype,"menuCorner",void 0),h([v({type:Boolean,attribute:"stay-open-on-outside-click"})],B.prototype,"stayOpenOnOutsideClick",void 0),h([v({type:Boolean,attribute:"stay-open-on-focusout"})],B.prototype,"stayOpenOnFocusout",void 0),h([v({type:Boolean,attribute:"skip-restore-focus"})],B.prototype,"skipRestoreFocus",void 0),h([v({attribute:"default-focus"})],B.prototype,"defaultFocus",void 0),h([v({type:Boolean,attribute:"no-navigation-wrap"})],B.prototype,"noNavigationWrap",void 0),h([Ce({flatten:!0})],B.prototype,"slotItems",void 0),h([O()],B.prototype,"typeaheadActive",void 0);const qo=N`:host{--md-elevation-level: var(--md-menu-container-elevation, 2);--md-elevation-shadow-color: var(--md-menu-container-shadow-color, var(--md-sys-color-shadow, #000));min-width:112px;color:unset;display:contents}md-focus-ring{--md-focus-ring-shape: var(--md-menu-container-shape, var(--md-sys-shape-corner-extra-small, 4px))}.menu{border-radius:var(--md-menu-container-shape, var(--md-sys-shape-corner-extra-small, 4px));display:none;inset:auto;border:none;padding:0px;overflow:visible;background-color:rgba(0,0,0,0);color:inherit;opacity:0;z-index:20;position:absolute;user-select:none;max-height:inherit;height:inherit;min-width:inherit;max-width:inherit;scrollbar-width:inherit}.menu::backdrop{display:none}.fixed{position:fixed}.items{display:block;list-style-type:none;margin:0;outline:none;box-sizing:border-box;background-color:var(--md-menu-container-color, var(--md-sys-color-surface-container, #f3edf7));height:inherit;max-height:inherit;overflow:auto;min-width:inherit;max-width:inherit;border-radius:inherit;scrollbar-width:inherit}.item-padding{padding-block:var(--md-menu-top-space, 8px) var(--md-menu-bottom-space, 8px)}.has-overflow:not([popover]) .items{overflow:visible}.has-overflow.animating .items,.animating .items{overflow:hidden}.has-overflow.animating .items{pointer-events:none}.animating ::slotted(.md-menu-hidden){opacity:0}slot{display:block;height:inherit;max-height:inherit}::slotted(:is(md-divider,[role=separator])){margin:8px 0}@media(forced-colors: active){.menu{border-style:solid;border-color:CanvasText;border-width:1px}}
`;let oi=class extends B{};oi.styles=[qo],oi=h([Ht("md-menu")],oi);class Vo extends Xt{computeValidity(t){return this.selectControl||(this.selectControl=document.createElement("select")),Qr(b`<option value=${t.value}></option>`,this.selectControl),this.selectControl.value=t.value,this.selectControl.required=t.required,{validity:this.selectControl.validity,validationMessage:this.selectControl.validationMessage}}equals(t,e){return t.value===e.value&&t.required===e.required}copy({value:t,required:e}){return{value:t,required:e}}}var Xi;const Et=Symbol("value"),Wo=ze(Vi(Kt(Yt(qt(M)))));class D extends Wo{get value(){return this[Et]}set value(t){this.lastUserSetValue=t,this.select(t)}get options(){var t;return((t=this.menu)===null||t===void 0?void 0:t.items)??[]}get selectedIndex(){const[t,e]=(this.getSelectedOptions()??[])[0]??[];return e??-1}set selectedIndex(t){this.lastUserSetSelectedIndex=t,this.selectIndex(t)}get selectedOptions(){return(this.getSelectedOptions()??[]).map(([t])=>t)}get hasError(){return this.error||this.nativeError}constructor(){super(),this.quick=!1,this.required=!1,this.errorText="",this.label="",this.noAsterisk=!1,this.supportingText="",this.error=!1,this.menuPositioning="popover",this.clampMenuWidth=!1,this.typeaheadDelay=200,this.hasLeadingIcon=!1,this.displayText="",this.menuAlign="start",this[Xi]="",this.lastUserSetValue=null,this.lastUserSetSelectedIndex=null,this.lastSelectedOption=null,this.lastSelectedOptionRecords=[],this.nativeError=!1,this.nativeErrorText="",this.focused=!1,this.open=!1,this.defaultFocus=wt,this.prevOpen=this.open,this.selectWidth=0,this.addEventListener("focus",this.handleFocus.bind(this)),this.addEventListener("blur",this.handleBlur.bind(this))}select(t){const e=this.options.find(r=>r.value===t);e&&this.selectItem(e)}selectIndex(t){const e=this.options[t];e&&this.selectItem(e)}reset(){for(const t of this.options)t.selected=t.hasAttribute("selected");this.updateValueAndDisplayText(),this.nativeError=!1,this.nativeErrorText=""}[(Xi=Et,gt)](t){t==null||t.preventDefault();const e=this.getErrorText();var r;this.nativeError=!!t,this.nativeErrorText=this.validationMessage,e===this.getErrorText()&&((r=this.field)===null||r===void 0||r.reannounceError())}update(t){if(this.hasUpdated||this.initUserSelection(),this.prevOpen!==this.open&&this.open){const e=this.getBoundingClientRect();this.selectWidth=e.width}this.prevOpen=this.open,super.update(t)}render(){return b`
      <span
        class="select ${re(this.getRenderClasses())}"
        @focusout=${this.handleFocusout}>
        ${this.renderField()} ${this.renderMenu()}
      </span>
    `}async firstUpdated(t){var e;await((e=this.menu)===null||e===void 0?void 0:e.updateComplete),this.lastSelectedOptionRecords.length||this.initUserSelection(),this.lastSelectedOptionRecords.length||this.options.length||setTimeout(()=>{this.updateValueAndDisplayText()}),super.firstUpdated(t)}getRenderClasses(){return{disabled:this.disabled,error:this.error,open:this.open}}renderField(){const t=this.ariaLabel||this.label;return ft`
      <${this.fieldTag}
          aria-haspopup="listbox"
          role="combobox"
          part="field"
          id="field"
          tabindex=${this.disabled?"-1":"0"}
          aria-label=${t||S}
          aria-describedby="description"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="listbox"
          class="field"
          label=${this.label}
          ?no-asterisk=${this.noAsterisk}
          .focused=${this.focused||this.open}
          .populated=${!!this.displayText}
          .disabled=${this.disabled}
          .required=${this.required}
          .error=${this.hasError}
          ?has-start=${this.hasLeadingIcon}
          has-end
          supporting-text=${this.supportingText}
          error-text=${this.getErrorText()}
          @keydown=${this.handleKeydown}
          @click=${this.handleClick}>
         ${this.renderFieldContent()}
         <div id="description" slot="aria-describedby"></div>
      </${this.fieldTag}>`}renderFieldContent(){return[this.renderLeadingIcon(),this.renderLabel(),this.renderTrailingIcon()]}renderLeadingIcon(){return b`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return b`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}>
          <svg height="5" viewBox="7 10 10 5" focusable="false">
            <polygon
              class="down"
              stroke="none"
              fill-rule="evenodd"
              points="7 10 12 15 17 10"></polygon>
            <polygon
              class="up"
              stroke="none"
              fill-rule="evenodd"
              points="7 15 12 10 17 15"></polygon>
          </svg>
        </slot>
      </span>
    `}renderLabel(){return b`<div id="label">${this.displayText||b`&nbsp;`}</div>`}renderMenu(){const t=this.label||this.ariaLabel;return b`<div class="menu-wrapper">
      <md-menu
        id="listbox"
        .defaultFocus=${this.defaultFocus}
        role="listbox"
        tabindex="-1"
        aria-label=${t||S}
        stay-open-on-focusout
        part="menu"
        exportparts="focus-ring: menu-focus-ring"
        anchor="field"
        style=${vt({"--__menu-min-width":`${this.selectWidth}px`,"--__menu-max-width":this.clampMenuWidth?`${this.selectWidth}px`:void 0})}
        no-navigation-wrap
        .open=${this.open}
        .quick=${this.quick}
        .positioning=${this.menuPositioning}
        .typeaheadDelay=${this.typeaheadDelay}
        .anchorCorner=${this.menuAlign==="start"?"end-start":"end-end"}
        .menuCorner=${this.menuAlign==="start"?"start-start":"start-end"}
        @opening=${this.handleOpening}
        @opened=${this.redispatchEvent}
        @closing=${this.redispatchEvent}
        @closed=${this.handleClosed}
        @close-menu=${this.handleCloseMenu}
        @request-selection=${this.handleRequestSelection}
        @request-deselection=${this.handleRequestDeselection}>
        ${this.renderMenuContent()}
      </md-menu>
    </div>`}renderMenuContent(){return b`<slot></slot>`}handleKeydown(t){if(this.open||this.disabled||!this.menu)return;const e=this.menu.typeaheadController,r=t.code==="Space"||t.code==="ArrowDown"||t.code==="ArrowUp"||t.code==="End"||t.code==="Home"||t.code==="Enter";if(!e.isTypingAhead&&r){switch(t.preventDefault(),this.open=!0,t.code){case"Space":case"ArrowDown":case"Enter":this.defaultFocus=wt;break;case"End":this.defaultFocus=Ki;break;case"ArrowUp":case"Home":this.defaultFocus=ri}return}if(t.key.length===1){var o,a;e.onKeydown(t),t.preventDefault();const{lastActiveRecord:n}=e;if(!n)return;(o=this.labelEl)===null||o===void 0||(a=o.setAttribute)===null||a===void 0||a.call(o,"aria-live","polite"),this.selectItem(n[he])&&this.dispatchInteractionEvents()}}handleClick(){this.open=!this.open}handleFocus(){this.focused=!0}handleBlur(){this.focused=!1}handleFocusout(t){t.relatedTarget&&ii(t.relatedTarget,this)||(this.open=!1)}getSelectedOptions(){if(!this.menu)return this.lastSelectedOptionRecords=[],null;const t=this.menu.items;return this.lastSelectedOptionRecords=function(e){const r=[];for(let o=0;o<e.length;o++){const a=e[o];a.selected&&r.push([a,o])}return r}(t),this.lastSelectedOptionRecords}async getUpdateComplete(){var t;return await((t=this.menu)===null||t===void 0?void 0:t.updateComplete),super.getUpdateComplete()}updateValueAndDisplayText(){const t=this.getSelectedOptions()??[];let e=!1;if(t.length){const[r]=t[0];e=this.lastSelectedOption!==r,this.lastSelectedOption=r,this[Et]=r.value,this.displayText=r.displayText}else e=this.lastSelectedOption!==null,this.lastSelectedOption=null,this[Et]="",this.displayText="";return e}async handleOpening(t){var e,r,o;if((e=this.labelEl)===null||e===void 0||(r=e.removeAttribute)===null||r===void 0||r.call(e,"aria-live"),this.redispatchEvent(t),this.defaultFocus!==wt)return;const a=this.menu.items,n=(o=Ve(a))===null||o===void 0?void 0:o.item;let[s]=this.lastSelectedOptionRecords[0]??[null];n&&n!==s&&(n.tabIndex=-1),s=s??a[0],s&&(s.tabIndex=0,s.focus())}redispatchEvent(t){Si(this,t)}handleClosed(t){this.open=!1,this.redispatchEvent(t)}handleCloseMenu(t){const e=t.detail.reason,r=t.detail.itemPath[0];this.open=!1;let o=!1;var a;e.kind==="click-selection"||e.kind==="keydown"&&(a=e.key,Object.values(ti).some(n=>n===a))?o=this.selectItem(r):(r.tabIndex=-1,r.blur()),o&&this.dispatchInteractionEvents()}selectItem(t){return(this.getSelectedOptions()??[]).forEach(([e])=>{t!==e&&(e.selected=!1)}),t.selected=!0,this.updateValueAndDisplayText()}handleRequestSelection(t){const e=t.target;this.lastSelectedOptionRecords.some(([r])=>r===e)||this.selectItem(e)}handleRequestDeselection(t){const e=t.target;this.lastSelectedOptionRecords.some(([r])=>r===e)&&this.updateValueAndDisplayText()}initUserSelection(){this.lastUserSetValue&&!this.lastSelectedOptionRecords.length?this.select(this.lastUserSetValue):this.lastUserSetSelectedIndex===null||this.lastSelectedOptionRecords.length?this.updateValueAndDisplayText():this.selectIndex(this.lastUserSetSelectedIndex)}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0}dispatchInteractionEvents(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}getErrorText(){return this.error?this.errorText:this.nativeErrorText}[Be](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(t){this.value=t}click(){var t;(t=this.field)===null||t===void 0||t.click()}[We](){return new Vo(()=>this)}[Ze](){return this.field}}D.shadowRootOptions={...M.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean})],D.prototype,"quick",void 0),h([v({type:Boolean})],D.prototype,"required",void 0),h([v({type:String,attribute:"error-text"})],D.prototype,"errorText",void 0),h([v()],D.prototype,"label",void 0),h([v({type:Boolean,attribute:"no-asterisk"})],D.prototype,"noAsterisk",void 0),h([v({type:String,attribute:"supporting-text"})],D.prototype,"supportingText",void 0),h([v({type:Boolean,reflect:!0})],D.prototype,"error",void 0),h([v({attribute:"menu-positioning"})],D.prototype,"menuPositioning",void 0),h([v({type:Boolean,attribute:"clamp-menu-width"})],D.prototype,"clampMenuWidth",void 0),h([v({type:Number,attribute:"typeahead-delay"})],D.prototype,"typeaheadDelay",void 0),h([v({type:Boolean,attribute:"has-leading-icon"})],D.prototype,"hasLeadingIcon",void 0),h([v({attribute:"display-text"})],D.prototype,"displayText",void 0),h([v({attribute:"menu-align"})],D.prototype,"menuAlign",void 0),h([v()],D.prototype,"value",null),h([v({type:Number,attribute:"selected-index"})],D.prototype,"selectedIndex",null),h([O()],D.prototype,"nativeError",void 0),h([O()],D.prototype,"nativeErrorText",void 0),h([O()],D.prototype,"focused",void 0),h([O()],D.prototype,"open",void 0),h([O()],D.prototype,"defaultFocus",void 0),h([X(".field")],D.prototype,"field",void 0),h([X("md-menu")],D.prototype,"menu",void 0),h([X("#label")],D.prototype,"labelEl",void 0),h([Ce({slot:"leading-icon",flatten:!0})],D.prototype,"leadingIcons",void 0);class Zo extends D{constructor(){super(...arguments),this.fieldTag=_e`md-filled-field`}}const Go=N`:host{--_text-field-active-indicator-color: var(--md-filled-select-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-active-indicator-height: var(--md-filled-select-text-field-active-indicator-height, 1px);--_text-field-container-color: var(--md-filled-select-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_text-field-disabled-active-indicator-color: var(--md-filled-select-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-active-indicator-height: var(--md-filled-select-text-field-disabled-active-indicator-height, 1px);--_text-field-disabled-active-indicator-opacity: var(--md-filled-select-text-field-disabled-active-indicator-opacity, 0.38);--_text-field-disabled-container-color: var(--md-filled-select-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-container-opacity: var(--md-filled-select-text-field-disabled-container-opacity, 0.04);--_text-field-disabled-input-text-color: var(--md-filled-select-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-input-text-opacity: var(--md-filled-select-text-field-disabled-input-text-opacity, 0.38);--_text-field-disabled-label-text-color: var(--md-filled-select-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-label-text-opacity: var(--md-filled-select-text-field-disabled-label-text-opacity, 0.38);--_text-field-disabled-leading-icon-color: var(--md-filled-select-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-leading-icon-opacity: var(--md-filled-select-text-field-disabled-leading-icon-opacity, 0.38);--_text-field-disabled-supporting-text-color: var(--md-filled-select-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-supporting-text-opacity: var(--md-filled-select-text-field-disabled-supporting-text-opacity, 0.38);--_text-field-disabled-trailing-icon-color: var(--md-filled-select-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-trailing-icon-opacity: var(--md-filled-select-text-field-disabled-trailing-icon-opacity, 0.38);--_text-field-error-active-indicator-color: var(--md-filled-select-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-active-indicator-color: var(--md-filled-select-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-input-text-color: var(--md-filled-select-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-focus-label-text-color: var(--md-filled-select-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-leading-icon-color: var(--md-filled-select-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-focus-supporting-text-color: var(--md-filled-select-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-trailing-icon-color: var(--md-filled-select-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-active-indicator-color: var(--md-filled-select-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-input-text-color: var(--md-filled-select-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-label-text-color: var(--md-filled-select-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-leading-icon-color: var(--md-filled-select-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-hover-state-layer-color: var(--md-filled-select-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-state-layer-opacity: var(--md-filled-select-text-field-error-hover-state-layer-opacity, 0.08);--_text-field-error-hover-supporting-text-color: var(--md-filled-select-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-trailing-icon-color: var(--md-filled-select-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-input-text-color: var(--md-filled-select-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-label-text-color: var(--md-filled-select-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-leading-icon-color: var(--md-filled-select-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-supporting-text-color: var(--md-filled-select-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-trailing-icon-color: var(--md-filled-select-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-focus-active-indicator-color: var(--md-filled-select-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-active-indicator-height: var(--md-filled-select-text-field-focus-active-indicator-height, 3px);--_text-field-focus-input-text-color: var(--md-filled-select-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-focus-label-text-color: var(--md-filled-select-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-leading-icon-color: var(--md-filled-select-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-supporting-text-color: var(--md-filled-select-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-trailing-icon-color: var(--md-filled-select-text-field-focus-trailing-icon-color, var(--md-sys-color-primary, #6750a4));--_text-field-hover-active-indicator-color: var(--md-filled-select-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-active-indicator-height: var(--md-filled-select-text-field-hover-active-indicator-height, 1px);--_text-field-hover-input-text-color: var(--md-filled-select-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-label-text-color: var(--md-filled-select-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-leading-icon-color: var(--md-filled-select-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-state-layer-color: var(--md-filled-select-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-state-layer-opacity: var(--md-filled-select-text-field-hover-state-layer-opacity, 0.08);--_text-field-hover-supporting-text-color: var(--md-filled-select-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-trailing-icon-color: var(--md-filled-select-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-input-text-color: var(--md-filled-select-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-input-text-font: var(--md-filled-select-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-input-text-line-height: var(--md-filled-select-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-input-text-size: var(--md-filled-select-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-input-text-weight: var(--md-filled-select-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-label-text-color: var(--md-filled-select-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-label-text-font: var(--md-filled-select-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-label-text-line-height: var(--md-filled-select-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-label-text-populated-line-height: var(--md-filled-select-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-label-text-populated-size: var(--md-filled-select-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-label-text-size: var(--md-filled-select-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-label-text-weight: var(--md-filled-select-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-leading-icon-color: var(--md-filled-select-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-leading-icon-size: var(--md-filled-select-text-field-leading-icon-size, 24px);--_text-field-supporting-text-color: var(--md-filled-select-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-supporting-text-font: var(--md-filled-select-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-supporting-text-line-height: var(--md-filled-select-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-supporting-text-size: var(--md-filled-select-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-supporting-text-weight: var(--md-filled-select-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-trailing-icon-color: var(--md-filled-select-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-trailing-icon-size: var(--md-filled-select-text-field-trailing-icon-size, 24px);--_text-field-container-shape-start-start: var(--md-filled-select-text-field-container-shape-start-start, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-start-end: var(--md-filled-select-text-field-container-shape-start-end, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-end-end: var(--md-filled-select-text-field-container-shape-end-end, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_text-field-container-shape-end-start: var(--md-filled-select-text-field-container-shape-end-start, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--md-filled-field-active-indicator-color: var(--_text-field-active-indicator-color);--md-filled-field-active-indicator-height: var(--_text-field-active-indicator-height);--md-filled-field-container-color: var(--_text-field-container-color);--md-filled-field-container-shape-end-end: var(--_text-field-container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_text-field-container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_text-field-container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_text-field-container-shape-start-start);--md-filled-field-content-color: var(--_text-field-input-text-color);--md-filled-field-content-font: var(--_text-field-input-text-font);--md-filled-field-content-line-height: var(--_text-field-input-text-line-height);--md-filled-field-content-size: var(--_text-field-input-text-size);--md-filled-field-content-weight: var(--_text-field-input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_text-field-disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_text-field-disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_text-field-disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_text-field-disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_text-field-disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_text-field-disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_text-field-disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_text-field-disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_text-field-disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_text-field-disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_text-field-disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_text-field-disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_text-field-disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_text-field-disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_text-field-disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_text-field-error-active-indicator-color);--md-filled-field-error-content-color: var(--_text-field-error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_text-field-error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_text-field-error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_text-field-error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_text-field-error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_text-field-error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_text-field-error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_text-field-error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_text-field-error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_text-field-error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_text-field-error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_text-field-error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_text-field-error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_text-field-error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_text-field-error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_text-field-error-label-text-color);--md-filled-field-error-leading-content-color: var(--_text-field-error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_text-field-error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_text-field-error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_text-field-focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_text-field-focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_text-field-focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_text-field-focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_text-field-focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_text-field-focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_text-field-focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_text-field-hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_text-field-hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_text-field-hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_text-field-hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_text-field-hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_text-field-hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_text-field-hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_text-field-hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_text-field-hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_text-field-label-text-color);--md-filled-field-label-text-font: var(--_text-field-label-text-font);--md-filled-field-label-text-line-height: var(--_text-field-label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_text-field-label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_text-field-label-text-populated-size);--md-filled-field-label-text-size: var(--_text-field-label-text-size);--md-filled-field-label-text-weight: var(--_text-field-label-text-weight);--md-filled-field-leading-content-color: var(--_text-field-leading-icon-color);--md-filled-field-supporting-text-color: var(--_text-field-supporting-text-color);--md-filled-field-supporting-text-font: var(--_text-field-supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_text-field-supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_text-field-supporting-text-size);--md-filled-field-supporting-text-weight: var(--_text-field-supporting-text-weight);--md-filled-field-trailing-content-color: var(--_text-field-trailing-icon-color)}[has-start] .icon.leading{font-size:var(--_text-field-leading-icon-size);height:var(--_text-field-leading-icon-size);width:var(--_text-field-leading-icon-size)}.icon.trailing{font-size:var(--_text-field-trailing-icon-size);height:var(--_text-field-trailing-icon-size);width:var(--_text-field-trailing-icon-size)}
`,Ko=N`:host{color:unset;min-width:210px;display:flex}.field{cursor:default;outline:none}.select{position:relative;flex-direction:column}.icon.trailing svg,.icon ::slotted(*){fill:currentColor}.icon ::slotted(*){width:inherit;height:inherit;font-size:inherit}.icon slot{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.icon.trailing :is(.up,.down){opacity:0;transition:opacity 75ms linear 75ms}.select:not(.open) .down,.select.open .up{opacity:1}.field,.select,md-menu{min-width:inherit;width:inherit;max-width:inherit;display:flex}md-menu{min-width:var(--__menu-min-width);max-width:var(--__menu-max-width, inherit)}.menu-wrapper{width:0px;height:0px;max-width:inherit}md-menu ::slotted(:not[disabled]){cursor:pointer}.field,.select{width:100%}:host{display:inline-flex}:host([disabled]){pointer-events:none}
`;class Ji extends Zo{}Ji.styles=[Ko,Go],customElements.define("ew-filled-select",Ji);const jo=N`:host{display:flex;--md-ripple-hover-color: var(--md-menu-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-menu-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-menu-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-menu-item-pressed-state-layer-opacity, 0.12)}:host([disabled]){opacity:var(--md-menu-item-disabled-opacity, 0.3);pointer-events:none}md-focus-ring{z-index:1;--md-focus-ring-shape: 8px}a,button,li{background:none;border:none;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.list-item:not(.disabled){cursor:pointer}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;color:var(--md-menu-item-label-text-color, var(--md-sys-color-on-surface, #1d1b20));font-family:var(--md-menu-item-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));line-height:var(--md-menu-item-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));font-weight:var(--md-menu-item-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));min-height:var(--md-menu-item-one-line-container-height, 56px);padding-top:var(--md-menu-item-top-space, 12px);padding-bottom:var(--md-menu-item-bottom-space, 12px);padding-inline-start:var(--md-menu-item-leading-space, 16px);padding-inline-end:var(--md-menu-item-trailing-space, 16px)}md-item[multiline]{min-height:var(--md-menu-item-two-line-container-height, 72px)}[slot=supporting-text]{color:var(--md-menu-item-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-menu-item-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-menu-item-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)))}[slot=trailing-supporting-text]{color:var(--md-menu-item-trailing-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-trailing-supporting-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-trailing-supporting-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));line-height:var(--md-menu-item-trailing-supporting-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));font-weight:var(--md-menu-item-trailing-supporting-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-menu-item-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}[slot=end]{color:var(--md-menu-item-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}.list-item{background-color:var(--md-menu-item-container-color, transparent)}.list-item.selected{background-color:var(--md-menu-item-selected-container-color, var(--md-sys-color-secondary-container, #e8def8))}.selected:not(.disabled) ::slotted(*){color:var(--md-menu-item-selected-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b))}@media(forced-colors: active){:host([disabled]),:host([disabled]) slot{color:GrayText;opacity:1}.list-item{position:relative}.list-item.selected::before{content:"";position:absolute;inset:0;box-sizing:border-box;border-radius:inherit;pointer-events:none;border:3px double CanvasText}}
`;class Yo{constructor(t,e){this.host=t,this.internalTypeaheadText=null,this.onClick=()=>{this.host.keepOpen||this.host.dispatchEvent(Zi(this.host,{kind:Oo}))},this.onKeydown=r=>{if(this.host.href&&r.code==="Enter"){const a=this.getInteractiveElement();a instanceof HTMLAnchorElement&&a.click()}if(r.defaultPrevented)return;const o=r.code;this.host.keepOpen&&o!=="Escape"||Gi(o)&&(r.preventDefault(),this.host.dispatchEvent(Zi(this.host,{kind:Do,key:o})))},this.getHeadlineElements=e.getHeadlineElements,this.getSupportingTextElements=e.getSupportingTextElements,this.getDefaultElements=e.getDefaultElements,this.getInteractiveElement=e.getInteractiveElement,this.host.addController(this)}get typeaheadText(){if(this.internalTypeaheadText!==null)return this.internalTypeaheadText;const t=this.getHeadlineElements(),e=[];return t.forEach(r=>{r.textContent&&r.textContent.trim()&&e.push(r.textContent.trim())}),e.length===0&&this.getDefaultElements().forEach(r=>{r.textContent&&r.textContent.trim()&&e.push(r.textContent.trim())}),e.length===0&&this.getSupportingTextElements().forEach(r=>{r.textContent&&r.textContent.trim()&&e.push(r.textContent.trim())}),e.join(" ")}get tagName(){switch(this.host.type){case"link":return"a";case"button":return"button";default:return"li"}}get role(){return this.host.type==="option"?"option":"menuitem"}hostConnected(){this.host.toggleAttribute("md-menu-item",!0)}hostUpdate(){this.host.href&&(this.host.type="link")}setTypeaheadText(t){this.internalTypeaheadText=t}}class Xo{get role(){return this.menuItemController.role}get typeaheadText(){return this.menuItemController.typeaheadText}setTypeaheadText(t){this.menuItemController.setTypeaheadText(t)}get displayText(){return this.internalDisplayText!==null?this.internalDisplayText:this.menuItemController.typeaheadText}setDisplayText(t){this.internalDisplayText=t}constructor(t,e){this.host=t,this.internalDisplayText=null,this.firstUpdate=!0,this.onClick=()=>{this.menuItemController.onClick()},this.onKeydown=r=>{this.menuItemController.onKeydown(r)},this.lastSelected=this.host.selected,this.menuItemController=new Yo(t,e),t.addController(this)}hostUpdate(){this.lastSelected!==this.host.selected&&(this.host.ariaSelected=this.host.selected?"true":"false")}hostUpdated(){this.lastSelected===this.host.selected||this.firstUpdate||(this.host.selected?this.host.dispatchEvent(new Event("request-selection",{bubbles:!0,composed:!0})):this.host.dispatchEvent(new Event("request-deselection",{bubbles:!0,composed:!0}))),this.lastSelected=this.host.selected,this.firstUpdate=!1}}const Jo=ze(M);class J extends Jo{constructor(){super(...arguments),this.disabled=!1,this.isMenuItem=!0,this.selected=!1,this.value="",this.type="option",this.selectOptionController=new Xo(this,{getHeadlineElements:()=>this.headlineElements,getSupportingTextElements:()=>this.supportingTextElements,getDefaultElements:()=>this.defaultElements,getInteractiveElement:()=>this.listItemRoot})}get typeaheadText(){return this.selectOptionController.typeaheadText}set typeaheadText(t){this.selectOptionController.setTypeaheadText(t)}get displayText(){return this.selectOptionController.displayText}set displayText(t){this.selectOptionController.setDisplayText(t)}render(){return this.renderListItem(b`
      <md-item>
        <div slot="container">
          ${this.renderRipple()} ${this.renderFocusRing()}
        </div>
        <slot name="start" slot="start"></slot>
        <slot name="end" slot="end"></slot>
        ${this.renderBody()}
      </md-item>
    `)}renderListItem(t){return b`
      <li
        id="item"
        tabindex=${this.disabled?-1:0}
        role=${this.selectOptionController.role}
        aria-label=${this.ariaLabel||S}
        aria-selected=${this.ariaSelected||S}
        aria-checked=${this.ariaChecked||S}
        aria-expanded=${this.ariaExpanded||S}
        aria-haspopup=${this.ariaHasPopup||S}
        class="list-item ${re(this.getRenderClasses())}"
        @click=${this.selectOptionController.onClick}
        @keydown=${this.selectOptionController.onKeydown}
        >${t}</li
      >
    `}renderRipple(){return b` <md-ripple
      part="ripple"
      for="item"
      ?disabled=${this.disabled}></md-ripple>`}renderFocusRing(){return b` <md-focus-ring
      part="focus-ring"
      for="item"
      inward></md-focus-ring>`}getRenderClasses(){return{disabled:this.disabled,selected:this.selected}}renderBody(){return b`
      <slot></slot>
      <slot name="overline" slot="overline"></slot>
      <slot name="headline" slot="headline"></slot>
      <slot name="supporting-text" slot="supporting-text"></slot>
      <slot
        name="trailing-supporting-text"
        slot="trailing-supporting-text"></slot>
    `}focus(){var t;(t=this.listItemRoot)===null||t===void 0||t.focus()}}J.shadowRootOptions={...M.shadowRootOptions,delegatesFocus:!0},h([v({type:Boolean,reflect:!0})],J.prototype,"disabled",void 0),h([v({type:Boolean,attribute:"md-menu-item",reflect:!0})],J.prototype,"isMenuItem",void 0),h([v({type:Boolean})],J.prototype,"selected",void 0),h([v()],J.prototype,"value",void 0),h([X(".list-item")],J.prototype,"listItemRoot",void 0),h([Ce({slot:"headline"})],J.prototype,"headlineElements",void 0),h([Ce({slot:"supporting-text"})],J.prototype,"supportingTextElements",void 0),h([function(i){return(t,e)=>{const{slot:r}=i??{},o="slot"+(r?`[name=${r}]`:":not([name])");return Jr(t,e,{get(){var a;const n=(a=this.renderRoot)===null||a===void 0?void 0:a.querySelector(o);return(n==null?void 0:n.assignedNodes(i))??[]}})}}({slot:""})],J.prototype,"defaultElements",void 0),h([v({attribute:"typeahead-text"})],J.prototype,"typeaheadText",null),h([v({attribute:"display-text"})],J.prototype,"displayText",null);class Qi extends J{}Qi.styles=[jo],customElements.define("ew-select-option",Qi);const Qo=ze(M);class Ke extends Qo{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:t}=this;return b`
      <div
        class="progress ${re(this.getRenderClasses())}"
        role="progressbar"
        aria-label="${t||S}"
        aria-valuemin="0"
        aria-valuemax=${this.max}
        aria-valuenow=${this.indeterminate?S:this.value}
        >${this.renderIndicator()}</div
      >
    `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}h([v({type:Number})],Ke.prototype,"value",void 0),h([v({type:Number})],Ke.prototype,"max",void 0),h([v({type:Boolean})],Ke.prototype,"indeterminate",void 0),h([v({type:Boolean,attribute:"four-color"})],Ke.prototype,"fourColor",void 0);class ea extends Ke{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const t=100*(1-this.value/this.max);return b`
      <svg viewBox="0 0 4800 4800">
        <circle class="track" pathLength="100"></circle>
        <circle
          class="active-track"
          pathLength="100"
          stroke-dashoffset=${t}></circle>
      </svg>
    `}renderIndeterminateContainer(){return b` <div class="spinner">
      <div class="left">
        <div class="circle"></div>
      </div>
      <div class="right">
        <div class="circle"></div>
      </div>
    </div>`}}const ta=N`:host{--_active-indicator-color: var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width: var(--md-circular-progress-active-indicator-width, 10);--_four-color-active-indicator-four-color: var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size: var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;width:var(--_size);height:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.progress,.spinner,.left,.right,.circle,svg,.track,.active-track{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1568.2352941176ms}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) rgba(0,0,0,0) rgba(0,0,0,0);animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-666.5ms,0ms}@media(forced-colors: active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}
`;class er extends ea{}er.styles=[ta],customElements.define("ew-circular-progress",er);class kt extends M{render(){return b`
      <div>
        <ew-circular-progress
          active
          ?indeterminate=${this.progress===void 0}
          .value=${this.progress!==void 0?this.progress/100:void 0}
        ></ew-circular-progress>
        ${this.progress!==void 0?b`<div>${this.progress}%</div>`:""}
      </div>
      ${this.label}
    `}}kt.styles=N`
    :host {
      display: flex;
      flex-direction: column;
      text-align: center;
    }
    ew-circular-progress {
      margin-bottom: 16px;
    }
  `,h([v()],kt.prototype,"label",void 0),h([v()],kt.prototype,"progress",void 0),customElements.define("ewt-page-progress",kt);class St extends M{render(){return b`
      <div class="icon">${this.icon}</div>
      ${this.label}
    `}}St.styles=N`
    :host {
      display: flex;
      flex-direction: column;
      text-align: center;
    }
    .icon {
      font-size: 50px;
      line-height: 80px;
      color: black;
    }
  `,h([v()],St.prototype,"icon",void 0),h([v()],St.prototype,"label",void 0),customElements.define("ewt-page-message",St);const ia=ge`
  <svg width="24" height="24" viewBox="0 0 24 24">
    <path
      fill="currentColor"
      d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
    />
  </svg>
`,ra=ge`
  <svg viewBox="0 0 24 24">
    <path
      fill="currentColor"
      d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"
    />
  </svg>
`,tr=ge`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
  </svg>
`,oa=ge`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z" />
  </svg>
`,ir=ge`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M20,19V7H4V19H20M20,3A2,2 0 0,1 22,5V19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19V5C2,3.89 2.9,3 4,3H20M13,17V15H18V17H13M9.58,13L5.57,9H8.4L11.7,12.3C12.09,12.69 12.09,13.33 11.7,13.72L8.42,17H5.59L9.58,13Z" />
  </svg>
`,rr=ge`
  <svg slot="start" viewBox="0 0 24 24">
  <path d="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
  </svg>
`,or=ge`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="m12.151 1.5882c-.3262 0-.6523.1291-.8996.3867l-8.3848 8.7354c-.0619.0644-.1223.1368-.1807.2154-.0588.0789-.1151.1638-.1688.2534-.2593.4325-.4552.9749-.5232 1.4555-.0026.018-.0076.0369-.0094.0548-.0121.0987-.0184.1944-.0184.2857v8.0124a1.2731 1.2731 0 001.2731 1.2731h7.8313l-3.4484-3.593a1.7399 1.7399 0 111.0803-1.125l2.6847 2.7972v-10.248a1.7399 1.7399 0 111.5276-0v7.187l2.6702-2.782a1.7399 1.7399 0 111.0566 1.1505l-3.7269 3.8831v2.7299h8.174a1.2471 1.2471 0 001.2471-1.2471v-8.0375c0-.0912-.0059-.1868-.0184-.2855-.0603-.4935-.2636-1.0617-.5326-1.5105-.0537-.0896-.1101-.1745-.1684-.253-.0588-.079-.1191-.1513-.181-.2158l-8.3848-8.7363c-.2473-.2577-.5735-.3866-.8995-.3864" />
  </svg>
`,aa=ge`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M15,14C17.67,14 23,15.33 23,18V20H7V18C7,15.33 12.33,14 15,14M15,12A4,4 0 0,1 11,8A4,4 0 0,1 15,4A4,4 0 0,1 19,8A4,4 0 0,1 15,12M5,9.59L7.12,7.46L8.54,8.88L6.41,11L8.54,13.12L7.12,14.54L5,12.41L2.88,14.54L1.46,13.12L3.59,11L1.46,8.88L2.88,7.46L5,9.59Z" />
  </svg>
`,sa=ge`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z" />
  </svg>
`,na=[73,77,80,82,79,86,1];var Fe,xe;(function(i){i[i.CURRENT_STATE=1]="CURRENT_STATE",i[i.ERROR_STATE=2]="ERROR_STATE",i[i.RPC=3]="RPC",i[i.RPC_RESULT=4]="RPC_RESULT"})(Fe||(Fe={})),function(i){i[i.READY=2]="READY",i[i.PROVISIONING=3]="PROVISIONING",i[i.PROVISIONED=4]="PROVISIONED"}(xe||(xe={}));const la={0:"NO_ERROR",1:"INVALID_RPC_PACKET",2:"UNKNOWN_RPC_COMMAND",3:"UNABLE_TO_CONNECT",254:"TIMEOUT",255:"UNKNOWN_ERROR"};class ar extends Error{constructor(){super("Port is not ready")}}const sr=i=>"["+i.map(t=>((e,r=2)=>{let o=e.toString(16).toUpperCase();return o.startsWith("-")?"-0x"+o.substring(1).padStart(r,"0"):"0x"+o.padStart(r,"0")})(t)).join(", ")+"]";class da extends EventTarget{constructor(t,e){if(super(),this.port=t,this.logger=e,this.error=0,t.readable===null)throw new Error("Port is not readable");if(t.writable===null)throw new Error("Port is not writable")}async initialize(t=1e3){var e;if(this.logger.log("Initializing Improv Serial"),this._processInput(),await(e=1e3,new Promise(r=>setTimeout(r,e))),this._reader===void 0)throw new ar;try{await new Promise(async(r,o)=>{setTimeout(()=>o(new Error("Improv Wi-Fi Serial not detected")),t),await this.requestCurrentState(),r(void 0)}),await this.requestInfo()}catch(r){throw await this.close(),r}return this.info}async close(){this._reader&&await new Promise(t=>{this._reader.cancel(),this.addEventListener("disconnect",t,{once:!0})})}async requestCurrentState(){let t;try{await new Promise(async(r,o)=>{this.addEventListener("state-changed",r,{once:!0}),t=this._sendRPCWithResponse(2,[]),t.catch(a=>{this.removeEventListener("state-changed",r),o(a)})})}catch(r){throw this._rpcFeedback=void 0,new Error(`Error fetching current state: ${r}`)}if(this.state!==xe.PROVISIONED)return void(this._rpcFeedback=void 0);const e=await t;this.nextUrl=e[0]}async requestInfo(t){const e=await this._sendRPCWithResponse(3,[],t);this.info={firmware:e[0],version:e[1],name:e[3],chipFamily:e[2]}}async provision(t,e,r){const o=new TextEncoder,a=o.encode(t),n=o.encode(e),s=[a.length,...a,n.length,...n],c=await this._sendRPCWithResponse(1,s,r);this.nextUrl=c[0]}async scan(){const t=(await this._sendRPCWithMultipleResponses(4,[])).map(([e,r,o])=>({name:e,rssi:parseInt(r),secured:o==="YES"}));return t.sort((e,r)=>e.name.toLocaleLowerCase().localeCompare(r.name.toLocaleLowerCase())),t}_sendRPC(t,e){this.writePacketToStream(Fe.RPC,[t,e.length,...e])}async _sendRPCWithResponse(t,e,r){if(this._rpcFeedback)throw new Error("Only 1 RPC command that requires feedback can be active");return await this._awaitRPCResultWithTimeout(new Promise((o,a)=>{this._rpcFeedback={command:t,resolve:o,reject:a},this._sendRPC(t,e)}),r)}async _sendRPCWithMultipleResponses(t,e,r){if(this._rpcFeedback)throw new Error("Only 1 RPC command that requires feedback can be active");return await this._awaitRPCResultWithTimeout(new Promise((o,a)=>{this._rpcFeedback={command:t,resolve:o,reject:a,receivedData:[]},this._sendRPC(t,e)}),r)}async _awaitRPCResultWithTimeout(t,e){return e?await new Promise((r,o)=>{const a=setTimeout(()=>this._setError(254),e);t.finally(()=>clearTimeout(a)),t.then(r,o)}):await t}async _processInput(){this.logger.debug("Starting read loop"),this._reader=this.port.readable.getReader();try{let t,e=[],r=0;for(;;){const{value:o,done:a}=await this._reader.read();if(a)break;if(o&&o.length!==0)for(const n of o){if(t===!1){n===10&&(t=void 0);continue}if(t===!0){e.push(n),e.length===r&&(this._handleIncomingPacket(e),t=void 0,e=[]);continue}if(n===10){e=[];continue}if(e.push(n),e.length===9){if(t=String.fromCharCode(...e.slice(0,6))==="IMPROV",!t){e=[];continue}r=9+e[8]+1}}}}catch(t){this.logger.error("Error while reading serial port",t)}finally{this._reader.releaseLock(),this._reader=void 0}this.logger.debug("Finished read loop"),this.dispatchEvent(new Event("disconnect"))}_handleIncomingPacket(t){const e=t.slice(6),r=e[0],o=e[1],a=e[2],n=e.slice(3,3+a);if(this.logger.debug("PROCESS",{version:r,packetType:o,packetLength:a,data:sr(n)}),r!==1)return void this.logger.error("Received unsupported version",r);let s=e[3+a],c=0;for(let l=0;l<t.length-1;l++)c+=t[l];if(c&=255,c===s)if(o===Fe.CURRENT_STATE)this.state=n[0],this.dispatchEvent(new CustomEvent("state-changed",{detail:this.state}));else if(o===Fe.ERROR_STATE)this._setError(n[0]);else if(o===Fe.RPC_RESULT){if(!this._rpcFeedback)return void this.logger.error("Received result while not waiting for one");const l=n[0];if(l!==this._rpcFeedback.command)return void this.logger.error(`Received result for command ${l} but expected ${this._rpcFeedback.command}`);const d=[],f=n[1];let g=2;for(;g<2+f;)d.push(String.fromCodePoint(...n.slice(g+1,g+n[g]+1))),g+=n[g]+1;"receivedData"in this._rpcFeedback?d.length>0?this._rpcFeedback.receivedData.push(d):(this._rpcFeedback.resolve(this._rpcFeedback.receivedData),this._rpcFeedback=void 0):(this._rpcFeedback.resolve(d),this._rpcFeedback=void 0)}else this.logger.error("Unable to handle packet",e);else this.logger.error(`Received invalid checksum ${s}. Expected ${c}`)}async writePacketToStream(t,e){const r=new Uint8Array([...na,t,e.length,...e,0,0]);r[r.length-2]=255&r.reduce((a,n)=>a+n,0),r[r.length-1]=10,this.logger.debug("Writing to stream:",sr(new Array(...r)));const o=this.port.writable.getWriter();await o.write(r);try{o.releaseLock()}catch(a){console.error("Ignoring release lock error",a)}}_setError(t){this.error=t,t>0&&this._rpcFeedback&&(this._rpcFeedback.reject(la[t]||`UNKNOWN_ERROR (${t})`),this._rpcFeedback=void 0),this.dispatchEvent(new CustomEvent("error-changed",{detail:this.error}))}}class Z extends Error{}function Ue(i){let t=i.length;for(;--t>=0;)i[t]=0}const ai=256,nr=286,je=30,Ye=15,si=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),At=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ca=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),lr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pe=new Array(576);Ue(pe);const Xe=new Array(60);Ue(Xe);const Je=new Array(512);Ue(Je);const Qe=new Array(256);Ue(Qe);const ni=new Array(29);Ue(ni);const Tt=new Array(je);function li(i,t,e,r,o){this.static_tree=i,this.extra_bits=t,this.extra_base=e,this.elems=r,this.max_length=o,this.has_stree=i&&i.length}let dr,cr,hr;function di(i,t){this.dyn_tree=i,this.max_code=0,this.stat_desc=t}Ue(Tt);const pr=i=>i<256?Je[i]:Je[256+(i>>>7)],et=(i,t)=>{i.pending_buf[i.pending++]=255&t,i.pending_buf[i.pending++]=t>>>8&255},G=(i,t,e)=>{i.bi_valid>16-e?(i.bi_buf|=t<<i.bi_valid&65535,et(i,i.bi_buf),i.bi_buf=t>>16-i.bi_valid,i.bi_valid+=e-16):(i.bi_buf|=t<<i.bi_valid&65535,i.bi_valid+=e)},ae=(i,t,e)=>{G(i,e[2*t],e[2*t+1])},ur=(i,t)=>{let e=0;do e|=1&i,i>>>=1,e<<=1;while(--t>0);return e>>>1},fr=(i,t,e)=>{const r=new Array(16);let o,a,n=0;for(o=1;o<=Ye;o++)n=n+e[o-1]<<1,r[o]=n;for(a=0;a<=t;a++){let s=i[2*a+1];s!==0&&(i[2*a]=ur(r[s]++,s))}},mr=i=>{let t;for(t=0;t<nr;t++)i.dyn_ltree[2*t]=0;for(t=0;t<je;t++)i.dyn_dtree[2*t]=0;for(t=0;t<19;t++)i.bl_tree[2*t]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.sym_next=i.matches=0},vr=i=>{i.bi_valid>8?et(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},gr=(i,t,e,r)=>{const o=2*t,a=2*e;return i[o]<i[a]||i[o]===i[a]&&r[t]<=r[e]},ci=(i,t,e)=>{const r=i.heap[e];let o=e<<1;for(;o<=i.heap_len&&(o<i.heap_len&&gr(t,i.heap[o+1],i.heap[o],i.depth)&&o++,!gr(t,r,i.heap[o],i.depth));)i.heap[e]=i.heap[o],e=o,o<<=1;i.heap[e]=r},_r=(i,t,e)=>{let r,o,a,n,s=0;if(i.sym_next!==0)do r=255&i.pending_buf[i.sym_buf+s++],r+=(255&i.pending_buf[i.sym_buf+s++])<<8,o=i.pending_buf[i.sym_buf+s++],r===0?ae(i,o,t):(a=Qe[o],ae(i,a+ai+1,t),n=si[a],n!==0&&(o-=ni[a],G(i,o,n)),r--,a=pr(r),ae(i,a,e),n=At[a],n!==0&&(r-=Tt[a],G(i,r,n)));while(s<i.sym_next);ae(i,256,t)},hi=(i,t)=>{const e=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.elems;let n,s,c,l=-1;for(i.heap_len=0,i.heap_max=573,n=0;n<a;n++)e[2*n]!==0?(i.heap[++i.heap_len]=l=n,i.depth[n]=0):e[2*n+1]=0;for(;i.heap_len<2;)c=i.heap[++i.heap_len]=l<2?++l:0,e[2*c]=1,i.depth[c]=0,i.opt_len--,o&&(i.static_len-=r[2*c+1]);for(t.max_code=l,n=i.heap_len>>1;n>=1;n--)ci(i,e,n);c=a;do n=i.heap[1],i.heap[1]=i.heap[i.heap_len--],ci(i,e,1),s=i.heap[1],i.heap[--i.heap_max]=n,i.heap[--i.heap_max]=s,e[2*c]=e[2*n]+e[2*s],i.depth[c]=(i.depth[n]>=i.depth[s]?i.depth[n]:i.depth[s])+1,e[2*n+1]=e[2*s+1]=c,i.heap[1]=c++,ci(i,e,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],((d,f)=>{const g=f.dyn_tree,p=f.max_code,k=f.stat_desc.static_tree,u=f.stat_desc.has_stree,_=f.stat_desc.extra_bits,x=f.stat_desc.extra_base,E=f.stat_desc.max_length;let m,w,R,y,I,T,A=0;for(y=0;y<=Ye;y++)d.bl_count[y]=0;for(g[2*d.heap[d.heap_max]+1]=0,m=d.heap_max+1;m<573;m++)w=d.heap[m],y=g[2*g[2*w+1]+1]+1,y>E&&(y=E,A++),g[2*w+1]=y,w>p||(d.bl_count[y]++,I=0,w>=x&&(I=_[w-x]),T=g[2*w],d.opt_len+=T*(y+I),u&&(d.static_len+=T*(k[2*w+1]+I)));if(A!==0){do{for(y=E-1;d.bl_count[y]===0;)y--;d.bl_count[y]--,d.bl_count[y+1]+=2,d.bl_count[E]--,A-=2}while(A>0);for(y=E;y!==0;y--)for(w=d.bl_count[y];w!==0;)R=d.heap[--m],R>p||(g[2*R+1]!==y&&(d.opt_len+=(y-g[2*R+1])*g[2*R],g[2*R+1]=y),w--)}})(i,t),fr(e,l,i.bl_count)},br=(i,t,e)=>{let r,o,a=-1,n=t[1],s=0,c=7,l=4;for(n===0&&(c=138,l=3),t[2*(e+1)+1]=65535,r=0;r<=e;r++)o=n,n=t[2*(r+1)+1],++s<c&&o===n||(s<l?i.bl_tree[2*o]+=s:o!==0?(o!==a&&i.bl_tree[2*o]++,i.bl_tree[32]++):s<=10?i.bl_tree[34]++:i.bl_tree[36]++,s=0,a=o,n===0?(c=138,l=3):o===n?(c=6,l=3):(c=7,l=4))},yr=(i,t,e)=>{let r,o,a=-1,n=t[1],s=0,c=7,l=4;for(n===0&&(c=138,l=3),r=0;r<=e;r++)if(o=n,n=t[2*(r+1)+1],!(++s<c&&o===n)){if(s<l)do ae(i,o,i.bl_tree);while(--s!=0);else o!==0?(o!==a&&(ae(i,o,i.bl_tree),s--),ae(i,16,i.bl_tree),G(i,s-3,2)):s<=10?(ae(i,17,i.bl_tree),G(i,s-3,3)):(ae(i,18,i.bl_tree),G(i,s-11,7));s=0,a=o,n===0?(c=138,l=3):o===n?(c=6,l=3):(c=7,l=4)}};let xr=!1;const wr=(i,t,e,r)=>{G(i,0+(r?1:0),3),vr(i),et(i,e),et(i,~e),e&&i.pending_buf.set(i.window.subarray(t,t+e),i.pending),i.pending+=e};var ha=i=>{xr||((()=>{let t,e,r,o,a;const n=new Array(16);for(r=0,o=0;o<28;o++)for(ni[o]=r,t=0;t<1<<si[o];t++)Qe[r++]=o;for(Qe[r-1]=o,a=0,o=0;o<16;o++)for(Tt[o]=a,t=0;t<1<<At[o];t++)Je[a++]=o;for(a>>=7;o<je;o++)for(Tt[o]=a<<7,t=0;t<1<<At[o]-7;t++)Je[256+a++]=o;for(e=0;e<=Ye;e++)n[e]=0;for(t=0;t<=143;)pe[2*t+1]=8,t++,n[8]++;for(;t<=255;)pe[2*t+1]=9,t++,n[9]++;for(;t<=279;)pe[2*t+1]=7,t++,n[7]++;for(;t<=287;)pe[2*t+1]=8,t++,n[8]++;for(fr(pe,287,n),t=0;t<je;t++)Xe[2*t+1]=5,Xe[2*t]=ur(t,5);dr=new li(pe,si,257,nr,Ye),cr=new li(Xe,At,0,je,Ye),hr=new li(new Array(0),ca,0,19,7)})(),xr=!0),i.l_desc=new di(i.dyn_ltree,dr),i.d_desc=new di(i.dyn_dtree,cr),i.bl_desc=new di(i.bl_tree,hr),i.bi_buf=0,i.bi_valid=0,mr(i)},pa=(i,t,e,r)=>{let o,a,n=0;i.level>0?(i.strm.data_type===2&&(i.strm.data_type=(s=>{let c,l=4093624447;for(c=0;c<=31;c++,l>>>=1)if(1&l&&s.dyn_ltree[2*c]!==0)return 0;if(s.dyn_ltree[18]!==0||s.dyn_ltree[20]!==0||s.dyn_ltree[26]!==0)return 1;for(c=32;c<ai;c++)if(s.dyn_ltree[2*c]!==0)return 1;return 0})(i)),hi(i,i.l_desc),hi(i,i.d_desc),n=(s=>{let c;for(br(s,s.dyn_ltree,s.l_desc.max_code),br(s,s.dyn_dtree,s.d_desc.max_code),hi(s,s.bl_desc),c=18;c>=3&&s.bl_tree[2*lr[c]+1]===0;c--);return s.opt_len+=3*(c+1)+5+5+4,c})(i),o=i.opt_len+3+7>>>3,a=i.static_len+3+7>>>3,a<=o&&(o=a)):o=a=e+5,e+4<=o&&t!==-1?wr(i,t,e,r):i.strategy===4||a===o?(G(i,2+(r?1:0),3),_r(i,pe,Xe)):(G(i,4+(r?1:0),3),((s,c,l,d)=>{let f;for(G(s,c-257,5),G(s,l-1,5),G(s,d-4,4),f=0;f<d;f++)G(s,s.bl_tree[2*lr[f]+1],3);yr(s,s.dyn_ltree,c-1),yr(s,s.dyn_dtree,l-1)})(i,i.l_desc.max_code+1,i.d_desc.max_code+1,n+1),_r(i,i.dyn_ltree,i.dyn_dtree)),mr(i),r&&vr(i)},ua={_tr_init:ha,_tr_stored_block:wr,_tr_flush_block:pa,_tr_tally:(i,t,e)=>(i.pending_buf[i.sym_buf+i.sym_next++]=t,i.pending_buf[i.sym_buf+i.sym_next++]=t>>8,i.pending_buf[i.sym_buf+i.sym_next++]=e,t===0?i.dyn_ltree[2*e]++:(i.matches++,t--,i.dyn_ltree[2*(Qe[e]+ai+1)]++,i.dyn_dtree[2*pr(t)]++),i.sym_next===i.sym_end),_tr_align:i=>{G(i,2,3),ae(i,256,pe),(t=>{t.bi_valid===16?(et(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(i)}},tt=(i,t,e,r)=>{let o=65535&i|0,a=i>>>16&65535|0,n=0;for(;e!==0;){n=e>2e3?2e3:e,e-=n;do o=o+t[r++]|0,a=a+o|0;while(--n);o%=65521,a%=65521}return o|a<<16|0};const fa=new Uint32Array((()=>{let i,t=[];for(var e=0;e<256;e++){i=e;for(var r=0;r<8;r++)i=1&i?3988292384^i>>>1:i>>>1;t[e]=i}return t})());var H=(i,t,e,r)=>{const o=fa,a=r+e;i^=-1;for(let n=r;n<a;n++)i=i>>>8^o[255&(i^t[n])];return-1^i},Me={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ct={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ma,_tr_stored_block:pi,_tr_flush_block:va,_tr_tally:we,_tr_align:ga}=ua,{Z_NO_FLUSH:Ee,Z_PARTIAL_FLUSH:_a,Z_FULL_FLUSH:ba,Z_FINISH:Q,Z_BLOCK:Er,Z_OK:V,Z_STREAM_END:kr,Z_STREAM_ERROR:se,Z_DATA_ERROR:ya,Z_BUF_ERROR:ui,Z_DEFAULT_COMPRESSION:xa,Z_FILTERED:wa,Z_HUFFMAN_ONLY:Rt,Z_RLE:Ea,Z_FIXED:ka,Z_DEFAULT_STRATEGY:Sa,Z_UNKNOWN:Aa,Z_DEFLATED:It}=Ct,Re=258,ne=262,Ne=42,Ie=113,it=666,$e=(i,t)=>(i.msg=Me[t],t),Sr=i=>2*i-(i>4?9:0),ke=i=>{let t=i.length;for(;--t>=0;)i[t]=0},Ta=i=>{let t,e,r,o=i.w_size;t=i.hash_size,r=t;do e=i.head[--r],i.head[r]=e>=o?e-o:0;while(--t);t=o,r=t;do e=i.prev[--r],i.prev[r]=e>=o?e-o:0;while(--t)};let Se=(i,t,e)=>(t<<i.hash_shift^e)&i.hash_mask;const j=i=>{const t=i.state;let e=t.pending;e>i.avail_out&&(e=i.avail_out),e!==0&&(i.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),i.next_out),i.next_out+=e,t.pending_out+=e,i.total_out+=e,i.avail_out-=e,t.pending-=e,t.pending===0&&(t.pending_out=0))},Y=(i,t)=>{va(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,t),i.block_start=i.strstart,j(i.strm)},L=(i,t)=>{i.pending_buf[i.pending++]=t},rt=(i,t)=>{i.pending_buf[i.pending++]=t>>>8&255,i.pending_buf[i.pending++]=255&t},fi=(i,t,e,r)=>{let o=i.avail_in;return o>r&&(o=r),o===0?0:(i.avail_in-=o,t.set(i.input.subarray(i.next_in,i.next_in+o),e),i.state.wrap===1?i.adler=tt(i.adler,t,o,e):i.state.wrap===2&&(i.adler=H(i.adler,t,o,e)),i.next_in+=o,i.total_in+=o,o)},Ar=(i,t)=>{let e,r,o=i.max_chain_length,a=i.strstart,n=i.prev_length,s=i.nice_match;const c=i.strstart>i.w_size-ne?i.strstart-(i.w_size-ne):0,l=i.window,d=i.w_mask,f=i.prev,g=i.strstart+Re;let p=l[a+n-1],k=l[a+n];i.prev_length>=i.good_match&&(o>>=2),s>i.lookahead&&(s=i.lookahead);do if(e=t,l[e+n]===k&&l[e+n-1]===p&&l[e]===l[a]&&l[++e]===l[a+1]){a+=2,e++;do;while(l[++a]===l[++e]&&l[++a]===l[++e]&&l[++a]===l[++e]&&l[++a]===l[++e]&&l[++a]===l[++e]&&l[++a]===l[++e]&&l[++a]===l[++e]&&l[++a]===l[++e]&&a<g);if(r=Re-(g-a),a=g-Re,r>n){if(i.match_start=t,n=r,r>=s)break;p=l[a+n-1],k=l[a+n]}}while((t=f[t&d])>c&&--o!=0);return n<=i.lookahead?n:i.lookahead},He=i=>{const t=i.w_size;let e,r,o;do{if(r=i.window_size-i.lookahead-i.strstart,i.strstart>=t+(t-ne)&&(i.window.set(i.window.subarray(t,t+t-r),0),i.match_start-=t,i.strstart-=t,i.block_start-=t,i.insert>i.strstart&&(i.insert=i.strstart),Ta(i),r+=t),i.strm.avail_in===0)break;if(e=fi(i.strm,i.window,i.strstart+i.lookahead,r),i.lookahead+=e,i.lookahead+i.insert>=3)for(o=i.strstart-i.insert,i.ins_h=i.window[o],i.ins_h=Se(i,i.ins_h,i.window[o+1]);i.insert&&(i.ins_h=Se(i,i.ins_h,i.window[o+3-1]),i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<ne&&i.strm.avail_in!==0)},Tr=(i,t)=>{let e,r,o,a=i.pending_buf_size-5>i.w_size?i.w_size:i.pending_buf_size-5,n=0,s=i.strm.avail_in;do{if(e=65535,o=i.bi_valid+42>>3,i.strm.avail_out<o||(o=i.strm.avail_out-o,r=i.strstart-i.block_start,e>r+i.strm.avail_in&&(e=r+i.strm.avail_in),e>o&&(e=o),e<a&&(e===0&&t!==Q||t===Ee||e!==r+i.strm.avail_in)))break;n=t===Q&&e===r+i.strm.avail_in?1:0,pi(i,0,0,n),i.pending_buf[i.pending-4]=e,i.pending_buf[i.pending-3]=e>>8,i.pending_buf[i.pending-2]=~e,i.pending_buf[i.pending-1]=~e>>8,j(i.strm),r&&(r>e&&(r=e),i.strm.output.set(i.window.subarray(i.block_start,i.block_start+r),i.strm.next_out),i.strm.next_out+=r,i.strm.avail_out-=r,i.strm.total_out+=r,i.block_start+=r,e-=r),e&&(fi(i.strm,i.strm.output,i.strm.next_out,e),i.strm.next_out+=e,i.strm.avail_out-=e,i.strm.total_out+=e)}while(n===0);return s-=i.strm.avail_in,s&&(s>=i.w_size?(i.matches=2,i.window.set(i.strm.input.subarray(i.strm.next_in-i.w_size,i.strm.next_in),0),i.strstart=i.w_size,i.insert=i.strstart):(i.window_size-i.strstart<=s&&(i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,i.insert>i.strstart&&(i.insert=i.strstart)),i.window.set(i.strm.input.subarray(i.strm.next_in-s,i.strm.next_in),i.strstart),i.strstart+=s,i.insert+=s>i.w_size-i.insert?i.w_size-i.insert:s),i.block_start=i.strstart),i.high_water<i.strstart&&(i.high_water=i.strstart),n?4:t!==Ee&&t!==Q&&i.strm.avail_in===0&&i.strstart===i.block_start?2:(o=i.window_size-i.strstart,i.strm.avail_in>o&&i.block_start>=i.w_size&&(i.block_start-=i.w_size,i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,o+=i.w_size,i.insert>i.strstart&&(i.insert=i.strstart)),o>i.strm.avail_in&&(o=i.strm.avail_in),o&&(fi(i.strm,i.window,i.strstart,o),i.strstart+=o,i.insert+=o>i.w_size-i.insert?i.w_size-i.insert:o),i.high_water<i.strstart&&(i.high_water=i.strstart),o=i.bi_valid+42>>3,o=i.pending_buf_size-o>65535?65535:i.pending_buf_size-o,a=o>i.w_size?i.w_size:o,r=i.strstart-i.block_start,(r>=a||(r||t===Q)&&t!==Ee&&i.strm.avail_in===0&&r<=o)&&(e=r>o?o:r,n=t===Q&&i.strm.avail_in===0&&e===r?1:0,pi(i,i.block_start,e,n),i.block_start+=e,j(i.strm)),n?3:1)},mi=(i,t)=>{let e,r;for(;;){if(i.lookahead<ne){if(He(i),i.lookahead<ne&&t===Ee)return 1;if(i.lookahead===0)break}if(e=0,i.lookahead>=3&&(i.ins_h=Se(i,i.ins_h,i.window[i.strstart+3-1]),e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),e!==0&&i.strstart-e<=i.w_size-ne&&(i.match_length=Ar(i,e)),i.match_length>=3)if(r=we(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do i.strstart++,i.ins_h=Se(i,i.ins_h,i.window[i.strstart+3-1]),e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!=0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=Se(i,i.ins_h,i.window[i.strstart+1]);else r=we(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(r&&(Y(i,!1),i.strm.avail_out===0))return 1}return i.insert=i.strstart<2?i.strstart:2,t===Q?(Y(i,!0),i.strm.avail_out===0?3:4):i.sym_next&&(Y(i,!1),i.strm.avail_out===0)?1:2},qe=(i,t)=>{let e,r,o;for(;;){if(i.lookahead<ne){if(He(i),i.lookahead<ne&&t===Ee)return 1;if(i.lookahead===0)break}if(e=0,i.lookahead>=3&&(i.ins_h=Se(i,i.ins_h,i.window[i.strstart+3-1]),e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,e!==0&&i.prev_length<i.max_lazy_match&&i.strstart-e<=i.w_size-ne&&(i.match_length=Ar(i,e),i.match_length<=5&&(i.strategy===wa||i.match_length===3&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){o=i.strstart+i.lookahead-3,r=we(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=o&&(i.ins_h=Se(i,i.ins_h,i.window[i.strstart+3-1]),e=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!=0);if(i.match_available=0,i.match_length=2,i.strstart++,r&&(Y(i,!1),i.strm.avail_out===0))return 1}else if(i.match_available){if(r=we(i,0,i.window[i.strstart-1]),r&&Y(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(r=we(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,t===Q?(Y(i,!0),i.strm.avail_out===0?3:4):i.sym_next&&(Y(i,!1),i.strm.avail_out===0)?1:2};function le(i,t,e,r,o){this.good_length=i,this.max_lazy=t,this.nice_length=e,this.max_chain=r,this.func=o}const ot=[new le(0,0,0,0,Tr),new le(4,4,8,4,mi),new le(4,5,16,8,mi),new le(4,6,32,32,mi),new le(4,4,16,16,qe),new le(8,16,32,32,qe),new le(8,16,128,128,qe),new le(8,32,128,256,qe),new le(32,128,258,1024,qe),new le(32,258,258,4096,qe)];function Ca(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=It,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ke(this.dyn_ltree),ke(this.dyn_dtree),ke(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ke(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ke(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const at=i=>{if(!i)return 1;const t=i.state;return!t||t.strm!==i||t.status!==Ne&&t.status!==57&&t.status!==69&&t.status!==73&&t.status!==91&&t.status!==103&&t.status!==Ie&&t.status!==it?1:0},Cr=i=>{if(at(i))return $e(i,se);i.total_in=i.total_out=0,i.data_type=Aa;const t=i.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?57:t.wrap?Ne:Ie,i.adler=t.wrap===2?0:1,t.last_flush=-2,ma(t),V},Rr=i=>{const t=Cr(i);var e;return t===V&&((e=i.state).window_size=2*e.w_size,ke(e.head),e.max_lazy_match=ot[e.level].max_lazy,e.good_match=ot[e.level].good_length,e.nice_match=ot[e.level].nice_length,e.max_chain_length=ot[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t},Ir=(i,t,e,r,o,a)=>{if(!i)return se;let n=1;if(t===xa&&(t=6),r<0?(n=0,r=-r):r>15&&(n=2,r-=16),o<1||o>9||e!==It||r<8||r>15||t<0||t>9||a<0||a>ka||r===8&&n!==1)return $e(i,se);r===8&&(r=9);const s=new Ca;return i.state=s,s.strm=i,s.status=Ne,s.wrap=n,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=e,Rr(i)};var Ra=(i,t)=>{let e=t.length;if(at(i))return se;const r=i.state,o=r.wrap;if(o===2||o===1&&r.status!==Ne||r.lookahead)return se;if(o===1&&(i.adler=tt(i.adler,t,e,0)),r.wrap=0,e>=r.w_size){o===0&&(ke(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(t.subarray(e-r.w_size,e),0),t=c,e=r.w_size}const a=i.avail_in,n=i.next_in,s=i.input;for(i.avail_in=e,i.next_in=0,i.input=t,He(r);r.lookahead>=3;){let c=r.strstart,l=r.lookahead-2;do r.ins_h=Se(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=2,He(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,i.next_in=n,i.input=s,i.avail_in=a,r.wrap=o,V},st={deflateInit:(i,t)=>Ir(i,t,It,15,8,Sa),deflateInit2:Ir,deflateReset:Rr,deflateResetKeep:Cr,deflateSetHeader:(i,t)=>at(i)||i.state.wrap!==2?se:(i.state.gzhead=t,V),deflate:(i,t)=>{if(at(i)||t>Er||t<0)return i?$e(i,se):se;const e=i.state;if(!i.output||i.avail_in!==0&&!i.input||e.status===it&&t!==Q)return $e(i,i.avail_out===0?ui:se);const r=e.last_flush;if(e.last_flush=t,e.pending!==0){if(j(i),i.avail_out===0)return e.last_flush=-1,V}else if(i.avail_in===0&&Sr(t)<=Sr(r)&&t!==Q)return $e(i,ui);if(e.status===it&&i.avail_in!==0)return $e(i,ui);if(e.status===Ne&&e.wrap===0&&(e.status=Ie),e.status===Ne){let o=It+(e.w_bits-8<<4)<<8,a=-1;if(a=e.strategy>=Rt||e.level<2?0:e.level<6?1:e.level===6?2:3,o|=a<<6,e.strstart!==0&&(o|=32),o+=31-o%31,rt(e,o),e.strstart!==0&&(rt(e,i.adler>>>16),rt(e,65535&i.adler)),i.adler=1,e.status=Ie,j(i),e.pending!==0)return e.last_flush=-1,V}if(e.status===57){if(i.adler=0,L(e,31),L(e,139),L(e,8),e.gzhead)L(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),L(e,255&e.gzhead.time),L(e,e.gzhead.time>>8&255),L(e,e.gzhead.time>>16&255),L(e,e.gzhead.time>>24&255),L(e,e.level===9?2:e.strategy>=Rt||e.level<2?4:0),L(e,255&e.gzhead.os),e.gzhead.extra&&e.gzhead.extra.length&&(L(e,255&e.gzhead.extra.length),L(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(i.adler=H(i.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69;else if(L(e,0),L(e,0),L(e,0),L(e,0),L(e,0),L(e,e.level===9?2:e.strategy>=Rt||e.level<2?4:0),L(e,3),e.status=Ie,j(i),e.pending!==0)return e.last_flush=-1,V}if(e.status===69){if(e.gzhead.extra){let o=e.pending,a=(65535&e.gzhead.extra.length)-e.gzindex;for(;e.pending+a>e.pending_buf_size;){let s=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+s),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>o&&(i.adler=H(i.adler,e.pending_buf,e.pending-o,o)),e.gzindex+=s,j(i),e.pending!==0)return e.last_flush=-1,V;o=0,a-=s}let n=new Uint8Array(e.gzhead.extra);e.pending_buf.set(n.subarray(e.gzindex,e.gzindex+a),e.pending),e.pending+=a,e.gzhead.hcrc&&e.pending>o&&(i.adler=H(i.adler,e.pending_buf,e.pending-o,o)),e.gzindex=0}e.status=73}if(e.status===73){if(e.gzhead.name){let o,a=e.pending;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(i.adler=H(i.adler,e.pending_buf,e.pending-a,a)),j(i),e.pending!==0)return e.last_flush=-1,V;a=0}o=e.gzindex<e.gzhead.name.length?255&e.gzhead.name.charCodeAt(e.gzindex++):0,L(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>a&&(i.adler=H(i.adler,e.pending_buf,e.pending-a,a)),e.gzindex=0}e.status=91}if(e.status===91){if(e.gzhead.comment){let o,a=e.pending;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(i.adler=H(i.adler,e.pending_buf,e.pending-a,a)),j(i),e.pending!==0)return e.last_flush=-1,V;a=0}o=e.gzindex<e.gzhead.comment.length?255&e.gzhead.comment.charCodeAt(e.gzindex++):0,L(e,o)}while(o!==0);e.gzhead.hcrc&&e.pending>a&&(i.adler=H(i.adler,e.pending_buf,e.pending-a,a))}e.status=103}if(e.status===103){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(j(i),e.pending!==0))return e.last_flush=-1,V;L(e,255&i.adler),L(e,i.adler>>8&255),i.adler=0}if(e.status=Ie,j(i),e.pending!==0)return e.last_flush=-1,V}if(i.avail_in!==0||e.lookahead!==0||t!==Ee&&e.status!==it){let o=e.level===0?Tr(e,t):e.strategy===Rt?((a,n)=>{let s;for(;;){if(a.lookahead===0&&(He(a),a.lookahead===0)){if(n===Ee)return 1;break}if(a.match_length=0,s=we(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,s&&(Y(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,n===Q?(Y(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(Y(a,!1),a.strm.avail_out===0)?1:2})(e,t):e.strategy===Ea?((a,n)=>{let s,c,l,d;const f=a.window;for(;;){if(a.lookahead<=Re){if(He(a),a.lookahead<=Re&&n===Ee)return 1;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(l=a.strstart-1,c=f[l],c===f[++l]&&c===f[++l]&&c===f[++l])){d=a.strstart+Re;do;while(c===f[++l]&&c===f[++l]&&c===f[++l]&&c===f[++l]&&c===f[++l]&&c===f[++l]&&c===f[++l]&&c===f[++l]&&l<d);a.match_length=Re-(d-l),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(s=we(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(s=we(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),s&&(Y(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,n===Q?(Y(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(Y(a,!1),a.strm.avail_out===0)?1:2})(e,t):ot[e.level].func(e,t);if(o!==3&&o!==4||(e.status=it),o===1||o===3)return i.avail_out===0&&(e.last_flush=-1),V;if(o===2&&(t===_a?ga(e):t!==Er&&(pi(e,0,0,!1),t===ba&&(ke(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),j(i),i.avail_out===0))return e.last_flush=-1,V}return t!==Q?V:e.wrap<=0?kr:(e.wrap===2?(L(e,255&i.adler),L(e,i.adler>>8&255),L(e,i.adler>>16&255),L(e,i.adler>>24&255),L(e,255&i.total_in),L(e,i.total_in>>8&255),L(e,i.total_in>>16&255),L(e,i.total_in>>24&255)):(rt(e,i.adler>>>16),rt(e,65535&i.adler)),j(i),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?V:kr)},deflateEnd:i=>{if(at(i))return se;const t=i.state.status;return i.state=null,t===Ie?$e(i,ya):V},deflateSetDictionary:Ra,deflateInfo:"pako deflate (from Nodeca project)"};const Ia=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var $t={assign:function(i){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const r in e)Ia(e,r)&&(i[r]=e[r])}}return i},flattenChunks:i=>{let t=0;for(let r=0,o=i.length;r<o;r++)t+=i[r].length;const e=new Uint8Array(t);for(let r=0,o=0,a=i.length;r<a;r++){let n=i[r];e.set(n,o),o+=n.length}return e}};let $r=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$r=!1}const nt=new Uint8Array(256);for(let i=0;i<256;i++)nt[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;nt[254]=nt[254]=1;var lt={string2buf:i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let t,e,r,o,a,n=i.length,s=0;for(o=0;o<n;o++)e=i.charCodeAt(o),(64512&e)==55296&&o+1<n&&(r=i.charCodeAt(o+1),(64512&r)==56320&&(e=65536+(e-55296<<10)+(r-56320),o++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(s),a=0,o=0;a<s;o++)e=i.charCodeAt(o),(64512&e)==55296&&o+1<n&&(r=i.charCodeAt(o+1),(64512&r)==56320&&(e=65536+(e-55296<<10)+(r-56320),o++)),e<128?t[a++]=e:e<2048?(t[a++]=192|e>>>6,t[a++]=128|63&e):e<65536?(t[a++]=224|e>>>12,t[a++]=128|e>>>6&63,t[a++]=128|63&e):(t[a++]=240|e>>>18,t[a++]=128|e>>>12&63,t[a++]=128|e>>>6&63,t[a++]=128|63&e);return t},buf2string:(i,t)=>{const e=t||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,t));let r,o;const a=new Array(2*e);for(o=0,r=0;r<e;){let n=i[r++];if(n<128){a[o++]=n;continue}let s=nt[n];if(s>4)a[o++]=65533,r+=s-1;else{for(n&=s===2?31:s===3?15:7;s>1&&r<e;)n=n<<6|63&i[r++],s--;s>1?a[o++]=65533:n<65536?a[o++]=n:(n-=65536,a[o++]=55296|n>>10&1023,a[o++]=56320|1023&n)}}return((n,s)=>{if(s<65534&&n.subarray&&$r)return String.fromCharCode.apply(null,n.length===s?n:n.subarray(0,s));let c="";for(let l=0;l<s;l++)c+=String.fromCharCode(n[l]);return c})(a,o)},utf8border:(i,t)=>{(t=t||i.length)>i.length&&(t=i.length);let e=t-1;for(;e>=0&&(192&i[e])==128;)e--;return e<0||e===0?t:e+nt[i[e]]>t?e:t}},Lr=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Or=Object.prototype.toString,{Z_NO_FLUSH:$a,Z_SYNC_FLUSH:La,Z_FULL_FLUSH:Oa,Z_FINISH:Da,Z_OK:Lt,Z_STREAM_END:za,Z_DEFAULT_COMPRESSION:Pa,Z_DEFAULT_STRATEGY:Ba,Z_DEFLATED:Fa}=Ct;function Ot(i){this.options=$t.assign({level:Pa,method:Fa,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ba},i||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Lr,this.strm.avail_out=0;let e=st.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==Lt)throw new Error(Me[e]);if(t.header&&st.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(r=typeof t.dictionary=="string"?lt.string2buf(t.dictionary):Or.call(t.dictionary)==="[object ArrayBuffer]"?new Uint8Array(t.dictionary):t.dictionary,e=st.deflateSetDictionary(this.strm,r),e!==Lt)throw new Error(Me[e]);this._dict_set=!0}}Ot.prototype.push=function(i,t){const e=this.strm,r=this.options.chunkSize;let o,a;if(this.ended)return!1;for(a=t===~~t?t:t===!0?Da:$a,typeof i=="string"?e.input=lt.string2buf(i):Or.call(i)==="[object ArrayBuffer]"?e.input=new Uint8Array(i):e.input=i,e.next_in=0,e.avail_in=e.input.length;;)if(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),(a===La||a===Oa)&&e.avail_out<=6)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else{if(o=st.deflate(e,a),o===za)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),o=st.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Lt;if(e.avail_out!==0){if(a>0&&e.next_out>0)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else if(e.avail_in===0)break}else this.onData(e.output)}return!0},Ot.prototype.onData=function(i){this.chunks.push(i)},Ot.prototype.onEnd=function(i){i===Lt&&(this.result=$t.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var Ua={deflate:function(i,t){const e=new Ot(t);if(e.push(i,!0),e.err)throw e.msg||Me[e.err];return e.result}};const Dt=16209;var Ma=function(i,t){let e,r,o,a,n,s,c,l,d,f,g,p,k,u,_,x,E,m,w,R,y,I,T,A;const C=i.state;e=i.next_in,T=i.input,r=e+(i.avail_in-5),o=i.next_out,A=i.output,a=o-(t-i.avail_out),n=o+(i.avail_out-257),s=C.dmax,c=C.wsize,l=C.whave,d=C.wnext,f=C.window,g=C.hold,p=C.bits,k=C.lencode,u=C.distcode,_=(1<<C.lenbits)-1,x=(1<<C.distbits)-1;e:do{p<15&&(g+=T[e++]<<p,p+=8,g+=T[e++]<<p,p+=8),E=k[g&_];t:for(;;){if(m=E>>>24,g>>>=m,p-=m,m=E>>>16&255,m===0)A[o++]=65535&E;else{if(!(16&m)){if(!(64&m)){E=k[(65535&E)+(g&(1<<m)-1)];continue t}if(32&m){C.mode=16191;break e}i.msg="invalid literal/length code",C.mode=Dt;break e}w=65535&E,m&=15,m&&(p<m&&(g+=T[e++]<<p,p+=8),w+=g&(1<<m)-1,g>>>=m,p-=m),p<15&&(g+=T[e++]<<p,p+=8,g+=T[e++]<<p,p+=8),E=u[g&x];i:for(;;){if(m=E>>>24,g>>>=m,p-=m,m=E>>>16&255,!(16&m)){if(!(64&m)){E=u[(65535&E)+(g&(1<<m)-1)];continue i}i.msg="invalid distance code",C.mode=Dt;break e}if(R=65535&E,m&=15,p<m&&(g+=T[e++]<<p,p+=8,p<m&&(g+=T[e++]<<p,p+=8)),R+=g&(1<<m)-1,R>s){i.msg="invalid distance too far back",C.mode=Dt;break e}if(g>>>=m,p-=m,m=o-a,R>m){if(m=R-m,m>l&&C.sane){i.msg="invalid distance too far back",C.mode=Dt;break e}if(y=0,I=f,d===0){if(y+=c-m,m<w){w-=m;do A[o++]=f[y++];while(--m);y=o-R,I=A}}else if(d<m){if(y+=c+d-m,m-=d,m<w){w-=m;do A[o++]=f[y++];while(--m);if(y=0,d<w){m=d,w-=m;do A[o++]=f[y++];while(--m);y=o-R,I=A}}}else if(y+=d-m,m<w){w-=m;do A[o++]=f[y++];while(--m);y=o-R,I=A}for(;w>2;)A[o++]=I[y++],A[o++]=I[y++],A[o++]=I[y++],w-=3;w&&(A[o++]=I[y++],w>1&&(A[o++]=I[y++]))}else{y=o-R;do A[o++]=A[y++],A[o++]=A[y++],A[o++]=A[y++],w-=3;while(w>2);w&&(A[o++]=A[y++],w>1&&(A[o++]=A[y++]))}break}}break}}while(e<r&&o<n);w=p>>3,e-=w,p-=w<<3,g&=(1<<p)-1,i.next_in=e,i.next_out=o,i.avail_in=e<r?r-e+5:5-(e-r),i.avail_out=o<n?n-o+257:257-(o-n),C.hold=g,C.bits=p};const zt=15,Na=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ha=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),qa=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Va=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var dt=(i,t,e,r,o,a,n,s)=>{const c=s.bits;let l,d,f,g,p,k,u=0,_=0,x=0,E=0,m=0,w=0,R=0,y=0,I=0,T=0,A=null;const C=new Uint16Array(16),F=new Uint16Array(16);let Ae,Te,ie,De=null;for(u=0;u<=zt;u++)C[u]=0;for(_=0;_<r;_++)C[t[e+_]]++;for(m=c,E=zt;E>=1&&C[E]===0;E--);if(m>E&&(m=E),E===0)return o[a++]=20971520,o[a++]=20971520,s.bits=1,0;for(x=1;x<E&&C[x]===0;x++);for(m<x&&(m=x),y=1,u=1;u<=zt;u++)if(y<<=1,y-=C[u],y<0)return-1;if(y>0&&(i===0||E!==1))return-1;for(F[1]=0,u=1;u<zt;u++)F[u+1]=F[u]+C[u];for(_=0;_<r;_++)t[e+_]!==0&&(n[F[t[e+_]]++]=_);if(i===0?(A=De=n,k=20):i===1?(A=Na,De=Ha,k=257):(A=qa,De=Va,k=0),T=0,_=0,u=x,p=a,w=m,R=0,f=-1,I=1<<m,g=I-1,i===1&&I>852||i===2&&I>592)return 1;for(;;){Ae=u-R,n[_]+1<k?(Te=0,ie=n[_]):n[_]>=k?(Te=De[n[_]-k],ie=A[n[_]-k]):(Te=96,ie=0),l=1<<u-R,d=1<<w,x=d;do d-=l,o[p+(T>>R)+d]=Ae<<24|Te<<16|ie|0;while(d!==0);for(l=1<<u-1;T&l;)l>>=1;if(l!==0?(T&=l-1,T+=l):T=0,_++,--C[u]==0){if(u===E)break;u=t[e+n[_]]}if(u>m&&(T&g)!==f){for(R===0&&(R=m),p+=x,w=u-R,y=1<<w;w+R<E&&(y-=C[w+R],!(y<=0));)w++,y<<=1;if(I+=1<<w,i===1&&I>852||i===2&&I>592)return 1;f=T&g,o[f]=m<<24|w<<16|p-a|0}}return T!==0&&(o[p+T]=u-R<<24|64<<16|0),s.bits=m,0};const{Z_FINISH:Dr,Z_BLOCK:Wa,Z_TREES:Pt,Z_OK:Le,Z_STREAM_END:Za,Z_NEED_DICT:Ga,Z_STREAM_ERROR:ee,Z_DATA_ERROR:zr,Z_MEM_ERROR:Pr,Z_BUF_ERROR:Ka,Z_DEFLATED:Br}=Ct,Bt=16180,Ft=16190,ue=16191,vi=16192,gi=16194,Ut=16199,Mt=16200,_i=16206,z=16209,Fr=i=>(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24);function ja(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Oe=i=>{if(!i)return 1;const t=i.state;return!t||t.strm!==i||t.mode<Bt||t.mode>16211?1:0},Ur=i=>{if(Oe(i))return ee;const t=i.state;return i.total_in=i.total_out=t.total=0,i.msg="",t.wrap&&(i.adler=1&t.wrap),t.mode=Bt,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Le},Mr=i=>{if(Oe(i))return ee;const t=i.state;return t.wsize=0,t.whave=0,t.wnext=0,Ur(i)},Nr=(i,t)=>{let e;if(Oe(i))return ee;const r=i.state;return t<0?(e=0,t=-t):(e=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ee:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=e,r.wbits=t,Mr(i))},Hr=(i,t)=>{if(!i)return ee;const e=new ja;i.state=e,e.strm=i,e.window=null,e.mode=Bt;const r=Nr(i,t);return r!==Le&&(i.state=null),r};let bi,yi,qr=!0;const Ya=i=>{if(qr){bi=new Int32Array(512),yi=new Int32Array(32);let t=0;for(;t<144;)i.lens[t++]=8;for(;t<256;)i.lens[t++]=9;for(;t<280;)i.lens[t++]=7;for(;t<288;)i.lens[t++]=8;for(dt(1,i.lens,0,288,bi,0,i.work,{bits:9}),t=0;t<32;)i.lens[t++]=5;dt(2,i.lens,0,32,yi,0,i.work,{bits:5}),qr=!1}i.lencode=bi,i.lenbits=9,i.distcode=yi,i.distbits=5},Vr=(i,t,e,r)=>{let o;const a=i.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>r&&(o=r),a.window.set(t.subarray(e-r,e-r+o),a.wnext),(r-=o)?(a.window.set(t.subarray(e-r,e),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0};var Xa=(i,t)=>{let e,r,o,a,n,s,c,l,d,f,g,p,k,u,_,x,E,m,w,R,y,I,T=0;const A=new Uint8Array(4);let C,F;const Ae=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Oe(i)||!i.output||!i.input&&i.avail_in!==0)return ee;e=i.state,e.mode===ue&&(e.mode=vi),n=i.next_out,o=i.output,c=i.avail_out,a=i.next_in,r=i.input,s=i.avail_in,l=e.hold,d=e.bits,f=s,g=c,I=Le;e:for(;;)switch(e.mode){case Bt:if(e.wrap===0){e.mode=vi;break}for(;d<16;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if(2&e.wrap&&l===35615){e.wbits===0&&(e.wbits=15),e.check=0,A[0]=255&l,A[1]=l>>>8&255,e.check=H(e.check,A,2,0),l=0,d=0,e.mode=16181;break}if(e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&l)<<8)+(l>>8))%31){i.msg="incorrect header check",e.mode=z;break}if((15&l)!==Br){i.msg="unknown compression method",e.mode=z;break}if(l>>>=4,d-=4,y=8+(15&l),e.wbits===0&&(e.wbits=y),y>15||y>e.wbits){i.msg="invalid window size",e.mode=z;break}e.dmax=1<<e.wbits,e.flags=0,i.adler=e.check=1,e.mode=512&l?16189:ue,l=0,d=0;break;case 16181:for(;d<16;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if(e.flags=l,(255&e.flags)!==Br){i.msg="unknown compression method",e.mode=z;break}if(57344&e.flags){i.msg="unknown header flags set",e.mode=z;break}e.head&&(e.head.text=l>>8&1),512&e.flags&&4&e.wrap&&(A[0]=255&l,A[1]=l>>>8&255,e.check=H(e.check,A,2,0)),l=0,d=0,e.mode=16182;case 16182:for(;d<32;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}e.head&&(e.head.time=l),512&e.flags&&4&e.wrap&&(A[0]=255&l,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,e.check=H(e.check,A,4,0)),l=0,d=0,e.mode=16183;case 16183:for(;d<16;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}e.head&&(e.head.xflags=255&l,e.head.os=l>>8),512&e.flags&&4&e.wrap&&(A[0]=255&l,A[1]=l>>>8&255,e.check=H(e.check,A,2,0)),l=0,d=0,e.mode=16184;case 16184:if(1024&e.flags){for(;d<16;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}e.length=l,e.head&&(e.head.extra_len=l),512&e.flags&&4&e.wrap&&(A[0]=255&l,A[1]=l>>>8&255,e.check=H(e.check,A,2,0)),l=0,d=0}else e.head&&(e.head.extra=null);e.mode=16185;case 16185:if(1024&e.flags&&(p=e.length,p>s&&(p=s),p&&(e.head&&(y=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(r.subarray(a,a+p),y)),512&e.flags&&4&e.wrap&&(e.check=H(e.check,r,p,a)),s-=p,a+=p,e.length-=p),e.length))break e;e.length=0,e.mode=16186;case 16186:if(2048&e.flags){if(s===0)break e;p=0;do y=r[a+p++],e.head&&y&&e.length<65536&&(e.head.name+=String.fromCharCode(y));while(y&&p<s);if(512&e.flags&&4&e.wrap&&(e.check=H(e.check,r,p,a)),s-=p,a+=p,y)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=16187;case 16187:if(4096&e.flags){if(s===0)break e;p=0;do y=r[a+p++],e.head&&y&&e.length<65536&&(e.head.comment+=String.fromCharCode(y));while(y&&p<s);if(512&e.flags&&4&e.wrap&&(e.check=H(e.check,r,p,a)),s-=p,a+=p,y)break e}else e.head&&(e.head.comment=null);e.mode=16188;case 16188:if(512&e.flags){for(;d<16;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if(4&e.wrap&&l!==(65535&e.check)){i.msg="header crc mismatch",e.mode=z;break}l=0,d=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),i.adler=e.check=0,e.mode=ue;break;case 16189:for(;d<32;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}i.adler=e.check=Fr(l),l=0,d=0,e.mode=Ft;case Ft:if(e.havedict===0)return i.next_out=n,i.avail_out=c,i.next_in=a,i.avail_in=s,e.hold=l,e.bits=d,Ga;i.adler=e.check=1,e.mode=ue;case ue:if(t===Wa||t===Pt)break e;case vi:if(e.last){l>>>=7&d,d-=7&d,e.mode=_i;break}for(;d<3;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}switch(e.last=1&l,l>>>=1,d-=1,3&l){case 0:e.mode=16193;break;case 1:if(Ya(e),e.mode=Ut,t===Pt){l>>>=2,d-=2;break e}break;case 2:e.mode=16196;break;case 3:i.msg="invalid block type",e.mode=z}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){i.msg="invalid stored block lengths",e.mode=z;break}if(e.length=65535&l,l=0,d=0,e.mode=gi,t===Pt)break e;case gi:e.mode=16195;case 16195:if(p=e.length,p){if(p>s&&(p=s),p>c&&(p=c),p===0)break e;o.set(r.subarray(a,a+p),n),s-=p,a+=p,c-=p,n+=p,e.length-=p;break}e.mode=ue;break;case 16196:for(;d<14;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if(e.nlen=257+(31&l),l>>>=5,d-=5,e.ndist=1+(31&l),l>>>=5,d-=5,e.ncode=4+(15&l),l>>>=4,d-=4,e.nlen>286||e.ndist>30){i.msg="too many length or distance symbols",e.mode=z;break}e.have=0,e.mode=16197;case 16197:for(;e.have<e.ncode;){for(;d<3;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}e.lens[Ae[e.have++]]=7&l,l>>>=3,d-=3}for(;e.have<19;)e.lens[Ae[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,C={bits:e.lenbits},I=dt(0,e.lens,0,19,e.lencode,0,e.work,C),e.lenbits=C.bits,I){i.msg="invalid code lengths set",e.mode=z;break}e.have=0,e.mode=16198;case 16198:for(;e.have<e.nlen+e.ndist;){for(;T=e.lencode[l&(1<<e.lenbits)-1],_=T>>>24,x=T>>>16&255,E=65535&T,!(_<=d);){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if(E<16)l>>>=_,d-=_,e.lens[e.have++]=E;else{if(E===16){for(F=_+2;d<F;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if(l>>>=_,d-=_,e.have===0){i.msg="invalid bit length repeat",e.mode=z;break}y=e.lens[e.have-1],p=3+(3&l),l>>>=2,d-=2}else if(E===17){for(F=_+3;d<F;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}l>>>=_,d-=_,y=0,p=3+(7&l),l>>>=3,d-=3}else{for(F=_+7;d<F;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}l>>>=_,d-=_,y=0,p=11+(127&l),l>>>=7,d-=7}if(e.have+p>e.nlen+e.ndist){i.msg="invalid bit length repeat",e.mode=z;break}for(;p--;)e.lens[e.have++]=y}}if(e.mode===z)break;if(e.lens[256]===0){i.msg="invalid code -- missing end-of-block",e.mode=z;break}if(e.lenbits=9,C={bits:e.lenbits},I=dt(1,e.lens,0,e.nlen,e.lencode,0,e.work,C),e.lenbits=C.bits,I){i.msg="invalid literal/lengths set",e.mode=z;break}if(e.distbits=6,e.distcode=e.distdyn,C={bits:e.distbits},I=dt(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,C),e.distbits=C.bits,I){i.msg="invalid distances set",e.mode=z;break}if(e.mode=Ut,t===Pt)break e;case Ut:e.mode=Mt;case Mt:if(s>=6&&c>=258){i.next_out=n,i.avail_out=c,i.next_in=a,i.avail_in=s,e.hold=l,e.bits=d,Ma(i,g),n=i.next_out,o=i.output,c=i.avail_out,a=i.next_in,r=i.input,s=i.avail_in,l=e.hold,d=e.bits,e.mode===ue&&(e.back=-1);break}for(e.back=0;T=e.lencode[l&(1<<e.lenbits)-1],_=T>>>24,x=T>>>16&255,E=65535&T,!(_<=d);){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if(x&&!(240&x)){for(m=_,w=x,R=E;T=e.lencode[R+((l&(1<<m+w)-1)>>m)],_=T>>>24,x=T>>>16&255,E=65535&T,!(m+_<=d);){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}l>>>=m,d-=m,e.back+=m}if(l>>>=_,d-=_,e.back+=_,e.length=E,x===0){e.mode=16205;break}if(32&x){e.back=-1,e.mode=ue;break}if(64&x){i.msg="invalid literal/length code",e.mode=z;break}e.extra=15&x,e.mode=16201;case 16201:if(e.extra){for(F=e.extra;d<F;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}e.length+=l&(1<<e.extra)-1,l>>>=e.extra,d-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=16202;case 16202:for(;T=e.distcode[l&(1<<e.distbits)-1],_=T>>>24,x=T>>>16&255,E=65535&T,!(_<=d);){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if(!(240&x)){for(m=_,w=x,R=E;T=e.distcode[R+((l&(1<<m+w)-1)>>m)],_=T>>>24,x=T>>>16&255,E=65535&T,!(m+_<=d);){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}l>>>=m,d-=m,e.back+=m}if(l>>>=_,d-=_,e.back+=_,64&x){i.msg="invalid distance code",e.mode=z;break}e.offset=E,e.extra=15&x,e.mode=16203;case 16203:if(e.extra){for(F=e.extra;d<F;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}e.offset+=l&(1<<e.extra)-1,l>>>=e.extra,d-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){i.msg="invalid distance too far back",e.mode=z;break}e.mode=16204;case 16204:if(c===0)break e;if(p=g-c,e.offset>p){if(p=e.offset-p,p>e.whave&&e.sane){i.msg="invalid distance too far back",e.mode=z;break}p>e.wnext?(p-=e.wnext,k=e.wsize-p):k=e.wnext-p,p>e.length&&(p=e.length),u=e.window}else u=o,k=n-e.offset,p=e.length;p>c&&(p=c),c-=p,e.length-=p;do o[n++]=u[k++];while(--p);e.length===0&&(e.mode=Mt);break;case 16205:if(c===0)break e;o[n++]=e.length,c--,e.mode=Mt;break;case _i:if(e.wrap){for(;d<32;){if(s===0)break e;s--,l|=r[a++]<<d,d+=8}if(g-=c,i.total_out+=g,e.total+=g,4&e.wrap&&g&&(i.adler=e.check=e.flags?H(e.check,o,g,n-g):tt(e.check,o,g,n-g)),g=c,4&e.wrap&&(e.flags?l:Fr(l))!==e.check){i.msg="incorrect data check",e.mode=z;break}l=0,d=0}e.mode=16207;case 16207:if(e.wrap&&e.flags){for(;d<32;){if(s===0)break e;s--,l+=r[a++]<<d,d+=8}if(4&e.wrap&&l!==(4294967295&e.total)){i.msg="incorrect length check",e.mode=z;break}l=0,d=0}e.mode=16208;case 16208:I=Za;break e;case z:I=zr;break e;case 16210:return Pr;default:return ee}return i.next_out=n,i.avail_out=c,i.next_in=a,i.avail_in=s,e.hold=l,e.bits=d,(e.wsize||g!==i.avail_out&&e.mode<z&&(e.mode<_i||t!==Dr))&&Vr(i,i.output,i.next_out,g-i.avail_out),f-=i.avail_in,g-=i.avail_out,i.total_in+=f,i.total_out+=g,e.total+=g,4&e.wrap&&g&&(i.adler=e.check=e.flags?H(e.check,o,g,i.next_out-g):tt(e.check,o,g,i.next_out-g)),i.data_type=e.bits+(e.last?64:0)+(e.mode===ue?128:0)+(e.mode===Ut||e.mode===gi?256:0),(f===0&&g===0||t===Dr)&&I===Le&&(I=Ka),I},fe={inflateReset:Mr,inflateReset2:Nr,inflateResetKeep:Ur,inflateInit:i=>Hr(i,15),inflateInit2:Hr,inflate:Xa,inflateEnd:i=>{if(Oe(i))return ee;let t=i.state;return t.window&&(t.window=null),i.state=null,Le},inflateGetHeader:(i,t)=>{if(Oe(i))return ee;const e=i.state;return 2&e.wrap?(e.head=t,t.done=!1,Le):ee},inflateSetDictionary:(i,t)=>{const e=t.length;let r,o,a;return Oe(i)?ee:(r=i.state,r.wrap!==0&&r.mode!==Ft?ee:r.mode===Ft&&(o=1,o=tt(o,t,e,0),o!==r.check)?zr:(a=Vr(i,t,e,e),a?(r.mode=16210,Pr):(r.havedict=1,Le)))},inflateInfo:"pako inflate (from Nodeca project)"},Ja=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Wr=Object.prototype.toString,{Z_NO_FLUSH:Qa,Z_FINISH:es,Z_OK:ct,Z_STREAM_END:xi,Z_NEED_DICT:wi,Z_STREAM_ERROR:ts,Z_DATA_ERROR:Zr,Z_MEM_ERROR:is}=Ct;function Nt(i){this.options=$t.assign({chunkSize:65536,windowBits:15,to:""},i||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||i&&i.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Lr,this.strm.avail_out=0;let e=fe.inflateInit2(this.strm,t.windowBits);if(e!==ct)throw new Error(Me[e]);if(this.header=new Ja,fe.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=lt.string2buf(t.dictionary):Wr.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=fe.inflateSetDictionary(this.strm,t.dictionary),e!==ct)))throw new Error(Me[e])}Nt.prototype.push=function(i,t){const e=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let a,n,s;if(this.ended)return!1;for(n=t===~~t?t:t===!0?es:Qa,Wr.call(i)==="[object ArrayBuffer]"?e.input=new Uint8Array(i):e.input=i,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),a=fe.inflate(e,n),a===wi&&o&&(a=fe.inflateSetDictionary(e,o),a===ct?a=fe.inflate(e,n):a===Zr&&(a=wi));e.avail_in>0&&a===xi&&e.state.wrap>0&&i[e.next_in]!==0;)fe.inflateReset(e),a=fe.inflate(e,n);switch(a){case ts:case Zr:case wi:case is:return this.onEnd(a),this.ended=!0,!1}if(s=e.avail_out,e.next_out&&(e.avail_out===0||a===xi))if(this.options.to==="string"){let c=lt.utf8border(e.output,e.next_out),l=e.next_out-c,d=lt.buf2string(e.output,c);e.next_out=l,e.avail_out=r-l,l&&e.output.set(e.output.subarray(c,c+l),0),this.onData(d)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(a!==ct||s!==0){if(a===xi)return a=fe.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0},Nt.prototype.onData=function(i){this.chunks.push(i)},Nt.prototype.onEnd=function(i){i===ct&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=$t.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var rs={Inflate:Nt};const{deflate:os}=Ua,{Inflate:as}=rs;var Gr,Kr,ss=os,ns=as;class jr{constructor(t,e=!1,r=!0){this.device=t,this.tracing=e,this.slipReaderEnabled=!1,this.baudrate=0,this.traceLog="",this.lastTraceTime=Date.now(),this.buffer=new Uint8Array(0),this.SLIP_END=192,this.SLIP_ESC=219,this.SLIP_ESC_END=220,this.SLIP_ESC_ESC=221,this._DTR_state=!1,this.slipReaderEnabled=r}getInfo(){const t=this.device.getInfo();return t.usbVendorId&&t.usbProductId?`WebSerial VendorID 0x${t.usbVendorId.toString(16)} ProductID 0x${t.usbProductId.toString(16)}`:""}getPid(){return this.device.getInfo().usbProductId}trace(t){const e=`${`TRACE ${(Date.now()-this.lastTraceTime).toFixed(3)}`} ${t}`;console.log(e),this.traceLog+=e+`
`}async returnTrace(){try{await navigator.clipboard.writeText(this.traceLog),console.log("Text copied to clipboard!")}catch(t){console.error("Failed to copy text:",t)}}hexify(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("").padEnd(16," ")}hexConvert(t,e=!0){if(e&&t.length>16){let r="",o=t;for(;o.length>0;){const a=o.slice(0,16),n=String.fromCharCode(...a).split("").map(s=>s===" "||s>=" "&&s<="~"&&s!=="  "?s:".").join("");o=o.slice(16),r+=`
    ${this.hexify(a.slice(0,8))} ${this.hexify(a.slice(8))} | ${n}`}return r}return this.hexify(t)}slipWriter(t){const e=[];e.push(192);for(let r=0;r<t.length;r++)t[r]===219?e.push(219,221):t[r]===192?e.push(219,220):e.push(t[r]);return e.push(192),new Uint8Array(e)}async write(t){const e=this.slipWriter(t);if(this.device.writable){const r=this.device.writable.getWriter();this.tracing&&(console.log("Write bytes"),this.trace(`Write ${e.length} bytes: ${this.hexConvert(e)}`)),await r.write(e),r.releaseLock()}}appendArray(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}async*readLoop(t){if(this.reader)try{for(;;){const e=new Promise((n,s)=>setTimeout(()=>s(new Error("Read timeout exceeded")),t)),r=await Promise.race([this.reader.read(),e]);if(r===null)break;const{value:o,done:a}=r;if(a||!o)break;yield o}}catch(e){console.error("Error reading from serial port:",e)}finally{this.buffer=new Uint8Array(0)}}async newRead(t,e){if(this.buffer.length>=t){const o=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),o}for(;this.buffer.length<t;){const o=this.readLoop(e),{value:a,done:n}=await o.next();if(n||!a)break;this.buffer=this.appendArray(this.buffer,a)}const r=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),r}async flushInput(){var t;this.reader&&!await this.reader.closed&&(await this.reader.cancel(),this.reader.releaseLock(),this.reader=(t=this.device.readable)===null||t===void 0?void 0:t.getReader())}async flushOutput(){var t,e;this.buffer=new Uint8Array(0),await((t=this.device.writable)===null||t===void 0?void 0:t.getWriter().close()),(e=this.device.writable)===null||e===void 0||e.getWriter().releaseLock()}inWaiting(){return this.buffer.length}detectPanicHandler(t){const e=new TextDecoder("utf-8").decode(t),r=e.match(/G?uru Meditation Error: (?:Core \d panic'ed \(([a-zA-Z ]*)\))?/)||e.match(/F?atal exception \(\d+\): (?:([a-zA-Z ]*)?.*epc)?/);if(r){const o=r[1]||r[2];throw new Error("Guru Meditation Error detected"+(o?` (${o})`:""))}}async*read(t){var e;this.reader||(this.reader=(e=this.device.readable)===null||e===void 0?void 0:e.getReader());let r=null,o=!1,a=!1;for(;;){const n=this.inWaiting(),s=await this.newRead(n>0?n:1,t);if(!s||s.length===0){const l=r===null?a?"Serial data stream stopped: Possible serial noise or corruption.":"No serial data received.":"Packet content transfer stopped";throw this.trace(l),new Error(l)}this.trace(`Read ${s.length} bytes: ${this.hexConvert(s)}`);let c=0;for(;c<s.length;){const l=s[c++];if(r===null){if(l!==this.SLIP_END){this.trace(`Read invalid data: ${this.hexConvert(s)}`);const d=await this.newRead(this.inWaiting(),t);throw this.trace(`Remaining data in serial buffer: ${this.hexConvert(d)}`),this.detectPanicHandler(new Uint8Array([...s,...d||[]])),new Error(`Invalid head of packet (0x${l.toString(16)}): Possible serial noise or corruption.`)}r=new Uint8Array(0)}else if(o)if(o=!1,l===this.SLIP_ESC_END)r=this.appendArray(r,new Uint8Array([this.SLIP_END]));else{if(l!==this.SLIP_ESC_ESC){this.trace(`Read invalid data: ${this.hexConvert(s)}`);const d=await this.newRead(this.inWaiting(),t);throw this.trace(`Remaining data in serial buffer: ${this.hexConvert(d)}`),this.detectPanicHandler(new Uint8Array([...s,...d||[]])),new Error(`Invalid SLIP escape (0xdb, 0x${l.toString(16)})`)}r=this.appendArray(r,new Uint8Array([this.SLIP_ESC]))}else l===this.SLIP_ESC?o=!0:l===this.SLIP_END?(this.trace(`Received full packet: ${this.hexConvert(r)}`),this.buffer=this.appendArray(this.buffer,s.slice(c)),yield r,r=null,a=!0):r=this.appendArray(r,new Uint8Array([l]))}}}async*rawRead(){if(this.reader)try{for(;;){const{value:t,done:e}=await this.reader.read();if(e||!t)break;this.tracing&&(console.log("Raw Read bytes"),this.trace(`Read ${t.length} bytes: ${this.hexConvert(t)}`)),yield t}}catch(t){console.error("Error reading from serial port:",t)}finally{this.buffer=new Uint8Array(0)}}async setRTS(t){await this.device.setSignals({requestToSend:t}),await this.setDTR(this._DTR_state)}async setDTR(t){this._DTR_state=t,await this.device.setSignals({dataTerminalReady:t})}async connect(t=115200,e={}){var r;await this.device.open({baudRate:t,dataBits:e==null?void 0:e.dataBits,stopBits:e==null?void 0:e.stopBits,bufferSize:e==null?void 0:e.bufferSize,parity:e==null?void 0:e.parity,flowControl:e==null?void 0:e.flowControl}),this.baudrate=t,this.reader=(r=this.device.readable)===null||r===void 0?void 0:r.getReader()}async sleep(t){return new Promise(e=>setTimeout(e,t))}async waitForUnlock(t){for(;this.device.readable&&this.device.readable.locked||this.device.writable&&this.device.writable.locked;)await this.sleep(t)}async disconnect(){var t,e;!((t=this.device.readable)===null||t===void 0)&&t.locked&&await((e=this.reader)===null||e===void 0?void 0:e.cancel()),await this.waitForUnlock(400),await this.device.close(),this.reader=void 0}}function me(i){return new Promise(t=>setTimeout(t,i))}class ls{constructor(t,e){this.resetDelay=e,this.transport=t}async reset(){await this.transport.setDTR(!1),await this.transport.setRTS(!0),await me(100),await this.transport.setDTR(!0),await this.transport.setRTS(!1),await me(this.resetDelay),await this.transport.setDTR(!1)}}class ds{constructor(t){this.transport=t}async reset(){await this.transport.setRTS(!1),await this.transport.setDTR(!1),await me(100),await this.transport.setDTR(!0),await this.transport.setRTS(!1),await me(100),await this.transport.setRTS(!0),await this.transport.setDTR(!1),await this.transport.setRTS(!0),await me(100),await this.transport.setRTS(!1),await this.transport.setDTR(!1)}}class cs{constructor(t,e=!1){this.transport=t,this.usingUsbOtg=e,this.transport=t}async reset(){this.usingUsbOtg?(await me(200),await this.transport.setRTS(!1),await me(200)):(await me(100),await this.transport.setRTS(!1))}}class hs{constructor(t,e){this.transport=t,this.sequenceString=e,this.transport=t}async reset(){const t={D:async e=>await this.transport.setDTR(e),R:async e=>await this.transport.setRTS(e),W:async e=>await me(e)};try{if(!function(r){const o=["D","R","W"],a=r.split("|");for(const n of a){const s=n[0],c=n.slice(1);if(!o.includes(s))return!1;if(s==="D"||s==="R"){if(c!=="0"&&c!=="1")return!1}else if(s==="W"){const l=parseInt(c);if(isNaN(l)||l<=0)return!1}}return!0}(this.sequenceString))return;const e=this.sequenceString.split("|");for(const r of e){const o=r[0],a=r.slice(1);o==="W"?await t.W(Number(a)):o!=="D"&&o!=="R"||await t[o](a==="1")}}catch{throw new Error("Invalid custom reset sequence")}}}function ps(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var us=ps(Kr?Gr:(Kr=1,Gr=function(i){return atob(i)}));async function Yr(i){let t;switch(i){case"ESP32":t=await U(()=>import("./stub_flasher_32-BLbsWvxO-BLbsWvxO.js"),[]);break;case"ESP32-C2":t=await U(()=>import("./stub_flasher_32c2-wLQhZItC-wLQhZItC.js"),[]);break;case"ESP32-C3":t=await U(()=>import("./stub_flasher_32c3-DmSvHQKL-DmSvHQKL.js"),[]);break;case"ESP32-C5":t=await U(()=>import("./stub_flasher_32c5-BwEHy6UZ-BwEHy6UZ.js"),[]);break;case"ESP32-C6":t=await U(()=>import("./stub_flasher_32c6-ZuxjUVr4-ZuxjUVr4.js"),[]);break;case"ESP32-C61":t=await U(()=>import("./stub_flasher_32c61-DeKkw9vN-DeKkw9vN.js"),[]);break;case"ESP32-H2":t=await U(()=>import("./stub_flasher_32h2-CZ4EIL3w-CZ4EIL3w.js"),[]);break;case"ESP32-P4":t=await U(()=>import("./stub_flasher_32p4-BvuBbdjO-BvuBbdjO.js"),[]);break;case"ESP32-S2":t=await U(()=>import("./stub_flasher_32s2-CrsP1231-CrsP1231.js"),[]);break;case"ESP32-S3":t=await U(()=>import("./stub_flasher_32s3-CiJyd6Fk-CiJyd6Fk.js"),[]);break;case"ESP8266":t=await U(()=>import("./stub_flasher_8266-CQFcqJ_a-CQFcqJ_a.js"),[])}if(t)return{bss_start:t.bss_start,data:t.data,data_start:t.data_start,entry:t.entry,text:t.text,text_start:t.text_start,decodedData:Xr(t.data),decodedText:Xr(t.text)}}function Xr(i){const t=us(i).split("").map(function(e){return e.charCodeAt(0)});return new Uint8Array(t)}function fs(i,t,e=255){const r=i.length%t;if(r!==0){const o=new Uint8Array(t-r).fill(e),a=new Uint8Array(i.length+o.length);return a.set(i),a.set(o,i.length),a}return i}class ms{constructor(t){var e,r,o,a,n,s,c,l;this.ESP_RAM_BLOCK=6144,this.ESP_FLASH_BEGIN=2,this.ESP_FLASH_DATA=3,this.ESP_FLASH_END=4,this.ESP_MEM_BEGIN=5,this.ESP_MEM_END=6,this.ESP_MEM_DATA=7,this.ESP_WRITE_REG=9,this.ESP_READ_REG=10,this.ESP_SPI_ATTACH=13,this.ESP_CHANGE_BAUDRATE=15,this.ESP_FLASH_DEFL_BEGIN=16,this.ESP_FLASH_DEFL_DATA=17,this.ESP_FLASH_DEFL_END=18,this.ESP_SPI_FLASH_MD5=19,this.ESP_ERASE_FLASH=208,this.ESP_ERASE_REGION=209,this.ESP_READ_FLASH=210,this.ESP_RUN_USER_CODE=211,this.ESP_IMAGE_MAGIC=233,this.ESP_CHECKSUM_MAGIC=239,this.ROM_INVALID_RECV_MSG=5,this.DEFAULT_TIMEOUT=3e3,this.ERASE_REGION_TIMEOUT_PER_MB=3e4,this.ERASE_WRITE_TIMEOUT_PER_MB=4e4,this.MD5_TIMEOUT_PER_MB=8e3,this.CHIP_ERASE_TIMEOUT=12e4,this.FLASH_READ_TIMEOUT=1e5,this.MAX_TIMEOUT=2*this.CHIP_ERASE_TIMEOUT,this.CHIP_DETECT_MAGIC_REG_ADDR=1073745920,this.DETECTED_FLASH_SIZES={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB"},this.DETECTED_FLASH_SIZES_NUM={18:256,19:512,20:1024,21:2048,22:4096,23:8192,24:16384},this.USB_JTAG_SERIAL_PID=4097,this.romBaudrate=115200,this.debugLogging=!1,this.syncStubDetected=!1,this.flashSizeBytes=function(d){let f=-1;return d.indexOf("KB")!==-1?f=1024*parseInt(d.slice(0,d.indexOf("KB"))):d.indexOf("MB")!==-1&&(f=1024*parseInt(d.slice(0,d.indexOf("MB")))*1024),f},this.IS_STUB=!1,this.FLASH_WRITE_SIZE=16384,this.transport=t.transport,this.baudrate=t.baudrate,this.resetConstructors={classicReset:(d,f)=>new ls(d,f),customReset:(d,f)=>new hs(d,f),hardReset:(d,f)=>new cs(d,f),usbJTAGSerialReset:d=>new ds(d)},t.serialOptions&&(this.serialOptions=t.serialOptions),t.romBaudrate&&(this.romBaudrate=t.romBaudrate),t.terminal&&(this.terminal=t.terminal,this.terminal.clean()),t.debugLogging!==void 0&&(this.debugLogging=t.debugLogging),t.port&&(this.transport=new jr(t.port)),t.enableTracing!==void 0&&(this.transport.tracing=t.enableTracing),!((e=t.resetConstructors)===null||e===void 0)&&e.classicReset&&(this.resetConstructors.classicReset=(r=t.resetConstructors)===null||r===void 0?void 0:r.classicReset),!((o=t.resetConstructors)===null||o===void 0)&&o.customReset&&(this.resetConstructors.customReset=(a=t.resetConstructors)===null||a===void 0?void 0:a.customReset),!((n=t.resetConstructors)===null||n===void 0)&&n.hardReset&&(this.resetConstructors.hardReset=(s=t.resetConstructors)===null||s===void 0?void 0:s.hardReset),!((c=t.resetConstructors)===null||c===void 0)&&c.usbJTAGSerialReset&&(this.resetConstructors.usbJTAGSerialReset=(l=t.resetConstructors)===null||l===void 0?void 0:l.usbJTAGSerialReset),this.info("esptool.js"),this.info("Serial port "+this.transport.getInfo())}_sleep(t){return new Promise(e=>setTimeout(e,t))}write(t,e=!0){this.terminal?e?this.terminal.writeLine(t):this.terminal.write(t):console.log(t)}error(t,e=!0){this.write(`Error: ${t}`,e)}info(t,e=!0){this.write(t,e)}debug(t,e=!0){this.debugLogging&&this.write(`Debug: ${t}`,e)}_shortToBytearray(t){return new Uint8Array([255&t,t>>8&255])}_intToByteArray(t){return new Uint8Array([255&t,t>>8&255,t>>16&255,t>>24&255])}_byteArrayToShort(t,e){return t|e>>8}_byteArrayToInt(t,e,r,o){return t|e<<8|r<<16|o<<24}_appendBuffer(t,e){const r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t),0),r.set(new Uint8Array(e),t.byteLength),r.buffer}_appendArray(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t,0),r.set(e,t.length),r}ui8ToBstr(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}bstrToUi8(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}async flushInput(){try{await this.transport.flushInput()}catch(t){this.error(t.message)}}async readPacket(t=null,e=this.DEFAULT_TIMEOUT){for(let r=0;r<100;r++){const{value:o}=await this.transport.read(e).next();if(!o||o.length<8)continue;const a=o[0];if(a!==1)continue;const n=o[1],s=this._byteArrayToInt(o[4],o[5],o[6],o[7]),c=o.slice(8);if(a==1){if(t==null||n==t)return[s,c];if(c[0]!=0&&c[1]==this.ROM_INVALID_RECV_MSG)throw await this.flushInput(),new Z("unsupported command error")}}throw new Z("invalid response")}async command(t=null,e=new Uint8Array(0),r=0,o=!0,a=this.DEFAULT_TIMEOUT){if(t!=null){this.transport.tracing&&this.transport.trace(`command op:0x${t.toString(16).padStart(2,"0")} data len=${e.length} wait_response=${o?1:0} timeout=${(a/1e3).toFixed(3)} data=${this.transport.hexConvert(e)}`);const n=new Uint8Array(8+e.length);let s;for(n[0]=0,n[1]=t,n[2]=this._shortToBytearray(e.length)[0],n[3]=this._shortToBytearray(e.length)[1],n[4]=this._intToByteArray(r)[0],n[5]=this._intToByteArray(r)[1],n[6]=this._intToByteArray(r)[2],n[7]=this._intToByteArray(r)[3],s=0;s<e.length;s++)n[8+s]=e[s];await this.transport.write(n)}return o?this.readPacket(t,a):[0,new Uint8Array(0)]}async readReg(t,e=this.DEFAULT_TIMEOUT){const r=this._intToByteArray(t);return(await this.command(this.ESP_READ_REG,r,void 0,void 0,e))[0]}async writeReg(t,e,r=4294967295,o=0,a=0){let n=this._appendArray(this._intToByteArray(t),this._intToByteArray(e));n=this._appendArray(n,this._intToByteArray(r)),n=this._appendArray(n,this._intToByteArray(o)),a>0&&(n=this._appendArray(n,this._intToByteArray(this.chip.UART_DATE_REG_ADDR)),n=this._appendArray(n,this._intToByteArray(0)),n=this._appendArray(n,this._intToByteArray(0)),n=this._appendArray(n,this._intToByteArray(a))),await this.checkCommand("write target memory",this.ESP_WRITE_REG,n)}async sync(){this.debug("Sync");const t=new Uint8Array(36);let e;for(t[0]=7,t[1]=7,t[2]=18,t[3]=32,e=0;e<32;e++)t[4+e]=85;try{let r=await this.command(8,t,void 0,void 0,100);this.syncStubDetected=r[0]===0;for(let o=0;o<7;o++)r=await this.command(),this.syncStubDetected=this.syncStubDetected&&r[0]===0;return r}catch(r){throw this.debug("Sync err "+r),r}}async _connectAttempt(t="default_reset",e){this.debug("_connect_attempt "+t),e&&await e.reset();const r=this.transport.inWaiting(),o=await this.transport.newRead(r>0?r:1,this.DEFAULT_TIMEOUT),a=Array.from(o,d=>String.fromCharCode(d)).join("").match(/boot:(0x[0-9a-fA-F]+)(.*waiting for download)?/);let n=!1,s="",c=!1;a&&(n=!0,s=a[1],c=!!a[2]);let l="";for(let d=0;d<5;d++)try{this.debug(`Sync connect attempt ${d}`);const f=await this.sync();return this.debug(f[0].toString()),"success"}catch(f){this.debug(`Error at sync ${f}`),l=f instanceof Error?f.message:typeof f=="string"?f:JSON.stringify(f)}return n&&(l=`Wrong boot mode detected (${s}).
        This chip needs to be in download mode.`,c&&(l=`Download mode successfully detected, but getting no sync reply:
           The serial TX path seems to be down.`)),l}constructResetSequence(t){if(t!=="no_reset"){if(t==="usb_reset"||this.transport.getPid()===this.USB_JTAG_SERIAL_PID){if(this.resetConstructors.usbJTAGSerialReset)return this.debug("using USB JTAG Serial Reset"),[this.resetConstructors.usbJTAGSerialReset(this.transport)]}else if(this.resetConstructors.classicReset)return this.debug("using Classic Serial Reset"),[this.resetConstructors.classicReset(this.transport,50),this.resetConstructors.classicReset(this.transport,550)]}return[]}async connect(t="default_reset",e=7,r=!1){let o;this.info("Connecting...",!1),await this.transport.connect(this.romBaudrate,this.serialOptions);const a=this.constructResetSequence(t);for(let n=0;n<e;n++){const s=a.length>0?a[n%a.length]:null;if(o=await this._connectAttempt(t,s),o==="success")break}if(o!=="success")throw new Z("Failed to connect with the device");if(this.debug("Connect attempt successful."),this.info(`
\r`,!1),!r){const n=await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR)>>>0;this.debug("Chip Magic "+n.toString(16));const s=await async function(c){switch(c){case 15736195:{const{ESP32ROM:l}=await U(()=>import("./esp32-DlivVhIs-Bl9fHQaf.js"),__vite__mapDeps([0,1]));return new l}case 1867591791:case 2084675695:{const{ESP32C2ROM:l}=await U(()=>import("./esp32c2-B8k8_i-D-BO_QbRPT.js"),__vite__mapDeps([2,3,1]));return new l}case 1763790959:case 456216687:case 1216438383:case 1130455151:{const{ESP32C3ROM:l}=await U(()=>import("./esp32c3-CgdtzNJE-CaIATbJM.js"),__vite__mapDeps([3,1]));return new l}case 752910447:{const{ESP32C6ROM:l}=await U(()=>import("./esp32c6-C6rrFJso-2m7xm4Dl.js"),__vite__mapDeps([4,1]));return new l}case 606167151:case 871374959:case 1333878895:{const{ESP32C61ROM:l}=await U(()=>import("./esp32c61-BUPwzLDb-CP7ZGrdM.js"),__vite__mapDeps([5,4,1]));return new l}case 285294703:case 1675706479:{const{ESP32C5ROM:l}=await U(()=>import("./esp32c5-CFQToUlC-DBsQQp-S.js"),__vite__mapDeps([6,4,1]));return new l}case 3619110528:{const{ESP32H2ROM:l}=await U(()=>import("./esp32h2-IsK8MXMR-LFr8PPiW.js"),__vite__mapDeps([7,1]));return new l}case 9:{const{ESP32S3ROM:l}=await U(()=>import("./esp32s3-vxLttl29-Dn3XEpc8.js"),__vite__mapDeps([8,1]));return new l}case 1990:{const{ESP32S2ROM:l}=await U(()=>import("./esp32s2-Bl3uMkxu-BfjjNc2i.js"),__vite__mapDeps([9,1]));return new l}case 4293968129:{const{ESP8266ROM:l}=await U(()=>import("./esp8266-Dk4lBEaC-Bh23TS2k.js"),__vite__mapDeps([10,1]));return new l}case 0:case 182303440:case 117676761:{const{ESP32P4ROM:l}=await U(()=>import("./esp32p4-DD6i9EGh-DzB9VqkQ.js"),__vite__mapDeps([11,0,1]));return new l}default:return null}}(n);if(this.chip===null)throw new Z(`Unexpected CHIP magic value ${n}. Failed to autodetect chip type.`);this.chip=s}}async detectChip(t="default_reset"){await this.connect(t,this.romBaudrate),this.info("Detecting chip type... ",!1),this.chip!=null?this.info(this.chip.CHIP_NAME):this.info("unknown!")}async checkCommand(t="",e=null,r=new Uint8Array(0),o=0,a=this.DEFAULT_TIMEOUT){this.debug("check_command "+t);const n=await this.command(e,r,o,void 0,a);return n[1].length>4?n[1]:n[0]}async memBegin(t,e,r,o){if(this.IS_STUB){const n=o,s=o+t,c=await Yr(this.chip.CHIP_NAME);if(c){const l=[[c.bss_start||c.data_start,c.data_start+c.decodedData.length],[c.text_start,c.text_start+c.decodedText.length]];for(const[d,f]of l)if(n<f&&s>d)throw new Z(`Software loader is resident at 0x${d.toString(16).padStart(8,"0")}-0x${f.toString(16).padStart(8,"0")}.
            Can't load binary at overlapping address range 0x${n.toString(16).padStart(8,"0")}-0x${s.toString(16).padStart(8,"0")}.
            Either change binary loading address, or use the no-stub option to disable the software loader.`)}}this.debug("mem_begin "+t+" "+e+" "+r+" "+o.toString(16));let a=this._appendArray(this._intToByteArray(t),this._intToByteArray(e));a=this._appendArray(a,this._intToByteArray(r)),a=this._appendArray(a,this._intToByteArray(o)),await this.checkCommand("enter RAM download mode",this.ESP_MEM_BEGIN,a)}checksum(t,e=this.ESP_CHECKSUM_MAGIC){for(let r=0;r<t.length;r++)e^=t[r];return e}async memBlock(t,e){let r=this._appendArray(this._intToByteArray(t.length),this._intToByteArray(e));r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,t);const o=this.checksum(t);await this.checkCommand("write to target RAM",this.ESP_MEM_DATA,r,o)}async memFinish(t){const e=t===0?1:0,r=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));await this.checkCommand("leave RAM download mode",this.ESP_MEM_END,r,void 0,200)}async flashSpiAttach(t){const e=this._intToByteArray(t);await this.checkCommand("configure SPI flash pins",this.ESP_SPI_ATTACH,e)}timeoutPerMb(t,e){const r=t*(e/1e6);return r<3e3?3e3:r}async flashBegin(t,e){const r=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),o=this.chip.getEraseSize(e,t),a=new Date,n=a.getTime();let s=3e3;this.IS_STUB==0&&(s=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,t)),this.debug("flash begin "+o+" "+r+" "+this.FLASH_WRITE_SIZE+" "+e+" "+t);let c=this._appendArray(this._intToByteArray(o),this._intToByteArray(r));c=this._appendArray(c,this._intToByteArray(this.FLASH_WRITE_SIZE)),c=this._appendArray(c,this._intToByteArray(e)),this.IS_STUB==0&&(c=this._appendArray(c,this._intToByteArray(0))),await this.checkCommand("enter Flash download mode",this.ESP_FLASH_BEGIN,c,void 0,s);const l=a.getTime();return t!=0&&this.IS_STUB==0&&this.info("Took "+(l-n)/1e3+"."+(l-n)%1e3+"s to erase flash block"),r}async flashDeflBegin(t,e,r){const o=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),a=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),n=new Date,s=n.getTime();let c,l;this.IS_STUB?(c=t,l=this.DEFAULT_TIMEOUT):(c=a*this.FLASH_WRITE_SIZE,l=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,c)),this.info("Compressed "+t+" bytes to "+e+"...");let d=this._appendArray(this._intToByteArray(c),this._intToByteArray(o));d=this._appendArray(d,this._intToByteArray(this.FLASH_WRITE_SIZE)),d=this._appendArray(d,this._intToByteArray(r)),this.chip.CHIP_NAME!=="ESP32-S2"&&this.chip.CHIP_NAME!=="ESP32-S3"&&this.chip.CHIP_NAME!=="ESP32-C3"&&this.chip.CHIP_NAME!=="ESP32-C2"||this.IS_STUB!==!1||(d=this._appendArray(d,this._intToByteArray(0))),await this.checkCommand("enter compressed flash mode",this.ESP_FLASH_DEFL_BEGIN,d,void 0,l);const f=n.getTime();return t!=0&&this.IS_STUB===!1&&this.info("Took "+(f-s)/1e3+"."+(f-s)%1e3+"s to erase flash block"),o}async flashBlock(t,e,r){let o=this._appendArray(this._intToByteArray(t.length),this._intToByteArray(e));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,t);const a=this.checksum(t);await this.checkCommand("write to target Flash after seq "+e,this.ESP_FLASH_DATA,o,a,r)}async flashDeflBlock(t,e,r){let o=this._appendArray(this._intToByteArray(t.length),this._intToByteArray(e));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,t);const a=this.checksum(t);this.debug("flash_defl_block "+t[0].toString(16)+" "+t[1].toString(16)),await this.checkCommand("write compressed data to flash after seq "+e,this.ESP_FLASH_DEFL_DATA,o,a,r)}async flashFinish(t=!1){const e=t?0:1,r=this._intToByteArray(e);await this.checkCommand("leave Flash mode",this.ESP_FLASH_END,r)}async flashDeflFinish(t=!1){const e=t?0:1,r=this._intToByteArray(e);await this.checkCommand("leave compressed flash mode",this.ESP_FLASH_DEFL_END,r)}async runSpiflashCommand(t,e,r){const o=this.chip.SPI_REG_BASE,a=o+0,n=o+this.chip.SPI_USR_OFFS,s=o+this.chip.SPI_USR1_OFFS,c=o+this.chip.SPI_USR2_OFFS,l=o+this.chip.SPI_W0_OFFS;let d;d=this.chip.SPI_MOSI_DLEN_OFFS!=null?async(m,w)=>{const R=o+this.chip.SPI_MOSI_DLEN_OFFS,y=o+this.chip.SPI_MISO_DLEN_OFFS;m>0&&await this.writeReg(R,m-1),w>0&&await this.writeReg(y,w-1)}:async(m,w)=>{const R=s,y=(w===0?0:w-1)<<8|(m===0?0:m-1)<<17;await this.writeReg(R,y)};const f=1<<18;if(r>32)throw new Z("Reading more than 32 bits back from a SPI flash operation is unsupported");if(e.length>64)throw new Z("Writing more than 64 bytes of data with one SPI command is unsupported");const g=8*e.length,p=await this.readReg(n),k=await this.readReg(c);let u,_=1<<31;r>0&&(_|=268435456),g>0&&(_|=134217728),await d(g,r),await this.writeReg(n,_);let x=7<<28|t;if(await this.writeReg(c,x),g==0)await this.writeReg(l,0);else{if(e.length%4!=0){const w=new Uint8Array(e.length%4);e=this._appendArray(e,w)}let m=l;for(u=0;u<e.length-4;u+=4)x=this._byteArrayToInt(e[u],e[u+1],e[u+2],e[u+3]),await this.writeReg(m,x),m+=4}for(await this.writeReg(a,f),u=0;u<10&&(x=await this.readReg(a)&f,x!=0);u++);if(u===10)throw new Z("SPI command did not complete in time");const E=await this.readReg(l);return await this.writeReg(n,p),await this.writeReg(c,k),E}async readFlashId(){const t=new Uint8Array(0);return await this.runSpiflashCommand(159,t,24)}async eraseFlash(){this.info("Erasing flash (this may take a while)...");let t=new Date;const e=t.getTime(),r=await this.checkCommand("erase flash",this.ESP_ERASE_FLASH,void 0,void 0,this.CHIP_ERASE_TIMEOUT);t=new Date;const o=t.getTime();return this.info("Chip erase completed successfully in "+(o-e)/1e3+"s"),r}toHex(t){return Array.prototype.map.call(t,e=>("00"+e.toString(16)).slice(-2)).join("")}async flashMd5sum(t,e){const r=this.timeoutPerMb(this.MD5_TIMEOUT_PER_MB,e);let o=this._appendArray(this._intToByteArray(t),this._intToByteArray(e));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0));let a=await this.checkCommand("calculate md5sum",this.ESP_SPI_FLASH_MD5,o,void 0,r);return a instanceof Uint8Array&&a.length>16&&(a=a.slice(0,16)),this.toHex(a)}async readFlash(t,e,r=null){let o=this._appendArray(this._intToByteArray(t),this._intToByteArray(e));o=this._appendArray(o,this._intToByteArray(4096)),o=this._appendArray(o,this._intToByteArray(1024));const a=await this.checkCommand("read flash",this.ESP_READ_FLASH,o);if(a!=0)throw new Z("Failed to read memory: "+a);let n=new Uint8Array(0);for(;n.length<e;){const{value:s}=await this.transport.read(this.FLASH_READ_TIMEOUT).next();if(!(s instanceof Uint8Array))throw new Z("Failed to read memory: "+s);s.length>0&&(n=this._appendArray(n,s),await this.transport.write(this._intToByteArray(n.length)),r&&r(s,n.length,e))}return n}async runStub(){if(this.syncStubDetected)return this.info("Stub is already running. No upload is necessary."),this.chip;this.info("Uploading stub...");const t=await Yr(this.chip.CHIP_NAME);if(t===void 0)throw this.debug("Error loading Stub json"),new Error("Error loading Stub json");const e=[t.decodedText,t.decodedData];for(let a=0;a<e.length;a++)if(e[a]){const n=a===0?t.text_start:t.data_start,s=e[a].length,c=Math.floor((s+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK);await this.memBegin(s,c,this.ESP_RAM_BLOCK,n);for(let l=0;l<c;l++){const d=l*this.ESP_RAM_BLOCK,f=d+this.ESP_RAM_BLOCK;await this.memBlock(e[a].slice(d,f),l)}}this.info("Running stub..."),await this.memFinish(t.entry);const{value:r}=await this.transport.read(this.DEFAULT_TIMEOUT).next(),o=String.fromCharCode(...r);if(o!=="OHAI")throw new Z(`Failed to start stub. Unexpected response ${o}`);return this.info("Stub running..."),this.IS_STUB=!0,this.chip}async changeBaud(){this.info("Changing baudrate to "+this.baudrate);const t=this.IS_STUB?this.romBaudrate:0,e=this._appendArray(this._intToByteArray(this.baudrate),this._intToByteArray(t));await this.command(this.ESP_CHANGE_BAUDRATE,e),this.info("Changed"),await this.transport.disconnect(),await this._sleep(50),await this.transport.connect(this.baudrate,this.serialOptions)}async main(t="default_reset"){await this.detectChip(t);const e=await this.chip.getChipDescription(this);return this.info("Chip is "+e),this.info("Features: "+await this.chip.getChipFeatures(this)),this.info("Crystal is "+await this.chip.getCrystalFreq(this)+"MHz"),this.info("MAC: "+await this.chip.readMac(this)),await this.chip.readMac(this),this.chip.postConnect!==void 0&&await this.chip.postConnect(this),await this.runStub(),this.romBaudrate!==this.baudrate&&await this.changeBaud(),e}parseFlashSizeArg(t){if(this.chip.FLASH_SIZES[t]===void 0)throw new Z("Flash size "+t+" is not supported by this chip type. Supported sizes: "+this.chip.FLASH_SIZES);return this.chip.FLASH_SIZES[t]}_updateImageFlashParams(t,e,r,o,a){if(this.debug("_update_image_flash_params "+r+" "+o+" "+a),t.length<8||e!=this.chip.BOOTLOADER_FLASH_OFFSET)return t;if(r==="keep"&&o==="keep"&&a==="keep")return this.info("Not changing the image"),t;const n=parseInt(t[0]);let s=parseInt(t[2]);const c=parseInt(t[3]);if(n!==this.ESP_IMAGE_MAGIC)return this.info("Warning: Image file at 0x"+e.toString(16)+" doesn't look like an image file, so not changing any flash settings."),t;o!=="keep"&&(s={qio:0,qout:1,dio:2,dout:3}[o]);let l=15&c;a!=="keep"&&(l={"40m":0,"26m":1,"20m":2,"80m":15}[a]);let d=240&c;r!=="keep"&&(d=this.parseFlashSizeArg(r));const f=s<<8|l+d;return this.info("Flash params set to "+f.toString(16)),parseInt(t[2])!==s<<8&&(t=t.substring(0,2)+(s<<8).toString()+t.substring(3)),parseInt(t[3])!==l+d&&(t=t.substring(0,3)+(l+d).toString()+t.substring(4)),t}async writeFlash(t){if(this.debug("EspLoader program"),t.flashSize!=="keep"){const o=this.flashSizeBytes(t.flashSize);for(let a=0;a<t.fileArray.length;a++)if(t.fileArray[a].data.length+t.fileArray[a].address>o)throw new Z(`File ${a+1} doesn't fit in the available flash`)}let e,r;this.IS_STUB===!0&&t.eraseAll===!0&&await this.eraseFlash();for(let o=0;o<t.fileArray.length;o++){if(this.debug("Data Length "+t.fileArray[o].data.length),e=t.fileArray[o].data,this.debug("Image Length "+e.length),e.length===0){this.debug("Warning: File is empty");continue}e=this.ui8ToBstr(fs(this.bstrToUi8(e),4)),r=t.fileArray[o].address,e=this._updateImageFlashParams(e,r,t.flashSize,t.flashMode,t.flashFreq);let a=null;t.calculateMD5Hash&&(a=t.calculateMD5Hash(e),this.debug("Image MD5 "+a));const n=e.length;let s;if(t.compress){const x=this.bstrToUi8(e);e=this.ui8ToBstr(ss(x,{level:9})),s=await this.flashDeflBegin(n,e.length,r)}else s=await this.flashBegin(n,r);let c=0,l=0;const d=e.length;t.reportProgress&&t.reportProgress(o,0,d);let f=new Date;const g=f.getTime();let p=5e3;const k=new ns({chunkSize:1});let u=0;for(k.onData=function(x){u+=x.byteLength};e.length>0;){this.debug("Write loop "+r+" "+c+" "+s),this.info("Writing at 0x"+(r+u).toString(16)+"... ("+Math.floor(100*(c+1)/s)+"%)");const x=this.bstrToUi8(e.slice(0,this.FLASH_WRITE_SIZE));if(!t.compress)throw new Z("Yet to handle Non Compressed writes");{const E=u;k.push(x,!1);const m=u-E;let w=3e3;this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,m)>3e3&&(w=this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,m)),this.IS_STUB===!1&&(p=w),await this.flashDeflBlock(x,c,p),this.IS_STUB&&(p=w)}l+=x.length,e=e.slice(this.FLASH_WRITE_SIZE,e.length),c++,t.reportProgress&&t.reportProgress(o,l,d)}this.IS_STUB&&await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR,p),f=new Date;const _=f.getTime()-g;if(t.compress&&this.info("Wrote "+n+" bytes ("+l+" compressed) at 0x"+r.toString(16)+" in "+_/1e3+" seconds."),a){const x=await this.flashMd5sum(r,n);if(new String(x).valueOf()!=new String(a).valueOf())throw this.info("File  md5: "+a),this.info("Flash md5: "+x),new Z("MD5 of file does not match data in flash!");this.info("Hash of data verified.")}}this.info("Leaving..."),this.IS_STUB&&(await this.flashBegin(0,0),t.compress?await this.flashDeflFinish():await this.flashFinish())}async flashId(){this.debug("flash_id");const t=await this.readFlashId();this.info("Manufacturer: "+(255&t).toString(16));const e=t>>16&255;this.info("Device: "+(t>>8&255).toString(16)+e.toString(16)),this.info("Detected flash size: "+this.DETECTED_FLASH_SIZES[e])}async getFlashSize(){this.debug("flash_id");const t=await this.readFlashId()>>16&255;return this.DETECTED_FLASH_SIZES_NUM[t]}async softReset(t){if(this.IS_STUB){if(this.chip.CHIP_NAME!="ESP8266")throw new Z("Soft resetting is currently only supported on ESP8266");t?(await this.flashBegin(0,0),await this.flashFinish(!0)):await this.command(this.ESP_RUN_USER_CODE,void 0,void 0,!1)}else{if(t)return;await this.flashBegin(0,0),await this.flashFinish(!1)}}async after(t="hard_reset",e){switch(t){case"hard_reset":this.resetConstructors.hardReset&&(this.info("Hard resetting via RTS pin..."),await this.resetConstructors.hardReset(this.transport,e).reset());break;case"soft_reset":this.info("Soft resetting..."),await this.softReset(!1);break;case"no_reset_stub":this.info("Staying in flasher stub.");break;default:this.info("Staying in bootloader."),this.IS_STUB&&this.softReset(!0)}}}const ht=async i=>{console.log("Triggering reset"),await i.device.setSignals({dataTerminalReady:!1,requestToSend:!0}),await ye(250),await i.device.setSignals({dataTerminalReady:!1,requestToSend:!1}),await ye(250),await new Promise(t=>setTimeout(t,1e3))},vs=(i,t="")=>{const e=new Blob([i],{type:"text/plain"}),r=URL.createObjectURL(e);((o,a="")=>{const n=document.createElement("a");n.target="_blank",n.href=o,n.download=a,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click")),document.body.removeChild(n)})(r,t),setTimeout(()=>URL.revokeObjectURL(r),0)};console.log("ESP Web Tools 10.1.1 by Open Home Foundation; https://esphome.github.io/esp-web-tools/"),K=class extends M{constructor(){super(...arguments),this.logger=console,this._state="DASHBOARD",this._installErase=!1,this._installConfirmed=!1,this._provisionForce=!1,this._wasProvisioned=!1,this._busy=!1,this._selectedSsid=null,this._bodyOverflow=null,this._handleDisconnect=()=>{this._state="ERROR",this._error="Disconnected"}}render(){if(!this.port)return b``;let i,t,e=!1;return this._client===void 0&&this._state!=="INSTALL"&&this._state!=="LOGS"?this._error?[i,t]=this._renderError(this._error):t=this._renderProgress("Connecting"):this._state==="INSTALL"?[i,t,e]=this._renderInstall():this._state==="ASK_ERASE"?[i,t]=this._renderAskErase():this._state==="ERROR"?[i,t]=this._renderError(this._error):this._state==="DASHBOARD"?[i,t,e]=this._client?this._renderDashboard():this._renderDashboardNoImprov():this._state==="PROVISION"?[i,t]=this._renderProvision():this._state==="LOGS"&&([i,t]=this._renderLogs()),b`
      <ew-dialog
        open
        .heading=${i}
        @cancel=${this._preventDefault}
        @closed=${this._handleClose}
      >
        ${i?b`<div slot="headline">${i}</div>`:""}
        ${e?b`
              <ew-icon-button slot="headline" @click=${this._closeDialog}>
                ${ia}
              </ew-icon-button>
            `:""}
        ${t}
      </ew-dialog>
    `}_renderProgress(i,t){return b`
      <ewt-page-progress
        slot="content"
        .label=${i}
        .progress=${t}
      ></ewt-page-progress>
    `}_renderError(i){return["Error",b`
      <ewt-page-message
        slot="content"
        .icon=${"\u26A0\uFE0F"}
        .label=${i}
      ></ewt-page-message>
      <div slot="actions">
        <ew-text-button @click=${this._closeDialog}>Close</ew-text-button>
      </div>
    `]}_renderDashboard(){const i=this._manifest.name;let t;return t=b`
      <div slot="content">
        <ew-list>
          <ew-list-item>
            <div slot="headline">Connected to ${this._info.name}</div>
            <div slot="supporting-text">
              ${this._info.firmware}&nbsp;${this._info.version}
              (${this._info.chipFamily})
            </div>
          </ew-list-item>
          ${this._isSameVersion?"":b`
                <ew-list-item
                  type="button"
                  @click=${()=>{this._isSameFirmware?this._startInstall(!1):this._manifest.new_install_prompt_erase?this._state="ASK_ERASE":this._startInstall(!0)}}
                >
                  ${tr}
                  <div slot="headline">
                    ${this._isSameFirmware?`Update ${this._manifest.name}`:`Install ${this._manifest.name}`}
                  </div>
                </ew-list-item>
              `}
          ${this._client.nextUrl===void 0?"":b`
                <ew-list-item
                  type="link"
                  href=${this._client.nextUrl}
                  target="_blank"
                >
                  ${rr}
                  <div slot="headline">Visit Device</div>
                </ew-list-item>
              `}
          ${this._manifest.home_assistant_domain&&this._client.state===xe.PROVISIONED?b`
                <ew-list-item
                  type="link"
                  href=${`https://my.home-assistant.io/redirect/config_flow_start/?domain=${this._manifest.home_assistant_domain}`}
                  target="_blank"
                >
                  ${or}
                  <div slot="headline">Add to Home Assistant</div>
                </ew-list-item>
              `:""}
          <ew-list-item
            type="button"
            @click=${()=>{this._state="PROVISION",this._client.state===xe.PROVISIONED&&(this._provisionForce=!0)}}
          >
            ${oa}
            <div slot="headline">
              ${this._client.state===xe.READY?"Connect to Wi-Fi":"Change Wi-Fi"}
            </div>
          </ew-list-item>
          <ew-list-item
            type="button"
            @click=${async()=>{const e=this._client;e&&(await this._closeClientWithoutEvents(e),await ye(100)),this._client=void 0,this._state="LOGS"}}
          >
            ${ir}
            <div slot="headline">Logs & Console</div>
          </ew-list-item>
          ${this._isSameFirmware&&this._manifest.funding_url?b`
                <ew-list-item
                  type="link"
                  href=${this._manifest.funding_url}
                  target="_blank"
                >
                  ${sa}
                  <div slot="headline">Fund Development</div>
                </ew-list-item>
              `:""}
          ${this._isSameVersion?b`
                <ew-list-item
                  type="button"
                  class="danger"
                  @click=${()=>this._startInstall(!0)}
                >
                  ${aa}
                  <div slot="headline">Erase User Data</div>
                </ew-list-item>
              `:""}
        </ew-list>
      </div>
    `,[i,t,!0]}_renderDashboardNoImprov(){const i=this._manifest.name;let t;return t=b`
      <div slot="content">
        <ew-list>
          <ew-list-item
            type="button"
            @click=${()=>{this._manifest.new_install_prompt_erase?this._state="ASK_ERASE":this._startInstall(!0)}}
          >
            ${tr}
            <div slot="headline">${`Install ${this._manifest.name}`}</div>
          </ew-list-item>
          <ew-list-item
            type="button"
            @click=${async()=>{this._client=void 0,this._state="LOGS"}}
          >
            ${ir}
            <div slot="headline">Logs & Console</div>
          </ew-list-item>
        </ew-list>
      </div>
    `,[i,t,!0]}_renderProvision(){var i;let t,e="Configure Wi-Fi";if(this._busy)return[e,this._renderProgress(this._ssids===void 0?"Scanning for networks":"Trying to connect")];if(this._provisionForce||this._client.state!==xe.PROVISIONED){let r;switch(this._client.error){case 3:r="Unable to connect";break;case 254:r="Timeout";break;case 0:case 2:break;default:r=`Unknown error (${this._client.error})`}const o=(i=this._ssids)===null||i===void 0?void 0:i.find(a=>a.name===this._selectedSsid);t=b`
        <ew-icon-button slot="headline" @click=${this._updateSsids}>
          ${ra}
        </ew-icon-button>
        <div slot="content">
          <div>Connect your device to the network to start using it.</div>
          ${r?b`<p class="error">${r}</p>`:""}
          ${this._ssids!==null?b`
                <ew-filled-select
                  menu-positioning="fixed"
                  label="Network"
                  @change=${a=>{const n=a.target.selectedIndex;this._selectedSsid=n===this._ssids.length?null:this._ssids[n].name}}
                >
                  ${this._ssids.map(a=>b`
                      <ew-select-option
                        .selected=${o===a}
                        .value=${a.name}
                      >
                        ${a.name}
                      </ew-select-option>
                    `)}
                  <ew-divider></ew-divider>
                  <ew-select-option .selected=${!o}>
                    Join other…
                  </ew-select-option>
                </ew-filled-select>
              `:""}
          ${o?"":b`
                  <ew-filled-text-field
                    label="Network Name"
                    name="ssid"
                  ></ew-filled-text-field>
                `}
          ${!o||o.secured?b`
                <ew-filled-text-field
                  label="Password"
                  name="password"
                  type="password"
                ></ew-filled-text-field>
              `:""}
        </div>
        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state="DASHBOARD"}}
          >
            ${this._installState&&this._installErase?"Skip":"Back"}
          </ew-text-button>
          <ew-text-button @click=${this._doProvision}>Connect</ew-text-button>
        </div>
      `}else{e=void 0;const r=!this._wasProvisioned&&(this._client.nextUrl!==void 0||"home_assistant_domain"in this._manifest);t=b`
        <div slot="content">
          <ewt-page-message
            .icon=${"\u{1F389}"}
            label="Device connected to the network!"
          ></ewt-page-message>
          ${r?b`
                <ew-list>
                  ${this._client.nextUrl===void 0?"":b`
                        <ew-list-item
                          type="link"
                          href=${this._client.nextUrl}
                          target="_blank"
                          @click=${()=>{this._state="DASHBOARD"}}
                        >
                          ${rr}
                          <div slot="headline">Visit Device</div>
                        </ew-list-item>
                      `}
                  ${this._manifest.home_assistant_domain?b`
                        <ew-list-item
                          type="link"
                          href=${`https://my.home-assistant.io/redirect/config_flow_start/?domain=${this._manifest.home_assistant_domain}`}
                          target="_blank"
                          @click=${()=>{this._state="DASHBOARD"}}
                        >
                          ${or}
                          <div slot="headline">Add to Home Assistant</div>
                        </ew-list-item>
                      `:""}
                  <ew-list-item
                    type="button"
                    @click=${()=>{this._state="DASHBOARD"}}
                  >
                    <div slot="start" class="fake-icon"></div>
                    <div slot="headline">Skip</div>
                  </ew-list-item>
                </ew-list>
              `:""}
        </div>

        ${r?"":b`
              <div slot="actions">
                <ew-text-button
                  @click=${()=>{this._state="DASHBOARD"}}
                >
                  Continue
                </ew-text-button>
              </div>
            `}
      `}return[e,t]}_renderAskErase(){return["Erase device",b`
      <div slot="content">
        <div>
          Do you want to erase the device before installing
          ${this._manifest.name}? All data on the device will be lost.
        </div>
        <label class="formfield">
          <ew-checkbox touch-target="wrapper" class="danger"></ew-checkbox>
          Erase device
        </label>
      </div>
      <div slot="actions">
        <ew-text-button
          @click=${()=>{this._state="DASHBOARD"}}
        >
          Back
        </ew-text-button>
        <ew-text-button
          @click=${()=>{const i=this.shadowRoot.querySelector("ew-checkbox");this._startInstall(i.checked)}}
        >
          Next
        </ew-text-button>
      </div>
    `]}_renderInstall(){let i,t;const e=!this._installErase&&this._isSameFirmware;if(!this._installConfirmed&&this._isSameVersion)i="Erase User Data",t=b`
        <div slot="content">
          Do you want to reset your device and erase all user data from your
          device?
        </div>
        <div slot="actions">
          <ew-text-button class="danger" @click=${this._confirmInstall}>
            Erase User Data
          </ew-text-button>
        </div>
      `;else if(this._installConfirmed)if(this._installState&&this._installState.state!=="initializing"&&this._installState.state!=="preparing")if(this._installState.state==="erasing")i="Installing",t=this._renderProgress("Erasing");else if(this._installState.state==="writing"||this._installState.state==="finished"&&this._client===void 0){let r,o;i="Installing",this._installState.state==="finished"?o="Wrapping up":this._installState.details.percentage<4?o="Installing":r=this._installState.details.percentage,t=this._renderProgress(b`
          ${o?b`${o}<br />`:""}
          <br />
          This will take
          ${this._installState.chipFamily==="ESP8266"?"a minute":"2 minutes"}.<br />
          Keep this page visible to prevent slow down
        `,r)}else if(this._installState.state==="finished"){i=void 0;const r=this._client!==null;t=b`
        <ewt-page-message
          slot="content"
          .icon=${"\u{1F389}"}
          label="Installation complete!"
        ></ewt-page-message>

        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state=r&&this._installErase?"PROVISION":"DASHBOARD"}}
          >
            Next
          </ew-text-button>
        </div>
      `}else this._installState.state==="error"&&(i="Installation failed",t=b`
        <ewt-page-message
          slot="content"
          .icon=${"\u26A0\uFE0F"}
          .label=${this._installState.message}
        ></ewt-page-message>
        <div slot="actions">
          <ew-text-button
            @click=${async()=>{this._initialize(),this._state="DASHBOARD"}}
          >
            Back
          </ew-text-button>
        </div>
      `);else i="Installing",t=this._renderProgress("Preparing installation");else{i="Confirm Installation";const r=e?"update to":"install";t=b`
        <div slot="content">
          ${e?b`Your device is running
                ${this._info.firmware}&nbsp;${this._info.version}.<br /><br />`:""}
          Do you want to ${r}
          ${this._manifest.name}&nbsp;${this._manifest.version}?
          ${this._installErase?b`<br /><br />All data on the device will be erased.`:""}
        </div>
        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state="DASHBOARD"}}
          >
            Back
          </ew-text-button>
          <ew-text-button @click=${this._confirmInstall}>
            Install
          </ew-text-button>
        </div>
      `}return[i,t,!1]}_renderLogs(){let i;return i=b`
      <div slot="content">
        <ewt-console .port=${this.port} .logger=${this.logger}></ewt-console>
      </div>
      <div slot="actions">
        <ew-text-button
          @click=${async()=>{await this.shadowRoot.querySelector("ewt-console").reset()}}
        >
          Reset Device
        </ew-text-button>
        <ew-text-button
          @click=${()=>{vs(this.shadowRoot.querySelector("ewt-console").logs(),"esp-web-tools-logs.txt"),this.shadowRoot.querySelector("ewt-console").reset()}}
        >
          Download Logs
        </ew-text-button>
        <ew-text-button
          @click=${async()=>{await this.shadowRoot.querySelector("ewt-console").disconnect(),this._state="DASHBOARD",this._initialize()}}
        >
          Back
        </ew-text-button>
      </div>
    `,["Logs",i]}willUpdate(i){i.has("_state")&&(this._state!=="ERROR"&&(this._error=void 0),this._state==="PROVISION"?this._updateSsids():this._provisionForce=!1,this._state==="INSTALL"&&(this._installConfirmed=!1,this._installState=void 0))}async _updateSsids(i=0){const t=this._ssids;let e;this._ssids=void 0,this._busy=!0;try{e=await this._client.scan()}catch{return this._ssids===void 0&&(this._ssids=null,this._selectedSsid=null),void(this._busy=!1)}if(e.length===0&&i<3)return console.log("SCHEDULE RETRY",i),void setTimeout(()=>this._updateSsids(i+1),1e3);t?this._selectedSsid&&!e.find(r=>r.name===this._selectedSsid)&&(this._selectedSsid=e[0].name):this._selectedSsid=e.length?e[0].name:null,this._ssids=e,this._busy=!1}firstUpdated(i){super.firstUpdated(i),this._bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden",this._initialize()}updated(i){super.updated(i),i.has("_state")&&this.setAttribute("state",this._state),this._state==="PROVISION"&&(i.has("_selectedSsid")&&this._selectedSsid===null?this._focusFormElement("ew-filled-text-field[name=ssid]"):i.has("_ssids")&&this._focusFormElement())}_focusFormElement(i="ew-filled-text-field, ew-filled-select"){const t=this.shadowRoot.querySelector(i);t&&t.updateComplete.then(()=>setTimeout(()=>t.focus(),100))}async _initialize(i=!1){if(this.port.readable===null||this.port.writable===null)return this._state="ERROR",void(this._error="Serial port is not readable/writable. Close any other application using it and try again.");try{this._manifest=await(async e=>{const r=new URL(e,location.toString()).toString(),o=await fetch(r),a=await o.json();return"new_install_skip_erase"in a&&(console.warn('Manifest option "new_install_skip_erase" is deprecated. Use "new_install_prompt_erase" instead.'),a.new_install_skip_erase&&(a.new_install_prompt_erase=!0)),a})(this.manifestPath)}catch{return this._state="ERROR",void(this._error="Failed to download manifest")}if(this._manifest.new_install_improv_wait_time===0)return void(this._client=null);const t=new da(this.port,this.logger);t.addEventListener("state-changed",()=>{this.requestUpdate()}),t.addEventListener("error-changed",()=>this.requestUpdate());try{const e=i?this._manifest.new_install_improv_wait_time!==void 0?1e3*this._manifest.new_install_improv_wait_time:1e4:1e3;this._info=await t.initialize(e),this._client=t,t.addEventListener("disconnect",this._handleDisconnect)}catch(e){this._info=void 0,e instanceof ar?(this._state="ERROR",this._error="Serial port is not ready. Close any other application using it and try again."):(this._client=null,this.logger.error("Improv initialization failed.",e))}}_startInstall(i){this._state="INSTALL",this._installErase=i,this._installConfirmed=!1}async _confirmInstall(){this._installConfirmed=!0,this._installState=void 0,this._client&&await this._closeClientWithoutEvents(this._client),this._client=void 0,await this.port.close(),(async(i,t,e,r,o)=>{let a,n;const s=u=>i({...u,manifest:r,build:a,chipFamily:n}),c=new jr(t),l=new ms({transport:c,baudrate:115200,romBaudrate:115200,enableTracing:!1});window.esploader=l,s({state:"initializing",message:"Initializing...",details:{done:!1}});try{await l.main(),await l.flashId()}catch(u){return console.error(u),s({state:"error",message:"Failed to initialize. Try resetting your device or holding the BOOT button while clicking INSTALL.",details:{error:"failed_initialize",details:u}}),await ht(c),void await c.disconnect()}if(n=l.chip.CHIP_NAME,s({state:"initializing",message:`Initialized. Found ${n}`,details:{done:!0}}),a=r.builds.find(u=>u.chipFamily===n),!a)return s({state:"error",message:`Your ${n} board is not supported.`,details:{error:"not_supported",details:n}}),await ht(c),void await c.disconnect();s({state:"preparing",message:"Preparing installation...",details:{done:!1}});const d=new URL(e,location.toString()).toString(),f=a.parts.map(async u=>{const _=new URL(u.path,d).toString(),x=await fetch(_);if(!x.ok)throw new Error(`Downlading firmware ${u.path} failed: ${x.status}`);const E=new FileReader,m=await x.blob();return new Promise(w=>{E.addEventListener("load",()=>w(E.result)),E.readAsBinaryString(m)})}),g=[];let p=0;for(let u=0;u<f.length;u++)try{const _=await f[u];g.push({data:_,address:a.parts[u].offset}),p+=_.length}catch(_){return s({state:"error",message:_.message,details:{error:"failed_firmware_download",details:_.message}}),await ht(c),void await c.disconnect()}s({state:"preparing",message:"Installation prepared",details:{done:!0}}),o&&(s({state:"erasing",message:"Erasing device...",details:{done:!1}}),await l.eraseFlash(),s({state:"erasing",message:"Device erased",details:{done:!0}})),s({state:"writing",message:"Writing progress: 0%",details:{bytesTotal:p,bytesWritten:0,percentage:0}});let k=0;try{await l.writeFlash({fileArray:g,flashSize:"keep",flashMode:"keep",flashFreq:"keep",eraseAll:!1,compress:!0,reportProgress:(u,_,x)=>{const E=_/x*g[u].data.length,m=Math.floor((k+E)/p*100);_!==x?s({state:"writing",message:`Writing progress: ${m}%`,details:{bytesTotal:p,bytesWritten:k+_,percentage:m}}):k+=E}})}catch(u){return s({state:"error",message:u.message,details:{error:"write_failed",details:u}}),await ht(c),void await c.disconnect()}s({state:"writing",message:"Writing complete",details:{bytesTotal:p,bytesWritten:k,percentage:100}}),await ht(c),console.log("DISCONNECT"),await c.disconnect(),s({state:"finished",message:"All done!"})})(i=>{this._installState=i,i.state==="finished"?ye(100).then(()=>this.port.open({baudRate:115200,bufferSize:8192})).then(()=>this._initialize(!0)).then(()=>this.requestUpdate()):i.state==="error"&&ye(100).then(()=>this.port.open({baudRate:115200,bufferSize:8192}))},this.port,this.manifestPath,this._manifest,this._installErase)}async _doProvision(){var i;this._busy=!0,this._wasProvisioned=this._client.state===xe.PROVISIONED;const t=this._selectedSsid===null?this.shadowRoot.querySelector("ew-filled-text-field[name=ssid]").value:this._selectedSsid,e=((i=this.shadowRoot.querySelector("ew-filled-text-field[name=password]"))===null||i===void 0?void 0:i.value)||"";try{await this._client.provision(t,e,3e4)}catch{return}finally{this._busy=!1,this._provisionForce=!1}}_closeDialog(){this.shadowRoot.querySelector("ew-dialog").close()}async _handleClose(){this._client&&await this._closeClientWithoutEvents(this._client),((i,t,e,r)=>{r=r||{};const o=new CustomEvent(t,{bubbles:r.bubbles===void 0||r.bubbles,cancelable:!!r.cancelable,composed:r.composed===void 0||r.composed,detail:e});i.dispatchEvent(o)})(this,"closed"),document.body.style.overflow=this._bodyOverflow,this.parentNode.removeChild(this)}get _isSameFirmware(){var i;return!!this._info&&(!((i=this.overrides)===null||i===void 0)&&i.checkSameFirmware?this.overrides.checkSameFirmware(this._manifest,this._info):this._info.firmware===this._manifest.name)}get _isSameVersion(){return this._isSameFirmware&&this._info.version===this._manifest.version}async _closeClientWithoutEvents(i){i.removeEventListener("disconnect",this._handleDisconnect),await i.close()}_preventDefault(i){i.preventDefault()}},K.styles=[ys,N`
      :host {
        --mdc-dialog-max-width: 390px;
      }
      div[slot="headline"] {
        padding-right: 48px;
      }
      ew-icon-button[slot="headline"] {
        position: absolute;
        right: 4px;
        top: 8px;
      }
      ew-icon-button[slot="headline"] svg {
        padding: 8px;
        color: var(--text-color);
      }
      .dialog-nav svg {
        color: var(--text-color);
      }
      .table-row {
        display: flex;
      }
      .table-row.last {
        margin-bottom: 16px;
      }
      .table-row svg {
        width: 20px;
        margin-right: 8px;
      }
      ew-filled-text-field,
      ew-filled-select {
        display: block;
        margin-top: 16px;
      }
      label.formfield {
        display: inline-flex;
        align-items: center;
        padding-right: 8px;
      }
      ew-list {
        margin: 0 -24px;
        padding: 0;
      }
      ew-list-item svg {
        height: 24px;
      }
      ewt-page-message + ew-list {
        padding-top: 16px;
      }
      .fake-icon {
        width: 24px;
      }
      .error {
        color: var(--danger-color);
      }
      .danger {
        --mdc-theme-primary: var(--danger-color);
        --mdc-theme-secondary: var(--danger-color);
        --md-sys-color-primary: var(--danger-color);
        --md-sys-color-on-surface: var(--danger-color);
      }
      button.link {
        background: none;
        color: inherit;
        border: none;
        padding: 0;
        font: inherit;
        text-align: left;
        text-decoration: underline;
        cursor: pointer;
      }
      :host([state="LOGS"]) ew-dialog {
        max-width: 90vw;
        max-height: 90vh;
      }
      ewt-console {
        width: calc(80vw - 48px);
        height: calc(90vh - 168px);
      }
    `],h([O()],K.prototype,"_client",void 0),h([O()],K.prototype,"_state",void 0),h([O()],K.prototype,"_installErase",void 0),h([O()],K.prototype,"_installConfirmed",void 0),h([O()],K.prototype,"_installState",void 0),h([O()],K.prototype,"_provisionForce",void 0),h([O()],K.prototype,"_error",void 0),h([O()],K.prototype,"_busy",void 0),h([O()],K.prototype,"_ssids",void 0),h([O()],K.prototype,"_selectedSsid",void 0),customElements.define("ewt-install-dialog",K)});export{K as EwtInstallDialog,As as __tla};
